html, body {
  box-sizing: border-box;
  background: black;
  font-family: Avenir, Montserrat, Corbel, "URW Gothic", source-sans-pro, sans-serif;
  font-weight: normal;
}

main {
  max-width: 80vw;
  max-height: 80vh;
  aspect-ratio: 1/1;
  margin: 10vh auto;

  --tile-size: min(calc(80vw / 16), calc(80vh / 16));
  --tile-front: #f4f0eb;
  --tile-front-side: #f0ece7;
  --tile-back: #f0974c;
  --tile-back-side: #f0974c;
  position: relative;
  z-index: 1;
}
main::before {
  content: "";
  position: absolute;
  top: calc(-0.5 * var(--tile-size));
  left: calc(-0.5 * var(--tile-size));
  background: #0f6f2f;
  border-radius: 1rem;
  width: calc(100% + var(--tile-size));
  height: calc(100% + var(--tile-size));
  z-index: -1;
}

/* hands */
div.hand, div.tiles, div.calls, div.call, div.draws, div.buttons, div.call-buttons, button.call-button {
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: flex-end;
}
div.hand {
  position: absolute;
  transform-style: preserve-3d;
  width: 100%;
}
div.hand, div.draws { z-index: 1; } /* so if they overlap with calls, the hand goes on top */
div.tiles {
  padding-left: calc(2 * var(--tile-size));
}
div.calls {
  position: absolute;
  flex-direction: row-reverse;
  right: 0;
}
div.call, div.draws, div.winning-tile {
  margin-left: calc(0.375 * var(--tile-size));
}
div.hand.self {
  bottom: 0;
}
div.hand.self > div.tiles > div.tile,
div.hand.self > div.draws > div.tile {
  cursor: pointer;
}
div.hand.shimocha {
  right: var(--tile-size);
  transform: rotate(270deg);
  transform-origin: top right;
}
div.hand.toimen {
  top: 0;
  transform: rotate(180deg);
}
div.hand.kamicha {
  left: var(--tile-size);
  transform: rotate(90deg);
  transform-origin: top left;
}


/* ponds */
div.pond {
  display: flex;
  flex-flow: row wrap;
  /*flex-direction: row;*/
  justify-content: left;
  align-content: flex-start;
  align-items: flex-start;
  position: absolute;
  transform-style: preserve-3d;
  width: 100%;
  height: calc(3 * var(--tile-size));
  left: calc(50% - (2.375 * var(--tile-size)));
  top: calc(50% + (2.625 * var(--tile-size)));
  transform-origin: calc(2.375 * var(--tile-size)) calc(-2.625 * var(--tile-size));
  overflow: visible;
  z-index: -1;
}
div.pond::before, div.pond::after { content: ""; width: 100%; order: 1; }
.pond > .tile { order: 0; z-index: 2; }
.pond > .tile:nth-child(n+7) { order: 1; z-index: 1; }
.pond > .tile:nth-child(n+13) { order: 2; z-index: 0; }
div.pond.shimocha { transform: rotate(270deg); }
div.pond.toimen { transform: rotate(180deg); }
div.pond.kamicha { transform: rotate(90deg); }
div.pond > div.tile.sideways { transform: translateY(calc(-0.3125 * var(--tile-size))); }

/* compass */
div.compass {
  position: relative;
  width: calc(4.75 * var(--tile-size));
  height: calc(4.75 * var(--tile-size));
  left: calc(50% - (2.375 * var(--tile-size)));
  top: calc(50% - (2.375 * var(--tile-size)));
  transform-origin: 50% 50%;
  user-select: none;
  z-index: 2
}
div.compass.east {}
div.compass.south { transform: rotate(90deg); }
div.compass.west { transform: rotate(180deg); }
div.compass.north { transform: rotate(270deg); }
div.compass.east > div.score-box { border-style: ridge; }
div.compass.south > div.score-box { border-style: ridge; }
div.compass.west > div.score-box { border-style: groove; }
div.compass.north > div.score-box { border-style: groove; }
div.compass::before {
  position: absolute;
  content: "";
  width: 100%;
  height: 100%;
  background: gray;
  border-radius: calc(0.25 * var(--tile-size));
  z-index: -2;
}
div.compass > div.score-box {
  position: absolute;
  width: 0;
  height: 0;
  left: calc(50% - (1.125 * var(--tile-size)));
  top: calc(50% - (1.125 * var(--tile-size)));
  border-radius: calc(0.25 * var(--tile-size));
  border-width: calc(1.125 * var(--tile-size));
  border-color: lightgray;
  z-index: -1;
}
div.compass > div.direction {
  position: absolute;
  width: 100%;
  height: 50%;
  top: 50%;
  transform-origin: 50% 0%;
}
div.compass > div.direction.east {}
div.compass > div.direction.south { transform: rotate(270deg); }
div.compass > div.direction.west { transform: rotate(180deg); }
div.compass > div.direction.north { transform: rotate(90deg); }
div.compass > div.direction > div.riichi-tray {
  position: absolute;
  width: calc(2.25 * var(--tile-size));
  height: calc(0.625 * var(--tile-size));
  bottom: calc(0.3125 * var(--tile-size));
  left: calc(50% - (1.125 * var(--tile-size)));
  border-radius: calc(0.25 * var(--tile-size));
  background: darkgray;
}
div.compass > div.direction > div.riichi-tray.highlighted {
  background: var(--tile-back);
}
div.compass > div.direction > div.riichi-tray.riichi::before {
  content: "";
  position: absolute;
  width: calc(2 * var(--tile-size));
  height: calc(0.2 * var(--tile-size));
  border-radius: calc(0.0625 * var(--tile-size));
  left: calc(50% - (1 * var(--tile-size)));
  bottom: calc(50% - (0.1 * var(--tile-size)));
  background: white;
}
div.compass > div.direction > div.riichi-tray.riichi::after {
  content: "";
  position: absolute;
  width: calc(0.1 * var(--tile-size));
  height: calc(0.1 * var(--tile-size));
  border-radius: 50%;
  left: calc(50% - (0.05 * var(--tile-size)));
  bottom: calc(50% - (0.05 * var(--tile-size)));
  background: red;
}
div.compass > div.direction > div.wind-marker {
  position: absolute;
  font-size: calc(0.75 * var(--tile-size));
  color: var(--tile-front);
  width: var(--tile-size);
  height: var(--tile-size);
  bottom: calc(0.125 * var(--tile-size));
  right: calc(-0.0625 * var(--tile-size));
}
div.compass > div.direction > div.wind-marker.highlighted {
  color: var(--tile-back);
}
div.compass > div.direction > div.score-counter {
  position: absolute;
  text-align: center;
  width: calc(1.25 * var(--tile-size));
  height: calc(0.4 * var(--tile-size));
  font-size: calc(0.32 * var(--tile-size));
  color: var(--tile-back);
  background: black;
  left: calc(50% - (0.625 * var(--tile-size)));
  bottom: calc(50% + (0.25 * var(--tile-size)));
  border-radius: calc(0.25 * var(--tile-size));
}

div.compass > div.centerpiece {
  position: relative;
  text-align: center;
  width: calc(1 * var(--tile-size));
  height: calc(1 * var(--tile-size));
  font-size: calc(0.5 * var(--tile-size));
  color: black;
  left: calc(50% - (0.5 * var(--tile-size)));
  top: calc(50% - (0.5 * var(--tile-size)));
  z-index: 1;
  margin-top: 10px
  transform-origin: 50% 50%;
}
div.compass.south > div.centerpiece { transform: rotate(-90deg); }
div.compass.west > div.centerpiece { transform: rotate(-180deg); }
div.compass.north > div.centerpiece { transform: rotate(-270deg); }
div.compass > div.centerpiece::before {
  position: absolute;
  content: "";
  width: calc(1.05 * var(--tile-size));
  height: calc(1.05 * var(--tile-size));
  background: #FFFFFF7F;
  left: calc(50% - (0.525 * var(--tile-size)));
  top: calc(50% - (0.525 * var(--tile-size)));
  z-index: -1;
}
div.centerpiece > div.riichi-stick-counter,
div.centerpiece > div.honba-counter {
  position: absolute;
  font-size: calc(0.25 * var(--tile-size));
  right: calc(0.075 * var(--tile-size));
}
div.centerpiece > div.riichi-stick-counter { bottom: calc(0.2 * var(--tile-size)); }
div.centerpiece > div.honba-counter { bottom: calc(-0.05 * var(--tile-size)); }
div.centerpiece > div.riichi-stick-counter::before {
  content: "";
  position: absolute;
  width: calc(0.6 * var(--tile-size));
  height: calc(0.1 * var(--tile-size));
  border-radius: calc(0.0625 * var(--tile-size));
  left: calc(50% - (0.75 * var(--tile-size)));
  bottom: calc(50% - (0.05 * var(--tile-size)));
  background: white;
}
div.centerpiece > div.riichi-stick-counter::after {
  content: "";
  position: absolute;
  width: calc(0.05 * var(--tile-size));
  height: calc(0.05 * var(--tile-size));
  border-radius: 50%;
  left: calc(50% - (0.5 * var(--tile-size)));
  bottom: calc(50% - (0.025 * var(--tile-size)));
  background: red;
  z-index: 1;
}
div.centerpiece > div.honba-counter::before {
  content: "";
  position: absolute;
  width: calc(0.6 * var(--tile-size));
  height: calc(0.1 * var(--tile-size));
  border-radius: calc(0.0625 * var(--tile-size));
  left: calc(50% - (0.75 * var(--tile-size)));
  bottom: calc(50% - (0.05 * var(--tile-size)));
  background: white;
}
div.centerpiece > div.honba-counter::after {
  content: "â£¿";
  font-size: calc(0.2 * var(--tile-size));
  position: absolute;
  width: calc(0.05 * var(--tile-size));
  height: calc(0.05 * var(--tile-size));
  left: calc(50% - (0.35 * var(--tile-size)));
  bottom: 50%;
  color: #182890;
  transform: rotate(90deg);
  z-index: 1;
}


/* tiles */
div.tile {
  --tile-width: calc(0.75 * var(--tile-size));
  --tile-height: calc(1 * var(--tile-size));
  width: var(--tile-width);
  height: var(--tile-height);
  background: url("/images/tiles.png") no-repeat;
  background-size: auto calc(38 * var(--tile-size));
  background-position-x: 0;
  background-position-y: 0;
  flex-shrink: 0;
}
div.tile:not(.flat) {
  filter: drop-shadow(0 calc(var(--tile-height) / -8) 0 var(--tile-front-side))
          drop-shadow(0 calc(var(--tile-height) / -8) 0 var(--tile-back-side));
}
div.tile.sideways:not(.flat) {
  filter: drop-shadow(0 calc(var(--tile-height) / -16) 0 var(--tile-front-side))
          drop-shadow(0 calc(var(--tile-height) / -8) 0 var(--tile-back-side));
}
div.tile.sideways {
  width: var(--tile-height);
  /* get rid of residual pixels from filter */
  clip-path: polygon(1.5% 1.5%, 100% 1.5%, 100% 100%, 1.5% 100%);
  transform: translateX(-0.75%) scaleX(calc(100% / 0.985));
}
div.tile.sideways + div.tile.sideways { width: 0; clip-path: none; }
div.tile.sideways + div.tile.sideways::before {
  display: block;
  content: "";
  width: var(--tile-height);
  height: var(--tile-height);
  background: inherit;
  transform: translateX(calc(-1 * var(--tile-height))) translateY(calc(-1 * var(--tile-width)));
}
div.tile.sideways { background-position-x: calc(-1.5 * var(--tile-size)); }
div.tile.dora { background-position-x: calc(-0.75 * var(--tile-size)); }
div.tile.dora.sideways { background-position-x: calc(-2.5 * var(--tile-size)); }
div.tile.\31 m { background-position-y: calc(-1 * var(--tile-size)); }
div.tile.\32 m { background-position-y: calc(-2 * var(--tile-size)); }
div.tile.\33 m { background-position-y: calc(-3 * var(--tile-size)); }
div.tile.\34 m { background-position-y: calc(-4 * var(--tile-size)); }
div.tile.\35 m { background-position-y: calc(-5 * var(--tile-size)); }
div.tile.\36 m { background-position-y: calc(-6 * var(--tile-size)); }
div.tile.\37 m { background-position-y: calc(-7 * var(--tile-size)); }
div.tile.\38 m { background-position-y: calc(-8 * var(--tile-size)); }
div.tile.\39 m { background-position-y: calc(-9 * var(--tile-size)); }
div.tile.\30 p { background-position-y: calc(-10 * var(--tile-size)); }
div.tile.\31 p { background-position-y: calc(-11 * var(--tile-size)); }
div.tile.\32 p { background-position-y: calc(-12 * var(--tile-size)); }
div.tile.\33 p { background-position-y: calc(-13 * var(--tile-size)); }
div.tile.\34 p { background-position-y: calc(-14 * var(--tile-size)); }
div.tile.\35 p { background-position-y: calc(-15 * var(--tile-size)); }
div.tile.\36 p { background-position-y: calc(-16 * var(--tile-size)); }
div.tile.\37 p { background-position-y: calc(-17 * var(--tile-size)); }
div.tile.\38 p { background-position-y: calc(-18 * var(--tile-size)); }
div.tile.\39 p { background-position-y: calc(-19 * var(--tile-size)); }
div.tile.\30 s { background-position-y: calc(-20 * var(--tile-size)); }
div.tile.\31 s { background-position-y: calc(-21 * var(--tile-size)); }
div.tile.\32 s { background-position-y: calc(-22 * var(--tile-size)); }
div.tile.\33 s { background-position-y: calc(-23 * var(--tile-size)); }
div.tile.\34 s { background-position-y: calc(-24 * var(--tile-size)); }
div.tile.\35 s { background-position-y: calc(-25 * var(--tile-size)); }
div.tile.\36 s { background-position-y: calc(-26 * var(--tile-size)); }
div.tile.\37 s { background-position-y: calc(-27 * var(--tile-size)); }
div.tile.\38 s { background-position-y: calc(-28 * var(--tile-size)); }
div.tile.\39 s { background-position-y: calc(-29 * var(--tile-size)); }
div.tile.\31 z { background-position-y: calc(-30 * var(--tile-size)); }
div.tile.\32 z { background-position-y: calc(-31 * var(--tile-size)); }
div.tile.\33 z { background-position-y: calc(-32 * var(--tile-size)); }
div.tile.\34 z { background-position-y: calc(-33 * var(--tile-size)); }
div.tile.\35 z { background-position-y: calc(-34 * var(--tile-size)); }
div.tile.\36 z { background-position-y: calc(-35 * var(--tile-size)); }
div.tile.\37 z { background-position-y: calc(-36 * var(--tile-size)); }
div.tile.\31 x { background-position-y: calc(-37 * var(--tile-size)); }
div.tile.\31 x:not(.flat) {
  filter: drop-shadow(0 calc(var(--tile-height) / -8) 0 var(--tile-back-side))
          drop-shadow(0 calc(var(--tile-height) / -8) 0 var(--tile-front-side));
}
div.tile.inactive {
  opacity: 0.6;
}
/* tile animations */
@keyframes tilePlayed {
  67% {
    width: var(--tile-width);
  }
  100% {
    width: 0;
  }
}
div.tile.removed {
  background: transparent;
  filter: none;
  animation: tilePlayed 0.75s ease forwards;
}
div.tile.removed ~ div.tile.draw {
  margin-left: 0;
}
@keyframes slideUp {
  0% {
    transform: translateY(calc(2 * var(--tile-size)));
    opacity: 0;
  }
  100% {}
}
div.pond > div.tile.just-played:last-child {
  animation: slideUp 0.2s ease forwards;
  z-index: -1;
}

@keyframes slideLeft {
  0% {
    transform: translateX(calc(2 * var(--tile-size)));
    opacity: 0;
  }
  100% {}
}
div.hand > div.draws > div.tile {
  animation: slideLeft 0.2s ease forwards;
}

@keyframes slideRight {
  0% {
    transform: translateX(calc(-6 * var(--tile-size)));
    opacity: 0;
  }
  100% {}
}
div.hand > div.calls > div.call.just_called:last-child {
  animation: slideRight 0.4s ease forwards;
}

@keyframes slideDown {
  0% {
    transform: translateX(calc(-1 * var(--tile-height))) translateY(calc(-3 * var(--tile-width)));
    opacity: 0;
  }
  100% {
    transform: translateX(calc(-1 * var(--tile-height))) translateY(calc(-1 * var(--tile-width)));
  }
}
div.tile.sideways + div.tile.sideways::before {
  animation: slideDown 0.2s ease forwards;
}


/* buttons, auto buttons, and call choice buttons */
div.call-buttons-container {
  display: flex;
  flex-direction: column-reverse;
  row-gap: calc(0.25 * var(--tile-size));
}
div.buttons, div.call-buttons-container {
  position: absolute;
  bottom: calc(1.5 * var(--tile-size));
  right: calc(1.5 * var(--tile-size));
  align-items: flex-end;
}
div.buttons, div.call-buttons {
  align-items: center;
  column-gap: calc(0.25 * var(--tile-size));
}
div.call-buttons > div.tile:first-child {
  margin-top: calc(0.25 * var(--tile-size));
}
div.call-buttons > div.call-button-separator {
  border-left: calc(0.5 * var(--tile-size)) solid var(--tile-back);
  border-top: calc(0.25 * var(--tile-size)) solid transparent;
  border-bottom: calc(0.25 * var(--tile-size)) solid transparent;
}
div.buttons > button,
div.call-buttons > button {
  border: 1px solid var(--tile-back);
  border-radius: 4px;
  background: var(--tile-back);
  cursor: pointer;
}
div.buttons > button {
  transform: skew(-20deg);
}
div.call-buttons > button {
  padding-top: calc(0.25 * var(--tile-size));
}
div.auto-buttons {
  position: absolute;
  font-size: calc(0.5 * var(--tile-size));
  bottom: calc(-1.25 * var(--tile-size));
  left: 0;
}
div.auto-buttons > input { display: none; }
div.auto-buttons > label {
  background: gray;
  padding: 0 calc(0.125 * var(--tile-size));
  border-radius: calc(0.125 * var(--tile-size));
}
div.auto-buttons > input:checked + label { background: var(--tile-back); }


/* big text */
@keyframes textFade {
  75% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}
div.big-text {
  position: absolute;
  width: 100%;
  text-align: center;
  color: white;
  font-size: calc(4 * var(--tile-size));
  text-shadow: black 0.1rem 0.1rem;
  z-index: 50;
  animation: textFade 1.5s ease forwards;
  pointer-events: none;
}
div.big-text.self { bottom: 1rem; }
div.big-text.kamicha { left: calc(-50% + (3 * var(--tile-size))); top: calc(50% - (3 * var(--tile-size))); }
div.big-text.toimen { top: 1rem; }
div.big-text.shimocha { left: calc(50% - (3 * var(--tile-size))); top: calc(50% - (3 * var(--tile-size))); }

/* revealed tiles */

div.revealed-tiles {
  display: flex;
  position: absolute;
  font-size: calc(0.5 * var(--tile-size));
  top: calc(-1.5 * var(--tile-size));
  left: 0;
}

/* win/draw windows */
div.game-end-window {
  position: absolute;
  width: 80%;
  height: 80%;
  left: 10%;
  top: 10%;
  z-index: 10;
  float: left;
  transition: opacity 0.5s ease;
}
div.game-end-window.inactive {
  opacity: 0;
  pointer-events: none;
  user-select: none;
}
div.game-end-window::before {
  position: absolute;
  content: "";
  width: 108%;
  height: 108%;
  top: -4%;
  left: -4%;
  border-radius: 1rem;
  background: black;
  opacity: 0.6;
  z-index: -1;
}
div.game-end-window > div.winning-hand,
div.game-end-window > div.yakus,
div.game-end-window > div.score-display {
  pointer-events: none;
  user-select: none;
}
div.winning-hand { justify-content: center; }
/* yakus */
div.yakus {
  display: flex;
  flex-flow: column wrap;
  align-content: space-evenly;
  row-gap: calc(0.5 * var(--tile-size));
  margin-left: calc(0.5 * var(--tile-size));
  margin-right: calc(-0.5 * var(--tile-size));
  margin-top: 10%;
  width: 100%;
  height: 90%;
}
/* wrap hack, supports 19 items */
div.yakus::before { content: ""; height: 100%; order: 1; }
div.yakus::after { content: ""; height: 100%; order: -1; } /* for space-evenly to work */
div.yaku:nth-child(n+1):nth-last-child(-n+0),
div.yaku:nth-child(n+2):nth-last-child(-n+1),
div.yaku:nth-child(n+3):nth-last-child(-n+2),
div.yaku:nth-child(n+4):nth-last-child(-n+3),
div.yaku:nth-child(n+5):nth-last-child(-n+4),
div.yaku:nth-child(n+6):nth-last-child(-n+5),
div.yaku:nth-child(n+7):nth-last-child(-n+6),
div.yaku:nth-child(n+8):nth-last-child(-n+7),
div.yaku:nth-child(n+9):nth-last-child(-n+8),
div.yaku:nth-child(n+10):nth-last-child(-n+9) { order: 1; }
div.yaku,
div.yaku > div.han-counter,
div.yaku > div.yaku-text::before {
  font-size: calc(0.6 * var(--tile-size));
  height: 1.2em;
  padding-right: calc(0.5 * var(--tile-size));
  border-radius: calc(0.125 * var(--tile-size));
  white-space: nowrap;
}
div.yaku > div.yaku-text::before {
  filter: drop-shadow(calc(var(--tile-size) / -8) calc(var(--tile-size) / -16) 0 var(--tile-front-side))
          drop-shadow(calc(var(--tile-size) / -8) calc(var(--tile-size) / -16) 0 var(--tile-back-side));
}
div.yaku {
  display: flex;
}
div.yaku > div.yaku-text {
  display: inline-block;
  position: relative;
  z-index: 2;
}
div.yaku > div.yaku-text::before {
  position: absolute;
  content: "";
  z-index: -1;
  background: var(--tile-front);
  width: calc(100% + var(--tile-size));
  left: -10%;
  height: 110%;
  top: 0%;
  transform: rotate(2deg);
}
div.yaku > div.han-counter {
  display: inline-block;
  position: relative;
  z-index: 2;
  transform: rotate(-20deg);
  font-style: normal;
  margin-left: calc(0.5 * var(--tile-size));
}
div.yaku > div.han-counter::before,
div.total-han-display::before,
div.total-fu-display::before,
div.total-score-display::before,
div.total-score-name-display::before {
  background-image: url(/images/brush-bg.svg);
  background-size: 100% 100%;
  background-repeat: no-repeat;
}
div.total-fu-display::before,
div.total-score-display::before {
  background-image: url(/images/brush-bg2.svg);
}
div.yaku > div.han-counter::before {
  content: "";
  position: absolute;
  z-index: -1;
  width: calc(3 * var(--tile-size));
  height: 160%;
  left: calc(-0.66 * var(--tile-size));
  top: -37.5%;
}

/* score display */
div.score-display {
  display: flex;
  flex-flow: row wrap;
  justify-content: space-evenly;
  row-gap: calc(0.125 * var(--tile-size));
  position: absolute;
  width: 100%;
  bottom: 0;
}
div.score-display::before { content: ""; width: 100%; order: 1; }
div.total-han-display,
div.total-fu-display,
div.total-score-display {
  position: relative;
  z-index: 1;
}
div.total-han-display, div.total-fu-display { font-size: calc(1.25 * var(--tile-size)); }
div.total-score-display { font-size: calc(2 * var(--tile-size)); order: 1; }
div.total-score-name-display { font-size: calc(1.2 * var(--tile-size)); order: 1; }
div.total-han-display::before,
div.total-fu-display::before,
div.total-score-display::before,
div.total-score-name-display::before {
  position: absolute;
  content: "";
  width: 150%;
  height: 140%;
  left: -25%;
  bottom: -7.5%;
  z-index: -1;
}
div.total-fu-display::before {
  transform: rotate(180deg);
  width: 160%;
  left: -35%;
  bottom: -35%;
}
div.total-score-display::before {
  width: 180%;
  height: 160%;
  left: -40%;
}
div.total-score-name-display {
  transform: rotate(-20deg);
  position: absolute;
  bottom: 0;
  right: 0;
  z-index: 2;
}
div.total-score-name-display::before {
  transform: rotate(180deg);
  width: 140%;
  height: 120%;
  left: -20%;
  bottom: -15%;
}

/* draws */
div.game-end-window > div.draw-reason {
  position: relative;
  font-size: calc(1.5 * var(--tile-size));
  text-align: center;
  width: 100%;
  top: 0;
  left: 0;
  right: 0;
  z-index: 2;
}
div.game-end-window > div.draw-reason::before {
  position: absolute;
  content: "";
  background-image: url(/images/brush-bg2.svg);
  background-size: 100% 100%;
  background-repeat: no-repeat;
  transform: rotate(181deg);
  width: 120%;
  height: 140%;
  left: -5%;
  bottom: -40%;
  z-index: -1;
}

/* game end timer */

div.game-end-window > div.timer {
  position: absolute;
  color: white;
  text-align: center;
  right: calc(-0.25 * var(--tile-size));
  bottom: calc(-0.25 * var(--tile-size));
  width: calc(1 * var(--tile-size));
  height: calc(0.75 * var(--tile-size));
  cursor: pointer;
}



/* ruleset textbox */
div.ruleset {
  position: absolute;
  top: calc(100% + (2 * var(--tile-size)) + 1.2em);
  left: calc(50% - 50vw + var(--tile-size));
  background: #0f6f2f;
  width: calc(100vw - 2 * var(--tile-size));
  height: 100%;
}
div.ruleset::before {
  position: absolute;
  content: "Ruleset:";
  top: -1.2em;
  color: white;
}
div.ruleset > textarea {
  width: 100%;
  height: 100%;
  background: #3f3f3f;
  color: white;
}




/* index screen */
div.title {
  text-align: center;
  display: flex;
  column-gap: calc(2 * var(--tile-size));
  user-select: none;
}
div.title > div {
  position: absolute;
  z-index: 2;
  display: inline-block;
}
div.title > div.title-riichi {
  font-size: calc(3 * var(--tile-size));
  transform: rotate(2deg);  
  top: 0;
  width: calc(10 * var(--tile-size));
  left: calc(2 * var(--tile-size));
}
div.title > div.title-advanced {
  font-size: calc(2 * var(--tile-size));
  transform: rotate(-10deg);  
  left: calc(4.5 * var(--tile-size));
  top: calc(3 * var(--tile-size));
}
div.title > div.tile {
  --tile-size: min(calc(80vw / 6), calc(80vh / 6));
  top: calc(0.2 * var(--tile-size));
}
div.title > div.tile.\38 m {
  transform: rotate(10deg);
  left: calc(0.2 * var(--tile-size));
}
div.title > div.tile.\37 z {
  transform: rotate(-10deg);
  right: calc(0.2 * var(--tile-size));
}
div.title > div.title-riichi::before,
div.title > div.title-advanced::before {
  position: absolute;
  content: "";
  width: 150%;
  height: 140%;
  left: -25%;
  bottom: -7.5%;
  z-index: -1;
}
div.title > div.title-riichi::before {
  background-image: url(/images/brush-bg.svg);
  background-size: 100% 100%;
  background-repeat: no-repeat;
  z-index: -1;
}
div.title > div.title-advanced::before {
  background-image: url(/images/brush-bg2.svg);
  background-size: 100% 100%;
  background-repeat: no-repeat;
  z-index: -1;
}

div.main-page > .enter-button {
  position: absolute;
  font-size: calc(3 * var(--tile-size));
  width: calc(8 * var(--tile-size));
  top: calc(50% + 1 * var(--tile-size));
  left: calc(50% - 4 * var(--tile-size));
  background: var(--tile-front);
  text-decoration: none;
  color: black;
  border-radius: calc(0.25 * var(--tile-size));
  filter: drop-shadow(calc(var(--tile-size) / -4) calc(var(--tile-size) / -2) 0 var(--tile-front-side))
          drop-shadow(calc(var(--tile-size) / -4) calc(var(--tile-size) / -2) 0 var(--tile-back-side));
}
