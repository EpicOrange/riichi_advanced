{
  "default_mods": ["saki_yumeno_maho", "tobi"],
  "available_mods": [
    {"id": "persistent_saki_cards", "name": "Persistent Cards", "desc": "The character card you choose at the beginning is your card for the whole game."},
    {"id": "tobi", "name": "Tobi", "desc": "Enable busting. Once anyone's points is reduced below zero, the game ends."},
    {"id": "saki_yumeno_maho", "name": "Yumeno Maho", "desc": "Adds Yumeno Maho to the game."},
    {"id": "show_waits", "name": "Show Waits", "desc": "Add some UI that shows waits."}
  ],

  "enable_saki_cards": true,
  "saki_ver": "v13",
  "saki_deck": [
    "aislinn-wishart",
    "anetai-toyone",
    "arakawa-kei",
    "atago-hiroe",
    "atago-kinue",
    "atarashi-ako",
    "choe-myeonghwa",
    "hao-huiyu",
    "haramura-nodoka",
    "ikeda-kana",
    "inoue-jun",
    "iwadate-yuan",
    "jindai-komaki",
    "amae-koromo",
    "kakura-kurumi",
    "karijuku-tomoe",
    "kataoka-yuuki",
    "kosegawa-shiromi",
    "kunihiro-hajime",
    "mase-yuuko",
    "matano-seiko",
    "matsumi-yuu",
    "maya-yukiko",
    "miyanaga-saki",
    "miyanaga-teru",
    "motouchi-naruka",
    "nanpo-kazue",
    "nelly-virsaladze",
    "onjouji-toki",
    "ryuumonbuchi-touka",
    "sagimori-arata",
    "sawamura-tomoki",
    "senoo-kaori",
    "shibuya-takami",
    "shirouzu-mairu",
    "takakamo-shizuno",
    "takei-hisa",
    "takimi-haru",
    "toyouko-momoko"
  ],
  "wall": ["1m", "1m", "1m", "1m",
           "2m", "2m", "2m", "2m",
           "3m", "3m", "3m", "3m",
           "4m", "4m", "4m", "4m",
           "0m", "5m", "5m", "5m",
           "6m", "6m", "6m", "6m",
           "7m", "7m", "7m", "7m",
           "8m", "8m", "8m", "8m",
           "9m", "9m", "9m", "9m",
           "1p", "1p", "1p", "1p",
           "2p", "2p", "2p", "2p",
           "3p", "3p", "3p", "3p",
           "4p", "4p", "4p", "4p",
           "0p", "5p", "5p", "5p",
           "6p", "6p", "6p", "6p",
           "7p", "7p", "7p", "7p",
           "8p", "8p", "8p", "8p",
           "9p", "9p", "9p", "9p",
           "1s", "1s", "1s", "1s",
           "2s", "2s", "2s", "2s",
           "3s", "3s", "3s", "3s",
           "4s", "4s", "4s", "4s",
           "0s", "5s", "5s", "5s",
           "6s", "6s", "6s", "6s",
           "7s", "7s", "7s", "7s",
           "8s", "8s", "8s", "8s",
           "9s", "9s", "9s", "9s",
           "1z", "1z", "1z", "1z",
           "2z", "2z", "2z", "2z",
           "3z", "3z", "3z", "3z",
           "4z", "4z", "4z", "4z",
           "5z", "5z", "5z", "5z",
           "6z", "6z", "6z", "6z",
           "7z", "7z", "7z", "7z"],
  "reserved_tiles": [
    "doraindicator_5", "uraindicator_5",
    "doraindicator_4", "uraindicator_4",
    "doraindicator_3", "uraindicator_3",
    "doraindicator_2", "uraindicator_2",
    "doraindicator_1", "uraindicator_1",
    "kandraw_4_lazy", "kandraw_3_lazy",
    "kandraw_2_lazy", "kandraw_1_lazy"
  ],
  "revealed_tiles": ["doraindicator_1"],
  "dora_indicators": {
    "1m": ["2m"],
    "2m": ["3m"],
    "3m": ["4m"],
    "4m": ["5m"],
    "5m": ["6m"],
    "6m": ["7m"],
    "7m": ["8m"],
    "8m": ["9m"],
    "9m": ["1m"],
    "0m": ["6m"],
    "1p": ["2p"],
    "2p": ["3p"],
    "3p": ["4p"],
    "4p": ["5p"],
    "5p": ["6p"],
    "6p": ["7p"],
    "7p": ["8p"],
    "8p": ["9p"],
    "9p": ["1p"],
    "0p": ["6p"],
    "1s": ["2s"],
    "2s": ["3s"],
    "3s": ["4s"],
    "4s": ["5s"],
    "5s": ["6s"],
    "6s": ["7s"],
    "7s": ["8s"],
    "8s": ["9s"],
    "9s": ["1s"],
    "0s": ["6s"],
    "1z": ["2z"],
    "2z": ["3z"],
    "3z": ["4z"],
    "4z": ["1z"],
    "5z": ["6z"],
    "6z": ["7z"],
    "7z": ["5z"]
  },
  "reverse_dora_indicators": {
    "1m": ["9m"],
    "2m": ["1m"],
    "3m": ["2m"],
    "4m": ["3m"],
    "5m": ["4m"],
    "6m": ["5m"],
    "7m": ["6m"],
    "8m": ["7m"],
    "9m": ["8m"],
    "0m": ["4m"],
    "1p": ["9p"],
    "2p": ["1p"],
    "3p": ["2p"],
    "4p": ["3p"],
    "5p": ["4p"],
    "6p": ["5p"],
    "7p": ["6p"],
    "8p": ["7p"],
    "9p": ["8p"],
    "0p": ["4p"],
    "1s": ["9s"],
    "2s": ["1s"],
    "3s": ["2s"],
    "4s": ["3s"],
    "5s": ["4s"],
    "6s": ["5s"],
    "7s": ["6s"],
    "8s": ["7s"],
    "9s": ["8s"],
    "0s": ["4s"],
    "1z": ["4z"],
    "2z": ["1z"],
    "3z": ["2z"],
    "4z": ["3z"],
    "5z": ["7z"],
    "6z": ["5z"],
    "7z": ["6z"]
  },
  "max_revealed_tiles": 5,
  "set_definitions": {
    "pair": [0, 0],
    "shuntsu": [0, 1, 2],
    "koutsu": [0, 0, 0],
    "quad": [0, 0, 0, 0],
    "ryanmen/penchan": [0, 1],
    "kanchan": [0, 2],
    "iipeikou": [0, 0, 1, 1, 2, 2],
    "ittsu": [[0,1,2],[3,4,5],[6,7,8]],
    "sanshoku_doujun": [[0,1,2],[10,11,12],[20,21,22]],
    "sanshoku_doukou": [[0,0,0],[10,10,10],[20,20,20]],
    "ton": ["1z", "1z", "1z"],
    "nan": ["2z", "2z", "2z"],
    "shaa": ["3z", "3z", "3z"],
    "pei": ["4z", "4z", "4z"],
    "haku": ["5z", "5z", "5z"],
    "hatsu": ["6z", "6z", "6z"],
    "chun": ["7z", "7z", "7z"],
    "ton_pair": ["1z", "1z"],
    "nan_pair": ["2z", "2z"],
    "shaa_pair": ["3z", "3z"],
    "pei_pair": ["4z", "4z"],
    "haku_pair": ["5z", "5z"],
    "hatsu_pair": ["6z", "6z"],
    "chun_pair": ["7z", "7z"],
    "junchan_1": ["1m","1m","1m"],
    "junchan_2": ["1p","1p","1p"],
    "junchan_3": ["1s","1s","1s"],
    "junchan_4": ["1m","2m","3m"],
    "junchan_5": ["1p","2p","3p"],
    "junchan_6": ["1s","2s","3s"],
    "junchan_7": ["7m","8m","9m"],
    "junchan_8": ["7p","8p","9p"],
    "junchan_9": ["7s","8s","9s"],
    "junchan_10": ["9m","9m","9m"],
    "junchan_11": ["9p","9p","9p"],
    "junchan_12": ["9s","9s","9s"],
    "junchan_pair_1": ["1m","1m"],
    "junchan_pair_2": ["1p","1p"],
    "junchan_pair_3": ["1s","1s"],
    "junchan_pair_4": ["9m","9m"],
    "junchan_pair_5": ["9p","9p"],
    "junchan_pair_6": ["9s","9s"],
    "orphans_all": ["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"],
    "orphans_1": ["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z"],
    "orphans_2": ["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","7z"],
    "orphans_3": ["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","6z","7z"],
    "orphans_4": ["1m","9m","1p","9p","1s","9s","1z","2z","3z","5z","6z","7z"],
    "orphans_5": ["1m","9m","1p","9p","1s","9s","1z","2z","4z","5z","6z","7z"],
    "orphans_6": ["1m","9m","1p","9p","1s","9s","1z","3z","4z","5z","6z","7z"],
    "orphans_7": ["1m","9m","1p","9p","1s","9s","2z","3z","4z","5z","6z","7z"],
    "orphans_8": ["1m","9m","1p","9p","1s","1z","2z","3z","4z","5z","6z","7z"],
    "orphans_9": ["1m","9m","1p","9p","9s","1z","2z","3z","4z","5z","6z","7z"],
    "orphans_10": ["1m","9m","1p","1s","9s","1z","2z","3z","4z","5z","6z","7z"],
    "orphans_11": ["1m","9m","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"],
    "orphans_12": ["1m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"],
    "orphans_13": ["9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"],
    "chuurenpoutou": [0,0,0,1,2,3,4,5,6,7,8,8,8]
  },
  "tenpai_definition": [
    [ "exhaustive", [["pair"], 1], [["ryanmen/penchan", "kanchan", "pair"], 1], [["shuntsu", "koutsu"], 3] ],
    [ "exhaustive", [["shuntsu", "koutsu"], 4] ],
    [ [["koutsu"], -1], [["pair"], 6] ]
  ],
  "iishanten_definition": [
    [ "exhaustive", [["pair"], 1], [["ryanmen/penchan", "kanchan", "pair"], 2], [["shuntsu", "koutsu"], 2] ],
    [ "exhaustive", [["ryanmen/penchan", "kanchan", "pair"], 1], [["shuntsu", "koutsu"], 3] ],
    [ [["quad"], -1], [["koutsu"], -2], [["pair"], 5] ],
    [ "unique",
      [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"], 11],
      [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"], 1]
    ]
  ],
  "ryanshanten_definition": [
    [ "exhaustive", [["pair"], 1], [["ryanmen/penchan", "kanchan", "pair"], 3], [["shuntsu", "koutsu"], 1] ],
    [ "exhaustive", [["ryanmen/penchan", "kanchan", "pair"], 3], [["shuntsu", "koutsu"], 2] ],
    [ "exhaustive", [["pair"], 1], [["ryanmen/penchan", "kanchan", "pair"], 1], [["shuntsu", "koutsu"], 2] ],
    [ "exhaustive", [["shuntsu", "koutsu"], 3] ],
    [ [["pair"], 4] ],
    [ "unique",
      [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"], 10],
      [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"], 1]
    ]
  ],
  "sanshanten_definition": [
    [ "exhaustive", [["pair"], 1], [["ryanmen/penchan", "kanchan", "pair"], 4] ],
    [ "exhaustive", [["pair"], 1], [["ryanmen/penchan", "kanchan", "pair"], 2], [["shuntsu", "koutsu"], 1] ],
    [ "exhaustive", [["ryanmen/penchan", "kanchan", "pair"], 4], [["shuntsu", "koutsu"], 1] ],
    [ "exhaustive", [["ryanmen/penchan", "kanchan", "pair"], 1], [["shuntsu", "koutsu"], 2] ],
    [ "exhaustive", [["shuntsu", "koutsu"], 3] ],
    [ [["pair"], 3] ],
    [ "unique",
      [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"], 10],
      [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"], 1]
    ]
  ],
  "tenpai_14_definition": [
    [ "exhaustive", [["pair"], 1], [["ryanmen/penchan", "kanchan", "pair"], 1], [["shuntsu", "koutsu"], 3] ],
    [ "exhaustive", [["shuntsu", "koutsu"], 4] ],
    [ [["quad"], -1], [["koutsu"], -2], [["pair"], 6] ]
  ],
  "pair_wait_definition": [
    [ "exhaustive", [["shuntsu", "koutsu"], 4] ],
    [ [["koutsu"], -1], [["pair"], 6] ]
  ],
  "kokushi_tenpai_definition": [
    [ "unique",
      [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"], 12],
      [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"], 1]
    ]
  ],
  "kyuushu_kyuuhai_definition": [
    [ "unique", [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"], 9] ]
  ],
  "win_definition": [
    [ "exhaustive", [["pair"], 1], [["shuntsu", "koutsu"], 4] ],
    [ [["koutsu"], -1], [["pair"], 7] ],
    [ "unique",
      [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"], 13],
      [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"], 1]
    ]
  ],
  "standard_win_definition": [
    [ "exhaustive", [["pair"], 1], [["shuntsu", "koutsu"], 4] ]
  ],
  "shousuushii_definition": [
    [[["ton"], 1], [["nan"], 1], [["shaa"], 1], [["pei_pair"], 1]],
    [[["ton"], 1], [["nan"], 1], [["shaa_pair"], 1], [["pei"], 1]],
    [[["ton"], 1], [["nan_pair"], 1], [["shaa"], 1], [["pei"], 1]],
    [[["ton_pair"], 1], [["nan"], 1], [["shaa"], 1], [["pei"], 1]]
  ],
  "daisuushii_definition": [
    [[["ton"], 1], [["nan"], 1], [["shaa"], 1], [["pei"], 1]]
  ],
  "kakura_kurumi_tenpai_definition": [
    [ [["quad"], -1], [["koutsu"], -2], [["pair"], -6], [["pair"], 5] ]
  ],
  "kakura_kurumi_win_definition": [
    [ [["koutsu"], -1], [["pair"], 6] ]
  ],
  "雜龍_definition": [
    [ "exhaustive", [[[[0,1,2],[13,14,15],[26,27,28]]], 1], [["shuntsu", "koutsu"], 1], [["pair"], 1] ],
    [ "exhaustive", [[[[0,1,2],[23,24,25],[16,17,18]]], 1], [["shuntsu", "koutsu"], 1], [["pair"], 1] ]
  ],
  "三色三步高_definition": [
    [ "exhaustive", [[[[0,1,2],[11,12,13],[22,23,24]]], 1], [["shuntsu", "koutsu"], 1], [["pair"], 1] ],
    [ "exhaustive", [[[[0,1,2],[21,22,23],[12,13,14]]], 1], [["shuntsu", "koutsu"], 1], [["pair"], 1] ]
  ],
  "一色三步高_definition": [
    [ "exhaustive", [[[[0,1,2],[1,2,3],[2,3,4]]], 1], [["shuntsu", "koutsu"], 1], [["pair"], 1] ]
  ],
  "golden_chun_77z_win_definition": [
    [ "exhaustive", [["chun_pair"], 1], [["shuntsu", "koutsu"], 4] ],
    [ [["chun_pair"], 1], [["pair"], 6] ]
  ],
  "golden_chun_777z_win_definition": [
    [ "exhaustive", [["chun"], 1], [["pair"], 1], [["shuntsu", "koutsu"], 3] ]
  ],
  "yaku": [
    {
      "display_name": "Riichi",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["riichi"]},
        {"name": "status_missing", "opts": ["double_riichi"]}
      ]
    },
    {
      "display_name": "Tsumo",
      "value": 1,
      "when": ["won_by_draw", {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}]
    },
    {
      "display_name": "Ippatsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["ippatsu"]}, {"name": "status_missing", "opts": ["call_made"]}]
    },
    {
      "display_name": "Chankan",
      "value": 1,
      "when": ["won_by_call"]
    },
    {
      "display_name": "Rinshan",
      "value": 1,
      "when": [{"name": "status", "opts": ["kan"]}]
    },
    {
      "display_name": "Haitei",
      "value": 1,
      "when": ["no_tiles_remaining", "won_by_draw"]
    },
    {
      "display_name": "Houtei",
      "value": 1,
      "when": ["no_tiles_remaining", "not_won_by_draw"]
    },
    {
      "display_name": "Pinfu",
      "value": 1,
      "when": [
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["standard_win"]]},
        [["won_by_draw", {"name": "fu_equals", "opts": [20]}], ["not_won_by_draw", {"name": "fu_equals", "opts": [30]}]]
      ]
    },
    {
      "display_name": "Tanyao",
      "value": 1,
      "when": [{"name": "winning_hand_and_tile_consists_of", "opts": ["2m","3m","4m","5m","6m","7m","8m","2p","3p","4p","5p","6p","7p","8p","2s","3s","4s","5s","6s","7s","8s"]}]
    },
    {
      "display_name": "Iipeikou",
      "value": 1,
      "when": [
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [["exhaustive", [["iipeikou"], 1], [["shuntsu", "koutsu"], 2], [["pair"], 1]]]]}
      ]
    },
    {
      "display_name": "Seat Wind",
      "value": 1,
      "when": [{"name": "seat_is", "opts": ["east"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["ton"], 1]]]]}]
    },
    {
      "display_name": "Seat Wind",
      "value": 1,
      "when": [{"name": "seat_is", "opts": ["south"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["nan"], 1]]]]}]
    },
    {
      "display_name": "Seat Wind",
      "value": 1,
      "when": [{"name": "seat_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["shaa"], 1]]]]}]
    },
    {
      "display_name": "Seat Wind",
      "value": 1,
      "when": [{"name": "seat_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["shaa"], 2]]]]}]
    },
    {
      "display_name": "Seat Wind",
      "value": 1,
      "when": [{"name": "seat_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["shaa"], 3]]]]}]
    },
    {
      "display_name": "Seat Wind",
      "value": 1,
      "when": [{"name": "seat_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["shaa"], 4]]]]}]
    },
    {
      "display_name": "Seat Wind",
      "value": 1,
      "when": [{"name": "seat_is", "opts": ["north"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["pei"], 1]]]]}]
    },
    {
      "display_name": "Round Wind",
      "value": 1,
      "when": [{"name": "round_wind_is", "opts": ["east"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["ton"], 1]]]]}]
    },
    {
      "display_name": "Round Wind",
      "value": 1,
      "when": [{"name": "round_wind_is", "opts": ["south"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["nan"], 1]]]]}]
    },
    {
      "display_name": "Round Wind",
      "value": 1,
      "when": [{"name": "round_wind_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["shaa"], 1]]]]}]
    },
    {
      "display_name": "Round Wind",
      "value": 1,
      "when": [{"name": "round_wind_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["shaa"], 2]]]]}]
    },
    {
      "display_name": "Round Wind",
      "value": 1,
      "when": [{"name": "round_wind_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["shaa"], 3]]]]}]
    },
    {
      "display_name": "Round Wind",
      "value": 1,
      "when": [{"name": "round_wind_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["shaa"], 4]]]]}]
    },
    {
      "display_name": "Round Wind",
      "value": 1,
      "when": [{"name": "round_wind_is", "opts": ["north"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["pei"], 1]]]]}]
    },
    {
      "display_name": "Haku",
      "value": 1,
      "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["haku"], 1]]]]}]
    },
    {
      "display_name": "Hatsu",
      "value": 1,
      "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["hatsu"], 1]]]]}]
    },
    {
      "display_name": "Chun",
      "value": 1,
      "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["chun"], 1]]]]}]
    },
    {
      "display_name": "Double Riichi",
      "value": 2,
      "when": [{"name": "status", "opts": ["double_riichi"]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 2,
      "when": [{"name": "match", "opts": [["hand", "winning_tile"], [[[["quad"], -1], [["pair"], 7]]]]}]
    },
    {
      "display_name": "Chanta",
      "value": 1,
      "when": [
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[
          [["junchan_1", "junchan_2", "junchan_3", "junchan_4", "junchan_5", "junchan_6", "junchan_7", "junchan_8", "junchan_9", "junchan_10", "junchan_11", "junchan_12", "ton", "nan", "shaa", "pei", "haku", "hatsu", "chun"], 4],
          [["junchan_pair_1", "junchan_pair_2", "junchan_pair_3", "junchan_pair_4", "junchan_pair_5", "junchan_pair_6", "ton_pair", "nan_pair", "shaa_pair", "pei_pair", "haku_pair", "hatsu_pair", "chun_pair"], 1]
        ]]]}
      ]
    },
    {
      "display_name": "Chanta",
      "value": 1,
      "when": [
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[
          [["junchan_1", "junchan_2", "junchan_3", "junchan_4", "junchan_5", "junchan_6", "junchan_7", "junchan_8", "junchan_9", "junchan_10", "junchan_11", "junchan_12", "ton", "nan", "shaa", "pei", "haku", "hatsu", "chun"], 4],
          [["junchan_pair_1", "junchan_pair_2", "junchan_pair_3", "junchan_pair_4", "junchan_pair_5", "junchan_pair_6", "ton_pair", "nan_pair", "shaa_pair", "pei_pair", "haku_pair", "hatsu_pair", "chun_pair"], 1]
        ]]]}
      ]
    },
    {
      "display_name": "Ittsu",
      "value": 1,
      "when": [
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[
          "exhaustive",
          [["ittsu"], 1],
          [["shuntsu", "koutsu"], 1],
          [["pair"], 1]
        ]]]}
      ]
    },
    {
      "display_name": "Ittsu",
      "value": 1,
      "when": [
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[
          "exhaustive",
          [["ittsu"], 1],
          [["shuntsu", "koutsu"], 1],
          [["pair"], 1]
        ]]]}
      ]
    },
    {
      "display_name": "Sanshoku",
      "value": 1,
      "when": [
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[
          "exhaustive",
          [["sanshoku_doujun"], 1],
          [["shuntsu", "koutsu"], 1],
          [["pair"], 1]
        ]]]}
      ]
    },
    {
      "display_name": "Sanshoku",
      "value": 1,
      "when": [
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[
          "exhaustive",
          [["sanshoku_doujun"], 1],
          [["shuntsu", "koutsu"], 1],
          [["pair"], 1]
        ]]]}
      ]
    },
    {
      "display_name": "Sanshoku Doukou",
      "value": 2,
      "when": [
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[
          "exhaustive",
          [["sanshoku_doukou"], 1],
          [["shuntsu", "koutsu"], 1],
          [["pair"], 1]
        ]]]}
      ]
    },
    {
      "display_name": "Sankantsu",
      "value": 2,
      "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["daiminkan", "ankan", "kakan"], 3]]]]}]
    },
    {
      "display_name": "Toitoi",
      "value": 2,
      "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["koutsu"], 4], [["pair"], 1]]]]}]
    },
    {
      "display_name": "Sanankou",
      "value": 2,
      "when": [[
        // 0-1 open triplets, hand must be 4 triplets and a pair
        {"name": "match", "opts": [["hand", "calls"], [[[["pon", "daiminkan", "kakan"], -2], [["koutsu"], 4], [["pair"], 1]]]]},
        // 0 open triplets, hand must be 3 triplets and a pair
        {"name": "match", "opts": [["hand", "calls"], [[[["pon", "daiminkan", "kakan"], -1], [["koutsu"], 3], [["shuntsu"], 1], [["pair"], 1]]]]},
        [
          "won_by_draw",
          [
            // 0-1 open triplet tsumo, hand must be 3 triplets and 2 pairs
            {"name": "match", "opts": [["hand", "calls"], [[[["pon", "daiminkan", "kakan"], -2], [["koutsu"], 3], [["pair"], 2]]]]},
            // 0 open triplet tsumo, hand must be 2 triplets and 2 pairs
            {"name": "match", "opts": [["hand", "calls"], [[[["pon", "daiminkan", "kakan"], -1], [["koutsu"], 2], [["shuntsu"], 1], [["pair"], 2]]]]}
          ]
        ]
      ]]
    },
    {
      "display_name": "Shousangen",
      "value": 2,
      "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["haku", "hatsu", "chun"], 2], [["haku_pair", "hatsu_pair", "chun_pair"], 1]]]]}]
    },
    {
      "display_name": "Honroutou",
      "value": 2,
      "when": [{"name": "winning_hand_consists_of", "opts": ["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"]}]
    },
    {
      "display_name": "Ryanpeikou",
      "value": 3,
      "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [["exhaustive", [["iipeikou"], 2], [["pair"], 1]]]]}]
    },
    {
      "display_name": "Junchan",
      "value": 2,
      "when": [
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[
          [["junchan_1", "junchan_2", "junchan_3", "junchan_4", "junchan_5", "junchan_6", "junchan_7", "junchan_8", "junchan_9", "junchan_10", "junchan_11", "junchan_12"], 4],
          [["junchan_pair_1", "junchan_pair_2", "junchan_pair_3", "junchan_pair_4", "junchan_pair_5", "junchan_pair_6"], 1]
        ]]]}
      ]
    },
    {
      "display_name": "Junchan",
      "value": 1,
      "when": [
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[
          [["junchan_1", "junchan_2", "junchan_3", "junchan_4", "junchan_5", "junchan_6", "junchan_7", "junchan_8", "junchan_9", "junchan_10", "junchan_11", "junchan_12"], 4],
          [["junchan_pair_1", "junchan_pair_2", "junchan_pair_3", "junchan_pair_4", "junchan_pair_5", "junchan_pair_6"], 1]
        ]]]}
      ]
    },
    {
      "display_name": "Honitsu",
      "value": 2,
      "when": [
        [
          {"name": "winning_hand_consists_of", "opts": ["1m","2m","3m","4m","5m","6m","7m","8m","9m","1z","2z","3z","4z","5z","6z","7z"]},
          {"name": "winning_hand_consists_of", "opts": ["1p","2p","3p","4p","5p","6p","7p","8p","9p","1z","2z","3z","4z","5z","6z","7z"]},
          {"name": "winning_hand_consists_of", "opts": ["1s","2s","3s","4s","5s","6s","7s","8s","9s","1z","2z","3z","4z","5z","6z","7z"]}
        ]
      ]
    },
    {
      "display_name": "Honitsu",
      "value": 1,
      "when": [
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        [
          {"name": "winning_hand_consists_of", "opts": ["1m","2m","3m","4m","5m","6m","7m","8m","9m","1z","2z","3z","4z","5z","6z","7z"]},
          {"name": "winning_hand_consists_of", "opts": ["1p","2p","3p","4p","5p","6p","7p","8p","9p","1z","2z","3z","4z","5z","6z","7z"]},
          {"name": "winning_hand_consists_of", "opts": ["1s","2s","3s","4s","5s","6s","7s","8s","9s","1z","2z","3z","4z","5z","6z","7z"]}
        ]
      ]
    },
    {
      "display_name": "Chinitsu",
      "value": 5,
      "when": [
        [
          {"name": "winning_hand_consists_of", "opts": ["1m","2m","3m","4m","5m","6m","7m","8m","9m"]},
          {"name": "winning_hand_consists_of", "opts": ["1p","2p","3p","4p","5p","6p","7p","8p","9p"]},
          {"name": "winning_hand_consists_of", "opts": ["1s","2s","3s","4s","5s","6s","7s","8s","9s"]}
        ]
      ]
    },
    {
      "display_name": "Chinitsu",
      "value": 1,
      "when": [
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        [
          {"name": "winning_hand_consists_of", "opts": ["1m","2m","3m","4m","5m","6m","7m","8m","9m"]},
          {"name": "winning_hand_consists_of", "opts": ["1p","2p","3p","4p","5p","6p","7p","8p","9p"]},
          {"name": "winning_hand_consists_of", "opts": ["1s","2s","3s","4s","5s","6s","7s","8s","9s"]}
        ]
      ]
    },
    {
      "display_name": "Inazuma Riichi",
      "value": 5,
      "when": [{"name": "status", "opts": ["inazuma_riichi"]}]
    },
    {
      "display_name": "Mase Yuuko",
      "value": 1,
      "when": [{"name": "status", "opts": ["mase-yuuko"]}, {"name": "match", "opts": [["pond"], [[[["koutsu"], 1]]]]}]
    },
    {
      "display_name": "Mase Yuuko",
      "value": 1,
      "when": [{"name": "status", "opts": ["mase-yuuko"]}, {"name": "match", "opts": [["pond"], [[[["koutsu"], 2]]]]}]
    },
    {
      "display_name": "Mase Yuuko",
      "value": 1,
      "when": [{"name": "status", "opts": ["mase-yuuko"]}, {"name": "match", "opts": [["pond"], [[[["koutsu"], 3]]]]}]
    },
    {
      "display_name": "Mase Yuuko",
      "value": 1,
      "when": [{"name": "status", "opts": ["mase-yuuko"]}, {"name": "match", "opts": [["pond"], [[[["koutsu"], 4]]]]}]
    },
    {
      "display_name": "Mase Yuuko",
      "value": 1,
      "when": [{"name": "status", "opts": ["mase-yuuko"]}, {"name": "match", "opts": [["pond"], [[[["koutsu"], 5]]]]}]
    },
    {
      "display_name": "Mase Yuuko",
      "value": 1,
      "when": [{"name": "status", "opts": ["mase-yuuko"]}, {"name": "match", "opts": [["pond"], [[[["koutsu"], 6]]]]}]
    },
    {
      "display_name": "Mase Yuuko",
      "value": 1,
      "when": [{"name": "status", "opts": ["mase-yuuko"]}, {"name": "match", "opts": [["pond"], [[[["koutsu"], 7]]]]}]
    },
    {
      "display_name": "Mase Yuuko",
      "value": 1,
      "when": [{"name": "status", "opts": ["mase-yuuko"]}, {"name": "match", "opts": [["pond"], [[[["koutsu"], 8]]]]}]
    },
    {
      "display_name": "Matano Seiko",
      "value": 1,
      "when": [{"name": "status", "opts": ["matano-seiko"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["koutsu", "pon", "daiminkan", "ankan", "kakan"], 2]]]]}]
    },
    {
      "display_name": "Matano Seiko",
      "value": 1,
      "when": [{"name": "status", "opts": ["matano-seiko"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["koutsu", "pon", "daiminkan", "ankan", "kakan"], 3]]]]}]
    },
    {
      "display_name": "Matano Seiko",
      "value": 1,
      "when": [{"name": "status", "opts": ["matano-seiko"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["koutsu", "pon", "daiminkan", "ankan", "kakan"], 4]]]]}]
    },
    {
      "display_name": "Warm Tiles",
      "value": 1,
      "when": [{"name": "status", "opts": ["matsumi-yuu"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[[["1m"],["2m"],["3m"],["4m"],["5m"],["6m"],["7m"],["8m"],["9m"],["1p"],["3p"],["5p"],["6p"],["7p"],["9p"],["1s"],["5s"],["7s"],["9s"],["7z"]], 9]]]]}]
    },
    {
      "display_name": "Warm Tiles",
      "value": 1,
      "when": [{"name": "status", "opts": ["matsumi-yuu"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[[["1m"],["2m"],["3m"],["4m"],["5m"],["6m"],["7m"],["8m"],["9m"],["1p"],["3p"],["5p"],["6p"],["7p"],["9p"],["1s"],["5s"],["7s"],["9s"],["7z"]], 11]]]]}]
    },
    {
      "display_name": "Warm Tiles",
      "value": 1,
      "when": [{"name": "status", "opts": ["matsumi-yuu"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[[["1m"],["2m"],["3m"],["4m"],["5m"],["6m"],["7m"],["8m"],["9m"],["1p"],["3p"],["5p"],["6p"],["7p"],["9p"],["1s"],["5s"],["7s"],["9s"],["7z"]], 13]]]]}]
    },
    {
      "display_name": "Warm Tiles",
      "value": 1,
      "when": [{"name": "status", "opts": ["matsumi-yuu"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[[["1m"],["2m"],["3m"],["4m"],["5m"],["6m"],["7m"],["8m"],["9m"],["1p"],["3p"],["5p"],["6p"],["7p"],["9p"],["1s"],["5s"],["7s"],["9s"],["7z"]], 14]]]]}]
    },
    {
      "display_name": "Sagimori Arata",
      "value": 1,
      "when": [{"name": "status", "opts": ["sagimori-arata"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[[["1p"],["2p"],["3p"],["4p"],["5p"],["8p"],["9p"],["2s"],["4s"],["5s"],["6s"],["8s"],["9s"],["5z"]], 8]]]]}]
    },
    {
      "display_name": "Sagimori Arata",
      "value": 1,
      "when": [{"name": "status", "opts": ["sagimori-arata"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[[["1p"],["2p"],["3p"],["4p"],["5p"],["8p"],["9p"],["2s"],["4s"],["5s"],["6s"],["8s"],["9s"],["5z"]], 10]]]]}]
    },
    {
      "display_name": "Sagimori Arata",
      "value": 1,
      "when": [{"name": "status", "opts": ["sagimori-arata"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[[["1p"],["2p"],["3p"],["4p"],["5p"],["8p"],["9p"],["2s"],["4s"],["5s"],["6s"],["8s"],["9s"],["5z"]], 13]]]]}]
    },
    {
      "display_name": "Sagimori Arata",
      "value": 1,
      "when": [{"name": "status", "opts": ["sagimori-arata"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[[["1p"],["2p"],["3p"],["4p"],["5p"],["8p"],["9p"],["2s"],["4s"],["5s"],["6s"],["8s"],["9s"],["5z"]], 14]]]]}]
    },
    {
      "display_name": "Three-Sided Wait",
      "value": 1,
      "when": [{"name": "status", "opts": ["sagimori-arata"]}, {"name": "wait_count_at_least", "opts": [3, ["win"]]}]
    },
    {
      "display_name": "Single Wait",
      "value": 2,
      "when": [{"name": "status", "opts": ["takei-hisa"]}, {"name": "wait_count_at_most", "opts": [1, ["win"]]}]
    },
    {
      "display_name": "Takimi Haru",
      "value": 1,
      "when": [{"name": "status", "opts": ["takimi-haru"]}, {"name": "winning_hand_and_tile_consists_of", "opts": ["3m","4m","5m","6m","7m","3p","4p","5p","6p","7p","3s","4s","5s","6s","7s"]}]
    },
    {
      "display_name": "Chasing Riichi",
      "value": 2,
      "when": [{"name": "status", "opts": ["anetai-toyone"]}, {"name": "status", "opts": ["chasing"]}]
    },
    {
      "display_name": "Chasing Riichi",
      "value": 1,
      "when": [{"name": "status", "opts": ["anetai-toyone"]}, {"name": "status", "opts": ["chasing"]}, {"name": "discarder_status", "opts": ["riichi"]}]
    },
    {
      "display_name": "Shiiaru Raotai",
      "value": 2,
      "when": [{"name": "status", "opts": ["anetai-toyone"]}, {"name": "match", "opts": [["calls"], [[[["chii", "pon", "daiminkan", "kakan", "ankan"], 4]]]]}]
    },
    {
      "display_name": "Furiten Tsumo",
      "value": 1,
      "when": [{"name": "status", "opts": ["atago-hiroe", "riichi", "furiten"]}, "won_by_draw"]
    },
    {
      "display_name": "All Fives",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["exhaustive", [[["5m","5m"],["5p","5p"],["5s","5s"]], 1], [[["5m","5m","5m"],["5p","5p","5p"],["5s","5s","5s"],["3m","4m","5m"],["3p","4p","5p"],["3s","4s","5s"],["4m","5m","6m"],["4p","5p","6p"],["4s","5s","6s"],["5m","6m","7m"],["5p","6p","7p"],["5s","6s","7s"]], 4]]]}
      ]
    },
    {
      "display_name": "All Fives",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["exhaustive", [[["5m","5m"],["5p","5p"],["5s","5s"]], 1], [[["5m","5m","5m"],["5p","5p","5p"],["5s","5s","5s"],["3m","4m","5m"],["3p","4p","5p"],["3s","4s","5s"],["4m","5m","6m"],["4p","5p","6p"],["4s","5s","6s"],["5m","6m","7m"],["5p","6p","7p"],["5s","6s","7s"]], 4]]]}
      ]
    },
    {
      "display_name": "Upper Four",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "winning_hand_consists_of", "opts": ["6m","7m","8m","9m","6p","7p","8p","9p","6s","7s","8s","9s"]}
      ]
    },
    {
      "display_name": "Upper Four",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "winning_hand_consists_of", "opts": ["6m","7m","8m","9m","6p","7p","8p","9p","6s","7s","8s","9s"]}
      ]
    },
    {
      "display_name": "Lower Four",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "winning_hand_consists_of", "opts": ["1m","2m","3m","4m","1p","2p","3p","4p","1s","2s","3s","4s"]}
      ]
    },
    {
      "display_name": "Lower Four",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "winning_hand_consists_of", "opts": ["1m","2m","3m","4m","1p","2p","3p","4p","1s","2s","3s","4s"]}
      ]
    },
    {
      "display_name": "Mixed Straight",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["雜龍"]]}
      ]
    },
    {
      "display_name": "Mixed Straight",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["雜龍"]]}
      ]
    },
    {
      "display_name": "Mixed Shifted Chows",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["三色三步高"]]}
      ]
    },
    {
      "display_name": "Mixed Shifted Chows",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["三色三步高"]]}
      ]
    },
    {
      "display_name": "Pure Shifted Chows",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["一色三步高"]]}
      ]
    },
    {
      "display_name": "Pure Shifted Chows",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["hao-huiyu"]},
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["一色三步高"]]}
      ]
    },
    {
      "display_name": "Chun as Five",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["golden_chun"]},
        [
          {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["7z"], -1]]]]},
          [
            {"name": "status", "opts": ["77z"]},
            {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["golden_chun_77z_win"]]}
          ],
          [
            {"name": "status", "opts": ["777z"]},
            {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["golden_chun_777z_win"]]}
          ]
        ]
      ]
    },
    {
      "display_name": "Haku Tsumo",
      "value": 2,
      "when": [
        {"name": "status", "opts": ["karijuku-tomoe"]},
        "won_by_draw",
        {"name": "match", "opts": [["winning_tile"], [[[["5z"], 1]]]]}
      ]
    },
    {
      "display_name": "Nelly Virsaladze",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["nelly-virsaladze"]},
        {"name": "not_counter_equals", "opts": ["riichi_turn", 0]},
        {"name": "counter_at_most", "opts": ["riichi_turn", 6]}
      ]
    },
    {
      "display_name": "Nelly Virsaladze",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["nelly-virsaladze"]},
        {"name": "not_counter_equals", "opts": ["riichi_turn", 0]},
        {"name": "counter_at_most", "opts": ["riichi_turn", 8]}
      ]
    },
    {
      "display_name": "Nelly Virsaladze",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["nelly-virsaladze"]},
        {"name": "not_counter_equals", "opts": ["riichi_turn", 0]},
        {"name": "counter_at_most", "opts": ["riichi_turn", 10]}
      ]
    },
    {
      "display_name": "Facedown tiles",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["tsuruta-himeko"]},
        {"name": "counter_at_least", "opts": ["facedown_tiles", 2]}
      ]
    },
    {
      "display_name": "Facedown tiles",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["tsuruta-himeko"]},
        {"name": "counter_at_least", "opts": ["facedown_tiles", 4]}
      ]
    },
    {
      "display_name": "Facedown tiles",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["tsuruta-himeko"]},
        {"name": "counter_at_least", "opts": ["facedown_tiles", 6]}
      ]
    },
    {
      "display_name": "Facedown tiles",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["tsuruta-himeko"]},
        {"name": "counter_at_least", "opts": ["facedown_tiles", 7]}
      ]
    },
    {
      "display_name": "Facedown tiles",
      "value": 1,
      "when": [
        {"name": "status", "opts": ["tsuruta-himeko"]},
        {"name": "counter_at_least", "opts": ["facedown_tiles", 8]}
      ]
    }
  ],
  "yakuman": [
    {
      "display_name": "Renhou",
      "value": 1,
      "when": [{"name": "status", "opts": ["discards_empty"]}, {"name": "status_missing", "opts": ["call_made"]}, "won_by_discard"]
    },
    {
      "display_name": "Tenhou",
      "value": 1,
      "when": [{"name": "status", "opts": ["discards_empty"]}, {"name": "status_missing", "opts": ["call_made"]}, "won_by_draw", {"name": "seat_is", "opts": ["east"]}]
    },
    {
      "display_name": "Chiihou",
      "value": 1,
      "when": [{"name": "status", "opts": ["discards_empty"]}, {"name": "status_missing", "opts": ["call_made"]}, "won_by_draw", {"name": "not_seat_is", "opts": ["east"]}]
    },
    {
      "display_name": "Daisangen",
      "value": 1,
      "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["haku"], 1], [["hatsu"], 1], [["chun"], 1]]]]}]
    },
    {
      "display_name": "Suuankou",
      "value": 1,
      "when": [
        "won_by_draw",
        {"name": "has_no_call_named", "opts": ["pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls"], [[[["koutsu"], 3], [["pair"], 2]]]]}
      ]
    },
    {
      "display_name": "Suuankou Tanki",
      "value": 2,
      "when": [
        {"name": "has_no_call_named", "opts": ["pon", "daiminkan", "kakan"]},
        [ // tenhou upgrade
          "no_discards_yet",
          {"name": "match", "opts": [["hand", "calls"], [[[["koutsu"], 4]]]]}
        ],
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["koutsu"], 4], [["pair"], 1]]]]}
      ]
    },
    {
      "display_name": "Tsuuiisou",
      "value": 1,
      "when": [{"name": "winning_hand_consists_of", "opts": ["1z","2z","3z","4z","5z","6z","7z"]}]
    },
    {
      "display_name": "Ryuuiisou",
      "value": 1,
      "when": [{"name": "winning_hand_consists_of", "opts": ["2s","3s","4s","6s","8s","6z"]}]
    },
    {
      "display_name": "Chinroutou",
      "value": 1,
      "when": [{"name": "winning_hand_consists_of", "opts": ["1m","9m","1p","9p","1s","9s"]}]
    },
    {
      "display_name": "Chuurenpoutou",
      "value": 1,
      "when": [{"name": "match", "opts": [["hand", "winning_tile"], [[[["chuurenpoutou"], 1]]]]}]
    },
    {
      "display_name": "Junsei Chuurenpoutou",
      "value": 2,
      "when": [[
        {"name": "match", "opts": [["hand"], [[[["chuurenpoutou"], 1]]]]},
        [ // tenhou upgrade
          "no_discards_yet",
          {"name": "match", "opts": [["hand", "winning_tile"], [[[["chuurenpoutou"], 1]]]]}
        ]
      ]]
    },
    {
      "display_name": "Kokushi Musou",
      "value": 1,
      "when": [{"name": "match", "opts": [["hand", "winning_tile"], [[[["orphans_all"], 1]]]]}]
    },
    {
      "display_name": "Kokushi Musou Juusan Menmachi",
      "value": 2,
      "when": [[
        {"name": "match", "opts": [["hand"], [[[["orphans_all"], 1]]]]},
        [ // tenhou upgrade
          "no_discards_yet",
          {"name": "match", "opts": [["hand", "winning_tile"], [[[["orphans_all"], 1]]]]}
        ]
      ]]
    },
    {
      "display_name": "Daisuushii",
      "value": 2,
      "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], ["daisuushii"]]}]
    },
    {
      "display_name": "Shousuushii",
      "value": 1,
      "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], ["shousuushii"]]}]
    },
    {
      "display_name": "Suukantsu",
      "value": 1,
      "when": [{"name": "match", "opts": [["calls"], [[[["daiminkan", "ankan", "kakan"], 4]]]]}]
    }
  ],
  "yaku_precedence": {
    "Chinitsu": ["Honitsu"],
    "Chiitoitsu": ["Iipeikou"],
    "Ryanpeikou": ["Iipeikou", "Chiitoitsu"],
    "Junchan": ["Chanta"],
    "Honroutou": ["Chanta", "Junchan"],
    "Suuankou Tanki": ["Suuankou"],
    "Junsei Chuurenpoutou": ["Chuurenpoutou"],
    "Kokushi Musou Juusan Menmachi": ["Kokushi Musou"],
    "Daisuushii": ["Shousuushii"]
  },
  "extra_yaku": [
    {"display_name": "Dora", "value": 1, "when": [{"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "winning_dora_count", "opts": ["doraindicator_1", 1]}]},
    {"display_name": "Dora", "value": 2, "when": [{"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "winning_dora_count", "opts": ["doraindicator_1", 2]}]},
    {"display_name": "Dora", "value": 3, "when": [{"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "winning_dora_count", "opts": ["doraindicator_1", 3]}]},
    {"display_name": "Dora", "value": 4, "when": [{"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "winning_dora_count", "opts": ["doraindicator_1", 4]}]},
    {"display_name": "Dora", "value": 1, "when": [{"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "winning_dora_count", "opts": ["doraindicator_2", 1]}]},
    {"display_name": "Dora", "value": 2, "when": [{"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "winning_dora_count", "opts": ["doraindicator_2", 2]}]},
    {"display_name": "Dora", "value": 3, "when": [{"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "winning_dora_count", "opts": ["doraindicator_2", 3]}]},
    {"display_name": "Dora", "value": 4, "when": [{"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "winning_dora_count", "opts": ["doraindicator_2", 4]}]},
    {"display_name": "Dora", "value": 1, "when": [{"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "winning_dora_count", "opts": ["doraindicator_3", 1]}]},
    {"display_name": "Dora", "value": 2, "when": [{"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "winning_dora_count", "opts": ["doraindicator_3", 2]}]},
    {"display_name": "Dora", "value": 3, "when": [{"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "winning_dora_count", "opts": ["doraindicator_3", 3]}]},
    {"display_name": "Dora", "value": 4, "when": [{"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "winning_dora_count", "opts": ["doraindicator_3", 4]}]},
    {"display_name": "Dora", "value": 1, "when": [{"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "winning_dora_count", "opts": ["doraindicator_4", 1]}]},
    {"display_name": "Dora", "value": 2, "when": [{"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "winning_dora_count", "opts": ["doraindicator_4", 2]}]},
    {"display_name": "Dora", "value": 3, "when": [{"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "winning_dora_count", "opts": ["doraindicator_4", 3]}]},
    {"display_name": "Dora", "value": 4, "when": [{"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "winning_dora_count", "opts": ["doraindicator_4", 4]}]},
    {"display_name": "Dora", "value": 1, "when": [{"name": "tile_revealed", "opts": ["doraindicator_5"]}, {"name": "winning_dora_count", "opts": ["doraindicator_5", 1]}]},
    {"display_name": "Dora", "value": 2, "when": [{"name": "tile_revealed", "opts": ["doraindicator_5"]}, {"name": "winning_dora_count", "opts": ["doraindicator_5", 2]}]},
    {"display_name": "Dora", "value": 3, "when": [{"name": "tile_revealed", "opts": ["doraindicator_5"]}, {"name": "winning_dora_count", "opts": ["doraindicator_5", 3]}]},
    {"display_name": "Dora", "value": 4, "when": [{"name": "tile_revealed", "opts": ["doraindicator_5"]}, {"name": "winning_dora_count", "opts": ["doraindicator_5", 4]}]},
    {"display_name": "Aka", "value": 1, "when": [{"name": "status", "opts": ["aka_m"]}]},
    {"display_name": "Aka", "value": 1, "when": [{"name": "status", "opts": ["aka_p"]}]},
    {"display_name": "Aka", "value": 1, "when": [{"name": "status", "opts": ["aka_s"]}]},
    {"display_name": "Ura", "value": 1, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_1"]}, {"name": "winning_dora_count", "opts": ["uraindicator_1", 1]}]},
    {"display_name": "Ura", "value": 2, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_1"]}, {"name": "winning_dora_count", "opts": ["uraindicator_1", 2]}]},
    {"display_name": "Ura", "value": 3, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_1"]}, {"name": "winning_dora_count", "opts": ["uraindicator_1", 3]}]},
    {"display_name": "Ura", "value": 4, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_1"]}, {"name": "winning_dora_count", "opts": ["uraindicator_1", 4]}]},
    {"display_name": "Ura", "value": 1, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_2"]}, {"name": "winning_dora_count", "opts": ["uraindicator_2", 1]}]},
    {"display_name": "Ura", "value": 2, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_2"]}, {"name": "winning_dora_count", "opts": ["uraindicator_2", 2]}]},
    {"display_name": "Ura", "value": 3, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_2"]}, {"name": "winning_dora_count", "opts": ["uraindicator_2", 3]}]},
    {"display_name": "Ura", "value": 4, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_2"]}, {"name": "winning_dora_count", "opts": ["uraindicator_2", 4]}]},
    {"display_name": "Ura", "value": 1, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_3"]}, {"name": "winning_dora_count", "opts": ["uraindicator_3", 1]}]},
    {"display_name": "Ura", "value": 2, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_3"]}, {"name": "winning_dora_count", "opts": ["uraindicator_3", 2]}]},
    {"display_name": "Ura", "value": 3, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_3"]}, {"name": "winning_dora_count", "opts": ["uraindicator_3", 3]}]},
    {"display_name": "Ura", "value": 4, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_3"]}, {"name": "winning_dora_count", "opts": ["uraindicator_3", 4]}]},
    {"display_name": "Ura", "value": 1, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_4"]}, {"name": "winning_dora_count", "opts": ["uraindicator_4", 1]}]},
    {"display_name": "Ura", "value": 2, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_4"]}, {"name": "winning_dora_count", "opts": ["uraindicator_4", 2]}]},
    {"display_name": "Ura", "value": 3, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_4"]}, {"name": "winning_dora_count", "opts": ["uraindicator_4", 3]}]},
    {"display_name": "Ura", "value": 4, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_4"]}, {"name": "winning_dora_count", "opts": ["uraindicator_4", 4]}]},
    {"display_name": "Ura", "value": 1, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_5"]}, {"name": "winning_dora_count", "opts": ["uraindicator_5", 1]}]},
    {"display_name": "Ura", "value": 2, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_5"]}, {"name": "winning_dora_count", "opts": ["uraindicator_5", 2]}]},
    {"display_name": "Ura", "value": 3, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_5"]}, {"name": "winning_dora_count", "opts": ["uraindicator_5", 3]}]},
    {"display_name": "Ura", "value": 4, "when": [{"name": "status", "opts": ["riichi"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}, {"name": "tile_revealed", "opts": ["uraindicator_5"]}, {"name": "winning_dora_count", "opts": ["uraindicator_5", 4]}]},
    {"display_name": "Reverse Dora", "value": 1, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_1", 1]}]},
    {"display_name": "Reverse Dora", "value": 2, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_1", 2]}]},
    {"display_name": "Reverse Dora", "value": 3, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_1", 3]}]},
    {"display_name": "Reverse Dora", "value": 4, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_1", 4]}]},
    {"display_name": "Reverse Dora", "value": 1, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_2", 1]}]},
    {"display_name": "Reverse Dora", "value": 2, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_2", 2]}]},
    {"display_name": "Reverse Dora", "value": 3, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_2", 3]}]},
    {"display_name": "Reverse Dora", "value": 4, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_2", 4]}]},
    {"display_name": "Reverse Dora", "value": 1, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_3", 1]}]},
    {"display_name": "Reverse Dora", "value": 2, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_3", 2]}]},
    {"display_name": "Reverse Dora", "value": 3, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_3", 3]}]},
    {"display_name": "Reverse Dora", "value": 4, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_3", 4]}]},
    {"display_name": "Reverse Dora", "value": 1, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_4", 1]}]},
    {"display_name": "Reverse Dora", "value": 2, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_4", 2]}]},
    {"display_name": "Reverse Dora", "value": 3, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_4", 3]}]},
    {"display_name": "Reverse Dora", "value": 4, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_4", 4]}]},
    {"display_name": "Reverse Dora", "value": 1, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_5"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_5", 1]}]},
    {"display_name": "Reverse Dora", "value": 2, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_5"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_5", 2]}]},
    {"display_name": "Reverse Dora", "value": 3, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_5"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_5", 3]}]},
    {"display_name": "Reverse Dora", "value": 4, "when": [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}, {"name": "tile_revealed", "opts": ["doraindicator_5"]}, {"name": "winning_reverse_dora_count", "opts": ["doraindicator_5", 4]}]}
    
  ],
  "meta_yaku": [
    {
      "display_name": "Tanyao",
      "value": 1,
      "when": [{"name": "status", "opts": ["haramura-nodoka"]}, {"name": "has_existing_yaku", "opts": ["Tanyao"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}]
    },
    {
      "display_name": "Pinfu",
      "value": 1,
      "when": [{"name": "status", "opts": ["haramura-nodoka"]}, {"name": "has_existing_yaku", "opts": ["Pinfu"]}]
    },
    {
      "display_name": "Riichi",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Riichi", 1]]}]
    },
    {
      "display_name": "Tsumo",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Tsumo", 1]]}]
    },
    {
      "display_name": "Ippatsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Ippatsu", 1]]}]
    },
    {
      "display_name": "Chankan",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Chankan", 1]]}]
    },
    {
      "display_name": "Rinshan",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Rinshan", 1]]}]
    },
    {
      "display_name": "Haitei",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Haitei", 1]]}]
    },
    {
      "display_name": "Houtei",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Houtei", 1]]}]
    },
    {
      "display_name": "Pinfu",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Pinfu", 1]]}]
    },
    {
      "display_name": "Tanyao",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Tanyao", 1]]}]
    },
    {
      "display_name": "Iipeikou",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Iipeikou", 1]]}]
    },
    {
      "display_name": "Seat Wind",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Seat Wind", 1]]}]
    },
    {
      "display_name": "Round Wind",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Round Wind", 1]]}]
    },
    {
      "display_name": "Haku",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Haku", 1]]}]
    },
    {
      "display_name": "Hatsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Hatsu", 1]]}]
    },
    {
      "display_name": "Chun",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Chun", 1]]}]
    },
    {
      "display_name": "Chanta",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Chanta", 1]]}]
    },
    {
      "display_name": "Ittsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Ittsu", 1]]}]
    },
    {
      "display_name": "Sanshoku",
      "value": 1,
      "when": [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}, {"name": "has_existing_yaku", "opts": [["Sanshoku", 1]]}]
    },
    {
      "display_name": "Riichi",
      "value": 1,
      "when": [{"name": "status", "opts": ["jindai-komaki"]}, {"name": "has_existing_yaku", "opts": ["Riichi"]}]
    },
    {
      "display_name": "Ippatsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["jindai-komaki"]}, {"name": "has_existing_yaku", "opts": ["Ippatsu"]}]
    },
    {
      "display_name": "Double Riichi",
      "value": 2,
      "when": [{"name": "status", "opts": ["jindai-komaki"]}, {"name": "has_existing_yaku", "opts": ["Double Riichi"]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 1]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 2]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 3]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 4]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 5]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 6]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 7]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 8]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 9]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 10]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 11]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 12]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 13]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 14]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 15]]]]}]
    },
    {
      "display_name": "Chiitoitsu",
      "value": 1,
      "when": [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "has_existing_yaku", "opts": ["Chiitoitsu"]}, {"name": "match", "opts": [["pond"], [[[["pair"], 16]]]]}]
    },
    {
      "display_name": "Tsumo",
      "value": 1,
      "when": [{"name": "status", "opts": ["sawamura-tomoki"]}, {"name": "has_existing_yaku", "opts": ["Tsumo"]}]
    },
    {
      "display_name": "Iipeikou",
      "value": 1,
      "when": [{"name": "status", "opts": ["sawamura-tomoki"]}, {"name": "has_existing_yaku", "opts": ["Iipeikou"]}]
    },
    {
      "display_name": "Ryanpeikou",
      "value": 2,
      "when": [{"name": "status", "opts": ["sawamura-tomoki"]}, {"name": "has_existing_yaku", "opts": ["Ryanpeikou"]}]
    },
    {
      "display_name": "No Yaku",
      "value": 1,
      "when": [{"name": "status", "opts": ["senoo-kaori"]}, "has_no_yaku"]
    }
  ],
  "yaku_alt_names": {
    "Riichi": "立直",
    "Tsumo": "門前清自摸和",
    "Ippatsu": "一発",
    "Chankan": "槍槓",
    "Rinshan": "嶺上開花",
    "Haitei": "海底摸月",
    "Houtei": "河底撈魚",
    "Pinfu": "平和",
    "Tanyao": "断幺九",
    "Iipeikou": "一盃口",
    "Seat Wind": "自風",
    "Round Wind": "場風",
    "Haku": "役牌 白",
    "Hatsu": "役牌 發",
    "Chun": "役牌 中",
    "Double Riichi": "ダブル立直",
    "Chiitoitsu": "七対子",
    "Chanta": "混全帯幺九",
    "Ittsu": "一気通貫",
    "Sanshoku": "三色同順",
    "Sanshoku Doukou": "三色同刻",
    "Sankantsu": "三槓子",
    "Toitoi": "対々和",
    "Sanankou": "三暗刻",
    "Shousangen": "小三元",
    "Honroutou": "混老頭",
    "Ryanpeikou": "二盃口",
    "Junchan": "純全帯幺九",
    "Honitsu": "混一色",
    "Chinitsu": "清一色",
    "Renhou": "人和",
    "Tenhou": "天和",
    "Chiihou": "地和",
    "Daisangen": "大三元",
    "Suuankou": "四暗刻",
    "Suuankou Tanki": "四暗刻単騎",
    "Tsuuiisou": "字一色",
    "Ryuuiisou": "緑一色",
    "Chinroutou": "清老頭",
    "Chuurenpoutou": "九蓮宝燈",
    "Junsei Chuurenpoutou": "純正九蓮宝燈",
    "Kokushi Musou": "国士無双",
    "Kokushi Musou Juusan Menmachi": "国士無双十三面待ち",
    "Daisuushii": "大四喜",
    "Shousuushii": "小四喜",
    "Suukantsu": "四槓子",
    "Dora": "ドラ",
    "Ura": "裏ドラ",
    "Aka": "赤ドラ"
  },
  "point_name": "Han",
  "limit_point_name": "★",
  "minipoint_name": "Fu",
  "score_calculation": {
    "method": "riichi",
    "win_by_discard_name": "Ron",
    "win_by_draw_name": "Tsumo",
    "score_table_dealer": {
      "1": {"30":1500,"40":2000,"50":2400,"60":2900,"70":3400,"80":3900,"90":4400,"100":4800,"110":5300},
      "2": {"20":2000,"25":2400,"30":2900,"40":3900,"50":4800,"60":5800,"70":6800,"80":7700,"90":8700,"100":9600,"110":10600},
      "3": {"20":3900,"25":4800,"30":5800,"40":7700,"50":9600,"60":11600,"70":12000,"80":12000,"90":12000,"100":12000,"110":12000},
      "4": {"20":7700,"25":9600,"30":11600,"40":12000,"50":12000,"60":12000,"70":12000,"80":12000,"90":12000,"100":12000,"110":12000},
      "5": {"max": 12000}, "6": {"max": 18000}, "7": {"max": 18000}, "8": {"max": 24000}, "9": {"max": 24000}, "10": {"max": 24000}, "11": {"max": 36000}, "12": {"max": 36000}, "max": {"max": 48000}
    },
    "score_table_nondealer": {
      "1": {"30":1000,"40":1300,"50":1600,"60":2000,"70":2300,"80":2600,"90":2900,"100":3200,"110":3600},
      "2": {"20":1300,"25":1600,"30":2000,"40":2600,"50":3200,"60":3900,"70":4500,"80":5200,"90":5800,"100":6400,"110":7100},
      "3": {"20":2600,"25":3200,"30":3900,"40":5200,"50":6400,"60":7700,"70":8000,"80":8000,"90":8000,"100":8000,"110":8000},
      "4": {"20":5200,"25":6400,"30":7700,"40":8000,"50":8000,"60":8000,"70":8000,"80":8000,"90":8000,"100":8000,"110":8000},
      "5": {"max": 8000}, "6": {"max": 12000}, "7": {"max": 12000}, "8": {"max": 16000}, "9": {"max": 16000}, "10": {"max": 16000}, "11": {"max": 24000}, "12": {"max": 24000}, "max": {"max": 36000}
    },
    "score_table_dealer_draw": {
      "1": {"30":500,"40":700,"50":800,"60":1000,"70":1200,"80":1300,"90":1500,"100":1600,"110":1800},
      "2": {"20":700,"25":800,"30":1000,"40":1300,"50":1600,"60":2000,"70":2300,"80":2600,"90":2900,"100":3200,"110":3600},
      "3": {"20":1300,"25":1600,"30":2000,"40":2600,"50":3200,"60":3900,"70":4000,"80":4000,"90":4000,"100":4000,"110":4000},
      "4": {"20":2600,"25":3200,"30":3900,"40":4000,"50":4000,"60":4000,"70":4000,"80":4000,"90":4000,"100":4000,"110":4000},
      "5": {"max": 4000}, "6": {"max": 6000}, "7": {"max": 6000}, "8": {"max": 8000}, "9": {"max": 8000}, "10": {"max": 8000}, "11": {"max": 12000}, "12": {"max": 12000}, "max": {"max": 16000}
    },
    "score_table_nondealer_draw": {
      "1": {"30":300,"40":400,"50":400,"60":500,"70":600,"80":700,"90":800,"100":800,"110":900},
      "2": {"20":400,"25":400,"30":500,"40":700,"50":800,"60":1000,"70":1200,"80":1300,"90":1500,"100":1600,"110":1800},
      "3": {"20":700,"25":800,"30":1000,"40":1300,"50":1600,"60":2000,"70":2000,"80":2000,"90":2000,"100":2000,"110":2000},
      "4": {"20":1300,"25":1600,"30":2000,"40":2000,"50":2000,"60":2000,"70":2000,"80":2000,"90":2000,"100":2000,"110":2000},
      "5": {"max": 2000}, "6": {"max": 3000}, "7": {"max": 3000}, "8": {"max": 4000}, "9": {"max": 4000}, "10": {"max": 4000}, "11": {"max": 6000}, "12": {"max": 6000}, "max": {"max": 8000}
    },
    "limit_hand_names": {
      "1": "",
      "2": "",
      "3": "",
      "4": "",
      "5": "Mangan",
      "6": "Haneman",
      "7": "Haneman",
      "8": "Baiman",
      "9": "Baiman",
      "10": "Baiman",
      "11": "Sanbaiman",
      "12": "Sanbaiman",
      "max": "Yakuman"
    },
    "riichi_value": 1000,
    "honba_value": 100
  },
  "play_restrictions": [
    [["any"], ["not_all_saki_cards_drafted"]],
    [["any"], [{"name": "status", "opts": ["riichi"]}, {"name": "status_missing", "opts": ["just_reached"]}, "not_is_drawn_tile"]],
    [["any"], [{"name": "status", "opts": ["atago_kinue_aside_waits"]}, {"name": "status_missing", "opts": ["just_changed_atago_kinue_aside_waits"]}, "not_is_drawn_tile"]],
    [["any"], [{"name": "status", "opts": ["atago_kinue_aside_waits", "just_changed_atago_kinue_aside_waits"]}, {"name": "needed_for_hand", "opts": ["tenpai", "kokushi_tenpai"]}]],
    [["any"], [{"name": "status", "opts": ["riichi", "just_reached"]}, {"name": "status_missing", "opts": ["kakura-kurumi"]}, {"name": "needed_for_hand", "opts": ["tenpai", "kokushi_tenpai"]}]],
    [["any"], [{"name": "status", "opts": ["riichi", "just_reached", "kakura-kurumi"]}, {"name": "match", "opts": [["hand"], ["kakura_kurumi_tenpai"]]}, {"name": "needed_for_hand", "opts": ["kakura_kurumi_tenpai"]}]],
    [["any"], ["just_called", {"name": "status_missing", "opts": ["anetai-toyone"]}, {"name": "last_called_tile_matches", "opts": ["kuikae"]}]],
    [["any"], [{"name": "has_attr", "opts": ["tile", "no_discard"]}]],
    [["any"], [{"name": "status", "opts": ["amae-koromo"]}, "just_discarded"]],
    [["any"], [{"name": "status", "opts": ["matano-seiko", "pon"]}]]
  ],
  "before_turn_change": {
    "actions": [["when", [{"name": "status_missing", "opts": ["just_reached"]}], [["unset_status", "ippatsu"]]],
                ["when", [{"name": "status", "opts": ["just_reached"]}, {"name": "status_missing", "opts": ["inazuma_riichi"]}], [["add_score", -1000], ["put_down_riichi_stick"]]],
                ["when", [{"name": "status", "opts": ["just_reached", "inazuma_riichi"]}], [["add_score", -5000], ["put_down_riichi_stick", 5]]],
                ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_5"]}], [["reveal_tile", "doraindicator_5"]]],
                ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_4"]}], [["reveal_tile", "doraindicator_4"]]],
                ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_3"]}], [["reveal_tile", "doraindicator_3"]]],
                ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_2"]}], [["reveal_tile", "doraindicator_2"]]],
                ["unset_status", "ready", "just_reached", "just_changed_atago_kinue_aside_waits", "just_called", "call_made", "chii", "pon", "kan", "ankan", "onjouji_toki_drew", "shirouzu_mairu_drew", "inoue_jun_broke_ippatsu", "just_swapped", "call_interrupted", "swap_interrupted", "motouchi_naruka_skip_interrupt"],
                ["when", [{"name": "status_missing", "opts": ["riichi"]}], [["unset_status", "furiten"]]],
                ["when_anyone", [{"name": "status", "opts": ["atago-hiroe", "tenpai"]}, {"name": "status_missing", "opts": ["riichi"]}], [
                  // check if our placement is not the same as the one we are tagged with
                  ["unless", [[
                    [{"name": "placement", "opts": [1]}, {"name": "status", "opts": ["1st_place"]}],
                    [{"name": "placement", "opts": [2]}, {"name": "status", "opts": ["2nd_place"]}],
                    [{"name": "placement", "opts": [3]}, {"name": "status", "opts": ["3rd_place"]}],
                    [{"name": "placement", "opts": [4]}, {"name": "status", "opts": ["4th_place"]}]
                  ]], [
                    // tag with placement for future update checks
                    ["unset_status", "1st_place", "2nd_place", "3rd_place", "4th_place"],
                    ["when", [{"name": "placement", "opts": [1]}], [["set_status", "1st_place"]]],
                    ["when", [{"name": "placement", "opts": [2]}], [["set_status", "2nd_place"]]],
                    ["when", [{"name": "placement", "opts": [3]}], [["set_status", "3rd_place"]]],
                    ["when", [{"name": "placement", "opts": [4]}], [["set_status", "4th_place"]]],
                    // reset tile aliases
                    ["clear_tile_aliases"],
                    ["set_tile_alias", ["0m"], ["5m"]],
                    ["set_tile_alias", ["0p"], ["5p"]],
                    ["set_tile_alias", ["0s"], ["5s"]],
                    ["when", [{"name": "placement", "opts": [2, 3, 4]}], [["set_tile_alias", [["any", "ippatsu", "draw", "1st_place"]], [
                      "1m", "2m", "3m", "4m", "5m", "6m", "7m", "8m", "9m",
                      "1p", "2p", "3p", "4p", "5p", "6p", "7p", "8p", "9p",
                      "1s", "2s", "3s", "4s", "5s", "6s", "7s", "8s", "9s",
                      "1z", "2z", "3z", "4z", "5z", "6z", "7z"]]]],
                    ["when", [{"name": "placement", "opts": [3, 4]}], [["set_tile_alias", [["any", "ippatsu", "draw", "2nd_place"]], [
                      "1m", "2m", "3m", "4m", "5m", "6m", "7m", "8m", "9m",
                      "1p", "2p", "3p", "4p", "5p", "6p", "7p", "8p", "9p",
                      "1s", "2s", "3s", "4s", "5s", "6s", "7s", "8s", "9s",
                      "1z", "2z", "3z", "4z", "5z", "6z", "7z"]]]],
                    ["when", [{"name": "placement", "opts": [4]}], [["set_tile_alias", [["any", "ippatsu", "draw", "3rd_place"]], [
                      "1m", "2m", "3m", "4m", "5m", "6m", "7m", "8m", "9m",
                      "1p", "2p", "3p", "4p", "5p", "6p", "7p", "8p", "9p",
                      "1s", "2s", "3s", "4s", "5s", "6s", "7s", "8s", "9s",
                      "1z", "2z", "3z", "4z", "5z", "6z", "7z"]]]]
                  ]]
                ]],
                ["when", [{"name": "match", "opts": [["hand", "calls", "any_discard"], ["win"]]}], [["set_status", "furiten"]]],
                ["when", [{"name": "status", "opts": ["kakura-kurumi"]}, {"name": "match", "opts": [["hand"], ["kakura_kurumi_tenpai"]]}, {"name": "match", "opts": [["hand", "calls", "any_discard"], ["kakura_kurumi_win"]]}], [["set_status", "furiten"]]],
                ["when", [{"name": "tile_drawn", "opts": ["kandraw_4"]}, {"name": "not_anyone_status", "opts": ["suukantsu"]}], [["pause", 1000], ["abortive_draw", "Suukaikan"]]],
                ["remove_attr_all", "rinshan"],
                ["when", [{"name": "status", "opts": ["toyouko-momoko"]}, "third_row_discard"], [["set_status", "discard_facedown"]]],
                ["ite", [{"name": "status", "opts": ["extra_turn"]}, {"name": "status_missing", "opts": ["extra_turn_taken"]}],
                  [["set_status", "extra_turn_prompt"]],
                  [["unset_status", "extra_turn", "extra_turn_taken", "discard_facedown"]]],
                ["when", [{"name": "not_status_missing", "opts": ["shirouzu-mairu", "tsuruta-himeko"]}], [["remove_attr_all", "revealed"]]]
               ]
  },
  "after_turn_change": {
    "actions": [["ite", [{"name": "kamicha_status", "opts": ["extra_turn_prompt"]}], [
                  ["change_turn", "kamicha"]
                ], [
                  ["when", ["no_tiles_remaining"], [["pause", 1000], ["ryuukyoku"]]],
                  ["when_anyone",
                    [[
                      {"name": "match", "opts": [["hand", "calls", "last_discard"], ["win"]]},
                      [
                        {"name": "last_call_is", "opts": ["kakan"]},
                        {"name": "match", "opts": [["hand", "calls", "last_called_tile"], ["win"]]}
                      ],
                      [
                        {"name": "last_call_is", "opts": ["ankan"]},
                        {"name": "match", "opts": [["hand", "calls", "draw"], ["kokushi_tenpai"]]},
                        {"name": "match", "opts": [["hand", "calls", "last_called_tile"], ["win"]]}
                      ],
                      [
                        {"name": "status", "opts": ["kakura-kurumi"]},
                        {"name": "match", "opts": [["hand"], ["kakura_kurumi_tenpai"]]},
                        {"name": "match", "opts": [["hand", "last_discard"], ["kakura_kurumi_win"]]}
                      ],
                      [
                        {"name": "status", "opts": ["kakura-kurumi"]},
                        {"name": "last_call_is", "opts": ["kakan"]},
                        {"name": "match", "opts": [["hand"], ["kakura_kurumi_tenpai"]]},
                        {"name": "match", "opts": [["hand", "last_called_tile"], ["kakura_kurumi_win"]]}
                      ]
                    ]],
                    [["set_status", "furiten"]]
                  ],
                  ["when", [
                    "not_no_tiles_remaining",
                    "all_saki_cards_drafted",
                    [
                      {"name": "status_missing", "opts": ["shibuya-takami", "matano-seiko", "onjouji-toki"]},
                      "not_has_aside"
                    ]
                  ], [
                    ["set_status", "about_to_draw"],
                    ["recalculate_buttons"], // allow interrupting draw
                    ["unset_status", "about_to_draw"],
                    ["draw"],
                    ["when", [{"name": "status", "opts": ["ippatsu"]}], [
                      // for atago hiroe
                      ["when", [{"name": "placement", "opts": [1]}], [["add_attr_drawn_tile", "1st_place"]]],
                      ["when", [{"name": "placement", "opts": [2]}], [["add_attr_drawn_tile", "2nd_place"]]],
                      ["when", [{"name": "placement", "opts": [3]}], [["add_attr_drawn_tile", "3rd_place"]]],
                      ["add_attr_drawn_tile", "ippatsu"]
                    ]]
                  ]],
                  ["when", ["no_tiles_remaining"], [["add_attr_drawn_tile", "haitei"]]],
                  ["when", [
                    [
                      {"name": "status", "opts": ["shibuya-takami"]},
                      {"name": "status", "opts": ["matano-seiko"]}
                    ],
                    "has_aside"
                  ], [
                    ["set_status", "about_to_draw"],
                    ["recalculate_buttons"], // allow interrupting draw
                    ["unset_status", "about_to_draw"],
                    ["draw_from_aside"]
                  ]],
                  ["when", [
                    {"name": "status", "opts": ["iwadate-yuan"]},
                    {"name": "match", "opts": [["hand", "draw", "all_discards", "all_call_tiles", "revealed_tiles"], [[[[["7z","7z","7z","7z"]], 1]]]]}
                  ], [
                    ["remove_attr_all", "golden"],
                    ["add_attr_tile", "7z", "golden"],
                    ["set_tile_alias", [["7z", "golden"]], ["5m","5p","5s","7z"]]
                  ]]
                 ]
               ]]
  },
  "before_call": {
    "actions": [
      ["when", [{"name": "status_missing", "opts": ["just_reached"]}], [["unset_status", "ippatsu"]]],
      ["when", [{"name": "status", "opts": ["just_reached"]}], [["add_score", -1000], ["put_down_riichi_stick"]]],
      ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_5"]}], [["reveal_tile", "doraindicator_5"]]],
      ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_4"]}], [["reveal_tile", "doraindicator_4"]]],
      ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_3"]}], [["reveal_tile", "doraindicator_3"]]],
      ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_2"]}], [["reveal_tile", "doraindicator_2"]]],
      ["unset_status", "just_reached", "just_changed_atago_kinue_aside_waits", "call_made", "chii", "pon", "kan", "nagashi"],
      ["when", [{"name": "match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]}], [["set_status", "tenpai"]]],
      ["when", [{"name": "not_match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]}], [["unset_status", "tenpai"]]]
    ]
  },
  "after_call": {
    "actions": [
      ["when_anyone",
        [[
          {"name": "match", "opts": [["hand", "calls", "last_discard"], ["win"]]},
          [
            {"name": "last_call_is", "opts": ["kakan"]},
            {"name": "match", "opts": [["hand", "calls", "last_called_tile"], ["win"]]}
          ],
          [
            {"name": "last_call_is", "opts": ["ankan"]},
            {"name": "match", "opts": [["hand", "calls", "draw"], ["kokushi_tenpai"]]},
            {"name": "match", "opts": [["hand", "calls", "last_called_tile"], ["win"]]}
          ]
        ]],
        [["set_status", "furiten"]]
      ],
      ["when", [{"name": "match", "opts": [["last_call"], [[[["haku", "hatsu", "chun"], 1]]]]}, {"name": "match", "opts": [["calls"], [[[["haku"], 1], [["hatsu"], 1], [["chun"], 1]]]]}], [["set_callee_status", "pao"]]],
      ["when", [{"name": "match", "opts": [["last_call"], [[[["ton", "nan", "shaa", "pei"], 1]]]]}, {"name": "match", "opts": [["calls"], [[[["ton"], 1], [["nan"], 1], [["shaa"], 1], [["pei"], 1]]]]}], [["set_callee_status", "pao"]]],
      ["when", [{"name": "anyone_status", "opts": ["miyanaga-teru"]}], [["add_honba"]]],
      ["when_anyone", [{"name": "status", "opts": ["atago-kinue"]}, "not_no_tiles_remaining"], [
        ["draw_aside"],
        ["push_message", "drew a tile aside (Atago Kinue)"]
      ]],
      ["unset_status_all", "motouchi_naruka_skip_interrupt"],
      ["when", [{"name": "status", "opts": ["anetai-toyone"]}, {"name": "match", "opts": [["calls"], [[[["chii", "pon", "daiminkan", "kakan", "ankan"], 4]]]]}], [
        ["set_tile_alias", [["1m", "draw"], ["1p", "draw"], ["1s", "draw"], ["1m", "discard"], ["1p", "discard"], ["1s", "discard"]], ["1m", "1p", "1s"]],
        ["set_tile_alias", [["2m", "draw"], ["2p", "draw"], ["2s", "draw"], ["2m", "discard"], ["2p", "discard"], ["2s", "discard"]], ["2m", "2p", "2s"]],
        ["set_tile_alias", [["3m", "draw"], ["3p", "draw"], ["3s", "draw"], ["3m", "discard"], ["3p", "discard"], ["3s", "discard"]], ["3m", "3p", "3s"]],
        ["set_tile_alias", [["4m", "draw"], ["4p", "draw"], ["4s", "draw"], ["4m", "discard"], ["4p", "discard"], ["4s", "discard"]], ["4m", "4p", "4s"]],
        ["set_tile_alias", [["5m", "draw"], ["5p", "draw"], ["5s", "draw"], ["5m", "discard"], ["5p", "discard"], ["5s", "discard"]], ["5m", "5p", "5s"]],
        ["set_tile_alias", [["6m", "draw"], ["6p", "draw"], ["6s", "draw"], ["6m", "discard"], ["6p", "discard"], ["6s", "discard"]], ["6m", "6p", "6s"]],
        ["set_tile_alias", [["7m", "draw"], ["7p", "draw"], ["7s", "draw"], ["7m", "discard"], ["7p", "discard"], ["7s", "discard"]], ["7m", "7p", "7s"]],
        ["set_tile_alias", [["8m", "draw"], ["8p", "draw"], ["8s", "draw"], ["8m", "discard"], ["8p", "discard"], ["8s", "discard"]], ["8m", "8p", "8s"]],
        ["set_tile_alias", [["9m", "draw"], ["9p", "draw"], ["9s", "draw"], ["9m", "discard"], ["9p", "discard"], ["9s", "discard"]], ["9m", "9p", "9s"]]
      ]],
      ["when_anyone", [{"name": "status", "opts": ["tsuruta-himeko"]}, {"name": "status_missing", "opts": ["riichi"]}], [
        ["big_text", "Tsuruta Himeko: switch out!"],
        ["unset_status", "tsuruta-himeko"],
        ["set_status", "shirouzu-mairu"]
      ]],
      // set tenpai status
      ["when", [{"name": "status_missing", "opts": ["tenpai"]}, {"name": "match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]}], [
        ["set_status", "tenpai"],
        ["when", [{"name": "status", "opts": ["takei-hisa"]}], [
          ["ite", [{"name": "has_hell_wait", "opts": ["pair_wait"]}], [
            ["set_tile_alias", [["1m", "draw"], ["1p", "draw"], ["1s", "draw"], ["1m", "discard"], ["1p", "discard"], ["1s", "discard"]], ["1m", "1p", "1s"]],
            ["set_tile_alias", [["2m", "draw"], ["2p", "draw"], ["2s", "draw"], ["2m", "discard"], ["2p", "discard"], ["2s", "discard"]], ["2m", "2p", "2s"]],
            ["set_tile_alias", [["3m", "draw"], ["3p", "draw"], ["3s", "draw"], ["3m", "discard"], ["3p", "discard"], ["3s", "discard"]], ["3m", "3p", "3s"]],
            ["set_tile_alias", [["4m", "draw"], ["4p", "draw"], ["4s", "draw"], ["4m", "discard"], ["4p", "discard"], ["4s", "discard"]], ["4m", "4p", "4s"]],
            ["set_tile_alias", [["5m", "draw"], ["5p", "draw"], ["5s", "draw"], ["5m", "discard"], ["5p", "discard"], ["5s", "discard"]], ["5m", "5p", "5s"]],
            ["set_tile_alias", [["6m", "draw"], ["6p", "draw"], ["6s", "draw"], ["6m", "discard"], ["6p", "discard"], ["6s", "discard"]], ["6m", "6p", "6s"]],
            ["set_tile_alias", [["7m", "draw"], ["7p", "draw"], ["7s", "draw"], ["7m", "discard"], ["7p", "discard"], ["7s", "discard"]], ["7m", "7p", "7s"]],
            ["set_tile_alias", [["8m", "draw"], ["8p", "draw"], ["8s", "draw"], ["8m", "discard"], ["8p", "discard"], ["8s", "discard"]], ["8m", "8p", "8s"]],
            ["set_tile_alias", [["9m", "draw"], ["9p", "draw"], ["9s", "draw"], ["9m", "discard"], ["9p", "discard"], ["9s", "discard"]], ["9m", "9p", "9s"]]
          ], [
            ["clear_tile_aliases"],
            ["set_tile_alias", ["0m"], ["5m"]],
            ["set_tile_alias", ["0p"], ["5p"]],
            ["set_tile_alias", ["0s"], ["5s"]]
          ]]
        ]]
      ]],
      // unset tenpai status
      ["when", [{"name": "status", "opts": ["tenpai"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]}], [
        ["unset_status", "tenpai"],
        ["when", [{"name": "not_status_missing", "opts": ["takei-hisa", "atago-hiroe"]}], [
          ["clear_tile_aliases"],
          ["set_tile_alias", ["0m"], ["5m"]],
          ["set_tile_alias", ["0p"], ["5p"]],
          ["set_tile_alias", ["0s"], ["5s"]]
        ]]
      ]],
      ["unless", [{"name": "status", "opts": ["kan"]}], [["set_status", "ready"]]]
    ]
  },
  "after_draw": {
    "actions": [
      // set tenpai status
      ["when", [{"name": "status_missing", "opts": ["tenpai"]}, {"name": "match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]}], [
        ["set_status", "tenpai"],
        ["when", [{"name": "status", "opts": ["takei-hisa"]}], [
          ["ite", [{"name": "has_hell_wait", "opts": ["pair_wait"]}], [
            ["set_tile_alias", [["1m", "draw"], ["1p", "draw"], ["1s", "draw"], ["1m", "discard"], ["1p", "discard"], ["1s", "discard"]], ["1m", "1p", "1s"]],
            ["set_tile_alias", [["2m", "draw"], ["2p", "draw"], ["2s", "draw"], ["2m", "discard"], ["2p", "discard"], ["2s", "discard"]], ["2m", "2p", "2s"]],
            ["set_tile_alias", [["3m", "draw"], ["3p", "draw"], ["3s", "draw"], ["3m", "discard"], ["3p", "discard"], ["3s", "discard"]], ["3m", "3p", "3s"]],
            ["set_tile_alias", [["4m", "draw"], ["4p", "draw"], ["4s", "draw"], ["4m", "discard"], ["4p", "discard"], ["4s", "discard"]], ["4m", "4p", "4s"]],
            ["set_tile_alias", [["5m", "draw"], ["5p", "draw"], ["5s", "draw"], ["5m", "discard"], ["5p", "discard"], ["5s", "discard"]], ["5m", "5p", "5s"]],
            ["set_tile_alias", [["6m", "draw"], ["6p", "draw"], ["6s", "draw"], ["6m", "discard"], ["6p", "discard"], ["6s", "discard"]], ["6m", "6p", "6s"]],
            ["set_tile_alias", [["7m", "draw"], ["7p", "draw"], ["7s", "draw"], ["7m", "discard"], ["7p", "discard"], ["7s", "discard"]], ["7m", "7p", "7s"]],
            ["set_tile_alias", [["8m", "draw"], ["8p", "draw"], ["8s", "draw"], ["8m", "discard"], ["8p", "discard"], ["8s", "discard"]], ["8m", "8p", "8s"]],
            ["set_tile_alias", [["9m", "draw"], ["9p", "draw"], ["9s", "draw"], ["9m", "discard"], ["9p", "discard"], ["9s", "discard"]], ["9m", "9p", "9s"]]
          ], [
            ["clear_tile_aliases"],
            ["set_tile_alias", ["0m"], ["5m"]],
            ["set_tile_alias", ["0p"], ["5p"]],
            ["set_tile_alias", ["0s"], ["5s"]]
          ]]
        ]]
      ]],
      // unset tenpai status
      ["when", [{"name": "status", "opts": ["tenpai"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]}], [
        ["unset_status", "tenpai"],
        ["when", [{"name": "not_status_missing", "opts": ["takei-hisa", "atago-hiroe"]}], [
          ["clear_tile_aliases"],
          ["set_tile_alias", ["0m"], ["5m"]],
          ["set_tile_alias", ["0p"], ["5p"]],
          ["set_tile_alias", ["0s"], ["5s"]]
        ]]
      ]],
      ["when", ["our_turn"], [["set_status", "ready"]]]
    ]
  },
  "play_effects": [
    ["1z", [["when", [{"name": "status", "opts": ["discards_empty"]}], [
      ["set_status", "suufonrenda_1z"],
      ["when", [{"name": "everyone_status", "opts": ["suufonrenda_1z"]}], [["pause", 1000], ["abortive_draw", "Suufon Renda"]]]
    ]]]],
    ["2z", [["when", [{"name": "status", "opts": ["discards_empty"]}], [
      ["set_status", "suufonrenda_2z"],
      ["when", [{"name": "everyone_status", "opts": ["suufonrenda_2z"]}], [["pause", 1000], ["abortive_draw", "Suufon Renda"]]]
    ]]]],
    ["3z", [["when", [{"name": "status", "opts": ["discards_empty"]}], [
      ["set_status", "suufonrenda_3z"],
      ["when", [{"name": "everyone_status", "opts": ["suufonrenda_3z"]}], [["pause", 1000], ["abortive_draw", "Suufon Renda"]]]
    ]]]],
    ["4z", [["when", [{"name": "status", "opts": ["discards_empty"]}], [
      ["set_status", "suufonrenda_4z"],
      ["when", [{"name": "everyone_status", "opts": ["suufonrenda_4z"]}], [["pause", 1000], ["abortive_draw", "Suufon Renda"]]]
    ]]]],
    ["tanyaohai", [["unset_status", "nagashi"]]],
    ["any", [["unset_status", "discards_empty"]]],
    ["2", [["when", [{"name": "status", "opts": ["takimi-haru"]}, {"name": "status_missing", "opts": ["extra_turn_taken"]}], [
      ["set_status", "extra_turn"],
      ["big_text", "Takimi Haru: extra turn!"],
      ["push_message", "took an extra turn by discarding 2 (Takimi Haru)"]
    ]]]],
    ["8", [["when", [{"name": "status", "opts": ["takimi-haru"]}, {"name": "status_missing", "opts": ["extra_turn_taken"]}], [
      ["set_status", "extra_turn"],
      ["big_text", "Takimi Haru: extra turn!"],
      ["push_message", "took an extra turn by discarding 8 (Takimi Haru)"]
    ]]]],
    ["tedashi", [["when", [{"name": "status", "opts": ["aislinn-wishart"]}, {"name": "has_score_below", "opts": [30000]}, {"name": "status_missing", "opts": ["extra_turn_taken"]}], [
      ["set_status", "extra_turn"],
      ["big_text", "Aislinn Wishart: extra turn!"],
      ["push_message", "took an extra turn by discarding tedashi (Aislinn Wishart)"]
    ]]]],
    ["5z", [["when", [{"name": "status", "opts": ["karijuku-tomoe"]}, {"name": "status_missing", "opts": ["extra_turn_taken"]}], [
      ["set_status", "extra_turn"],
      ["big_text", "Karijuku Tomoe: extra turn!"],
      ["push_message", "took an extra turn by discarding haku (Karijuku Tomoe)"]
    ]]]],
    ["any", [["when", [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "shimocha_status", "opts": ["riichi"]}, "genbutsu_shimocha", {"name": "status_missing", "opts": ["extra_turn", "extra_turn_taken"]}], [
      ["set_status", "extra_turn", "discard_facedown"],
      ["big_text", "Kosegawa Shiromi: extra turn!"],
      ["push_message", "took an extra turn by discarding genbutsu against riichi (Kosegawa Shiromi)"]
    ]]]],
    ["any", [["when", [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "toimen_status", "opts": ["riichi"]}, "genbutsu_toimen", {"name": "status_missing", "opts": ["extra_turn", "extra_turn_taken"]}], [
      ["set_status", "extra_turn", "discard_facedown"],
      ["big_text", "Kosegawa Shiromi: extra turn!"],
      ["push_message", "took an extra turn by discarding genbutsu against riichi (Kosegawa Shiromi)"]
    ]]]],
    ["any", [["when", [{"name": "status", "opts": ["kosegawa-shiromi"]}, {"name": "kamicha_status", "opts": ["riichi"]}, "genbutsu_kamicha", {"name": "status_missing", "opts": ["extra_turn", "extra_turn_taken"]}], [
      ["set_status", "extra_turn", "discard_facedown"],
      ["big_text", "Kosegawa Shiromi: extra turn!"],
      ["push_message", "took an extra turn by discarding genbutsu against riichi (Kosegawa Shiromi)"]
    ]]]],
    ["manzu", [["when", [{"name": "status", "opts": ["tsuruta-himeko"]}, {"name": "not_match", "opts": [["pond"], [[[["1m","2m","3m","4m","5m","6m","7m","8m","9m"], 2]]]]}], [
      ["set_status", "extra_turn"],
      ["big_text", "Tsuruta Himeko: switch out!"],
      ["push_message", "took an extra turn by discarding a tile of a suit not visible in discards (Tsuruta Himeko)"],
      ["unset_status", "tsuruta-himeko"],
      ["set_status", "shirouzu-mairu"]
    ]]]],
    ["pinzu", [["when", [{"name": "status", "opts": ["tsuruta-himeko"]}, {"name": "not_match", "opts": [["pond"], [[[["1p","2p","3p","4p","5p","6p","7p","8p","9p"], 2]]]]}], [
      ["set_status", "extra_turn"],
      ["big_text", "Tsuruta Himeko: switch out!"],
      ["push_message", "took an extra turn by discarding a tile of a suit not visible in discards (Tsuruta Himeko)"],
      ["unset_status", "tsuruta-himeko"],
      ["set_status", "shirouzu-mairu"]
    ]]]],
    ["souzu", [["when", [{"name": "status", "opts": ["tsuruta-himeko"]}, {"name": "not_match", "opts": [["pond"], [[[["1s","2s","3s","4s","5s","6s","7s","8s","9s"], 2]]]]}], [
      ["set_status", "extra_turn"],
      ["big_text", "Tsuruta Himeko: switch out!"],
      ["push_message", "took an extra turn by discarding a tile of a suit not visible in discards (Tsuruta Himeko)"],
      ["unset_status", "tsuruta-himeko"],
      ["set_status", "shirouzu-mairu"]
    ]]]],
    ["jihai", [["when", [{"name": "status", "opts": ["tsuruta-himeko"]}, {"name": "not_match", "opts": [["pond"], [[[["1z","2z","3z","4z","5z","6z","7z"], 2]]]]}], [
      ["set_status", "extra_turn"],
      ["big_text", "Tsuruta Himeko: switch out!"],
      ["push_message", "took an extra turn by discarding a tile of a suit not visible in discards (Tsuruta Himeko)"],
      ["unset_status", "tsuruta-himeko"],
      ["set_status", "shirouzu-mairu"]
    ]]]],
    ["any", [["when", [{"name": "status", "opts": ["discard_facedown"]}], [["recalculate_buttons"]]]]] // allow interrupting facedown discards
  ],
  "after_start": {
    "actions": [
      ["set_status_all", "discards_empty", "nagashi"],
      ["set_tile_alias_all", ["0m"], ["5m"]],
      ["set_tile_alias_all", ["0p"], ["5p"]],
      ["set_tile_alias_all", ["0s"], ["5s"]],
      ["when", ["not_all_saki_cards_drafted"], [["set_status_all", "match_start"]]]
    ]
  },
  "after_saki_start": {
    "actions": [
      ["when", [{"name": "status", "opts": ["jindai-komaki"]}], [["reveal_hand"], ["set_status", "double_score"]]],
      ["when", [{"name": "status", "opts": ["miyanaga-saki"]}], [["set_tile_alias", [["1z", "hand"], ["2z", "hand"], ["4z", "hand"]], ["3z"]]]],
      ["when", [{"name": "status", "opts": ["miyanaga-saki"]}], [["set_tile_alias", [["any", "rinshan"]], [
        "1m", "2m", "3m", "4m", "5m", "6m", "7m", "8m", "9m",
        "1p", "2p", "3p", "4p", "5p", "6p", "7p", "8p", "9p",
        "1s", "2s", "3s", "4s", "5s", "6s", "7s", "8s", "9s",
        "1z", "2z", "3z", "4z", "5z", "6z", "7z"]]]],
      ["when", [{"name": "status", "opts": ["amae-koromo"]}], [["set_tile_alias", [["any", "haitei"]], [
        "1m", "2m", "3m", "4m", "5m", "6m", "7m", "8m", "9m",
        "1p", "2p", "3p", "4p", "5p", "6p", "7p", "8p", "9p",
        "1s", "2s", "3s", "4s", "5s", "6s", "7s", "8s", "9s",
        "1z", "2z", "3z", "4z", "5z", "6z", "7z"]]]],
      ["when", [{"name": "status", "opts": ["miyanaga-teru"]}], [["set_status", "multiply_honba_with_han"]]],
      ["when", [{"name": "status", "opts": ["senoo-kaori"]}], [["set_tile_ordering", ["1z", "2z", "3z", "4z"]], ["set_tile_ordering", ["5z", "6z", "7z"]]]],
      ["when", [{"name": "status", "opts": ["mase-yuuko"]}], [["set_tile_ordering", ["9m", "1m"]], ["set_tile_ordering", ["9p", "1p"]], ["set_tile_ordering", ["9s", "1s"]]]],
      ["when", [{"name": "status", "opts": ["senoo-kaori", "mase-yuuko"]}], [["set_tile_ordering", ["4z", "1z"]], ["set_tile_ordering", ["7z", "5z"]]]],
      ["when", [{"name": "status", "opts": ["arakawa-kei"]}], [["set_status_all", "use_arakawa_kei_scoring"]]],
      ["when", [{"name": "status", "opts": ["motouchi-naruka"]}], [["set_status", "motouchi_naruka_increase_tsumo_payment"], ["set_status_others", "motouchi_naruka_decrease_tsumo_payment"]]],
      ["when", [
        {"name": "status", "opts": ["iwadate-yuan"]},
        {"name": "match", "opts": [["hand", "draw", "all_discards", "all_call_tiles", "revealed_tiles"], [[[[["7z","7z","7z","7z"]], 1]]]]}
      ], [
        ["add_attr_tile", "7z", "golden"],
        ["set_tile_alias", [["7z", "golden"]], ["5m","5p","5s","7z"]]
      ]],
      ["when", [{"name": "status", "opts": ["ryuumonbuchi-touka"]}, {"name": "seat_is", "opts": ["east"]}], [["set_status", "score_limit_one_tier_higher"]]],
      ["when", [{"name": "seat_is", "opts": ["east"]}], [
        ["set_status", "about_to_draw"],
        ["recalculate_buttons"], // allow interrupting draw
        ["unset_status", "about_to_draw"],
        ["draw"]
      ]]
    ]
  },
  "before_win": {
    "actions": [["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_5"]}], [["reveal_tile", "doraindicator_5"]]],
                ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_4"]}], [["reveal_tile", "doraindicator_4"]]],
                ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_3"]}], [["reveal_tile", "doraindicator_3"]]],
                ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_2"]}], [["reveal_tile", "doraindicator_2"]]],
                ["when", [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["0m"], 1]]]]}], [["set_status", "aka_m"]]],
                ["when", [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["0p"], 1]]]]}], [["set_status", "aka_p"]]],
                ["when", [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["0s"], 1]]]]}], [["set_status", "aka_s"]]],
                ["when", [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[[{"tile": "7z", "attrs": ["golden"]}], 1]]]]}], [["set_status", "golden_chun"]]],
                ["when", [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[[{"tile": "7z", "attrs": ["golden"]}], 1], [["chun_pair"], 1]]]]}], [["set_status", "77z"]]],
                ["when", [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[[{"tile": "7z", "attrs": ["golden"]}], 1], [["chun_pair"], -1], [["chun"], 1]]]]}], [["set_status", "777z"]]],
                ["when", [{"name": "status", "opts": ["toyouko-momoko"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}], [["set_status", "riichi"]]],
                ["when", [{"name": "status", "opts": ["riichi"]}, {"name": "status_missing", "opts": ["ura_revealed"]}], [
                  ["set_status_all", "ura_revealed"],
                  ["when", [{"name": "tile_not_revealed", "opts": ["doraindicator_1"]}], [["reveal_tile", "1x"]]],
                  ["when", [{"name": "tile_not_revealed", "opts": ["doraindicator_2"]}], [["reveal_tile", "1x"]]],
                  ["when", [{"name": "tile_not_revealed", "opts": ["doraindicator_3"]}], [["reveal_tile", "1x"]]],
                  ["when", [{"name": "tile_not_revealed", "opts": ["doraindicator_4"]}], [["reveal_tile", "1x"]]],
                  ["when", [{"name": "tile_not_revealed", "opts": ["doraindicator_5"]}], [["reveal_tile", "1x"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_1"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_2"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_3"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_4"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_5"]}, {"name": "not_others_status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_5"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "tile_not_revealed", "opts": ["uraindicator_2"]}, {"name": "status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_2"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "tile_not_revealed", "opts": ["uraindicator_3"]}, {"name": "status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_3"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "tile_not_revealed", "opts": ["uraindicator_4"]}, {"name": "status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_4"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "tile_not_revealed", "opts": ["uraindicator_5"]}, {"name": "status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_5"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "tile_not_revealed", "opts": ["uraindicator_3"]}, {"name": "status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_3"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "tile_not_revealed", "opts": ["uraindicator_4"]}, {"name": "status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_4"]]],
                  ["when", [{"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "tile_not_revealed", "opts": ["uraindicator_5"]}, {"name": "status", "opts": ["takakamo-shizuno"]}], [["reveal_tile", "uraindicator_5"]]],
                  ["when", [{"name": "tile_not_revealed", "opts": ["uraindicator_1"]}], [["reveal_tile", "1x"]]],
                  ["when", [{"name": "tile_not_revealed", "opts": ["uraindicator_2"]}], [["reveal_tile", "1x"]]],
                  ["when", [{"name": "tile_not_revealed", "opts": ["uraindicator_3"]}], [["reveal_tile", "1x"]]],
                  ["when", [{"name": "tile_not_revealed", "opts": ["uraindicator_4"]}], [["reveal_tile", "1x"]]],
                  ["when", [{"name": "tile_not_revealed", "opts": ["uraindicator_5"]}], [["reveal_tile", "1x"]]]
                  ]],
                ["when_anyone", [{"name": "status", "opts": ["atago-hiroe", "tenpai"]}, {"name": "status_missing", "opts": ["riichi"]}], [["set_status", "atago_hiroe_no_tsumo_payment"]]],
                ["when", [{"name": "status", "opts": ["maya-yukiko"]}, "won_by_draw"], [["set_status_chii_victims", "double_tsumo_payment"]]],
                ["when", ["won_by_discard", {"name": "discarder_status", "opts": ["nelly-virsaladze"]}], [["set_discarder_status", "nelly_virsaladze_take_bets"]]],
                ["when", ["won_by_call", {"name": "caller_status", "opts": ["nelly-virsaladze"]}], [["set_caller_status", "nelly_virsaladze_take_bets"]]],
                ["when", [{"name": "status", "opts": ["tsuruta-himeko"]}], [["add_counter", "facedown_tiles", "num_facedown_tiles"]]]
               ]
  },
  "before_abortive_draw": {
    "actions": []
  },
  "before_exhaustive_draw": {
    "actions": [
      ["when_anyone", [{"name": "status", "opts": ["nelly-virsaladze"]}], [["set_status", "nelly_virsaladze_take_bets"]]]
    ]
  },
  "buttons": {
    "draft": {
      "display_name": "Draft Character Card",
      "show_when": [{"name": "status", "opts": ["match_start"]}],
      "actions": [["unset_status", "match_start"], ["draft_saki_card", 4]],
      "unskippable": true
    },
    "atarashi_ako": {
      "display_name": "Swap a discard with same suit in hand",
      "show_when": [{"name": "status_missing", "opts": ["match_start", "about_to_swap", "swap_interrupted"]}, {"name": "status", "opts": ["atarashi-ako", "just_called"]}, "not_just_discarded"],
      "actions": [
        ["big_text", "Atarashi Ako: swap!"],
        ["unset_status", "just_called"],
        ["mark", [["hand", 1, ["match_suit", "not_riichi"]], ["discard", 1, ["match_suit"]]]],
        ["push_message", "swapped a discard with a same-suit tile from hand (Atarashi Ako)"],
        ["set_status", "about_to_swap"],
        ["recalculate_buttons"], // allow interrupting swap
        ["unset_status", "about_to_swap"],
        ["ite", [{"name": "status", "opts": ["swap_interrupted"]}], [["clear_marking"]], [
          ["swap_marked_hand_and_discard"],
          ["when", [{"name": "others_status", "opts": ["miyanaga-teru"]}], [["add_honba"]]],
          ["recalculate_buttons"] // allow tsumo to pop up
        ]]
      ]
    },
    "atarashi_ako_dora": {
      "display_name": "Swap dora indicator with same suit in hand",
      "show_when": [{"name": "status_missing", "opts": ["match_start", "about_to_swap", "swap_interrupted"]}, {"name": "status", "opts": ["atarashi-ako", "just_called"]}, "not_just_discarded"],
      "actions": [
        ["big_text", "Atarashi Ako: swap!"],
        ["unset_status", "just_called"],
        ["mark", [["hand", 1, ["match_suit", "not_riichi"]], ["revealed_tile", 1, ["match_suit"]]]],
        ["push_message", "swapped a dora indicator with a same-suit tile from hand (Atarashi Ako)"],
        ["set_status", "about_to_swap"],
        ["recalculate_buttons"], // allow interrupting swap
        ["unset_status", "about_to_swap"],
        ["ite", [{"name": "status", "opts": ["swap_interrupted"]}], [["clear_marking"]], [
          ["swap_marked_hand_and_dora_indicator"],
          ["when", [{"name": "others_status", "opts": ["miyanaga-teru"]}], [["add_honba"]]],
          ["recalculate_buttons"] // allow tsumo to pop up
        ]]
      ]
    },
    "choe_myeonghwa": {
      "display_name": "Swap last discard with tile in hand",
      "show_when": [
        {"name": "status_missing", "opts": ["match_start", "about_to_swap"]},
        "someone_else_just_discarded",
        [
          [
            {"name": "seat_is", "opts": ["east"]},
            {"name": "match", "opts": [["last_discard"], [[[[["1z"]], 1]]]]}
          ],
          [
            {"name": "seat_is", "opts": ["south"]},
            {"name": "match", "opts": [["last_discard"], [[[[["2z"]], 1]]]]}
          ],
          [
            {"name": "seat_is", "opts": ["west"]},
            {"name": "match", "opts": [["last_discard"], [[[[["3z"]], 1]]]]}
          ],
          [
            {"name": "seat_is", "opts": ["north"]},
            {"name": "match", "opts": [["last_discard"], [[[[["4z"]], 1]]]]}
          ],
          [
            {"name": "round_wind_is", "opts": ["east"]},
            {"name": "match", "opts": [["last_discard"], [[[[["1z"]], 1]]]]}
          ],
          [
            {"name": "round_wind_is", "opts": ["south"]},
            {"name": "match", "opts": [["last_discard"], [[[[["2z"]], 1]]]]}
          ],
          [
            {"name": "round_wind_is", "opts": ["west"]},
            {"name": "match", "opts": [["last_discard"], [[[[["3z"]], 1]]]]}
          ],
          [
            {"name": "round_wind_is", "opts": ["north"]},
            {"name": "match", "opts": [["last_discard"], [[[[["4z"]], 1]]]]}
          ]
        ],
        {"name": "status", "opts": ["choe-myeonghwa"]}
      ],
      "actions": [
        ["big_text", "Choe Myeonghwa: swap!"],
        ["unset_status", "just_called"],
        ["mark", [["hand", 1, ["terminal_honor", "not_riichi"]], ["discard", 1, ["last_discard"]]]],
        ["push_message", "swapped a tile in hand with the last discard (Choe Myeonghwa)"],
        ["set_status", "about_to_swap"],
        ["recalculate_buttons"], // allow interrupting swap
        ["unset_status", "about_to_swap"],
        ["ite", [{"name": "status", "opts": ["swap_interrupted"]}], [["clear_marking"]], [
          ["swap_marked_hand_and_discard"],
          ["advance_turn"],
          ["when", [{"name": "others_status", "opts": ["miyanaga-teru"]}], [["add_honba"]]]
        ]]
      ]
    },
    "haramura_nodoka": {
      "display_name": "Discard facedown",
      "show_when": ["our_turn", {"name": "status", "opts": ["haramura-nodoka", "ready"]}, {"name": "status_missing", "opts": ["match_start", "haramura-nodoka_exhausted", "discard_facedown"]}],
      "actions": [
        ["big_text", "Haramura Nodoka: discard!"],
        ["set_status", "haramura-nodoka_exhausted", "discard_facedown"],
        ["push_message", "discarded facedown (Haramura Nodoka)"]
      ]
    },
    "ikeda_kana": {
      "display_name": "Inazuma Riichi",
      "show_when": [
        "our_turn",
        {"name": "not_status", "opts": ["match_start"]},
        {"name": "not_anyone_status", "opts": ["tried_to_ron"]},
        {"name": "status", "opts": ["ikeda-kana"]},
        "has_draw",
        {"name": "status_missing", "opts": ["riichi", "inazuma_riichi"]},
        {"name": "has_score", "opts": [5000]},
        "next_draw_possible",
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        {"name": "match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]}
      ],
      "actions": [
        ["big_text", "Inazuma Riichi"],
        ["set_status", "inazuma_riichi", "just_reached", "ippatsu"],
        ["push_message", "declared inazuma riichi"],
        ["when", [{"name": "others_status", "opts": ["miyanaga-teru"]}], [["add_honba"]]],
        ["when", [{"name": "everyone_status", "opts": ["riichi"]}], [
          ["add_score", -5000],
          ["put_down_riichi_stick"],
          ["put_down_riichi_stick"],
          ["put_down_riichi_stick"],
          ["put_down_riichi_stick"],
          ["put_down_riichi_stick"],
          ["pause", 1000],
          ["abortive_draw", "Suucha Riichi"]
        ]]
      ]
    },
    "kataoka_yuuki": {
      "display_name": "Place 4 tiles at the end of the live wall (last selection is haitei)",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["match_start", "kataoka-yuuki_exhausted"]}, {"name": "status", "opts": ["kataoka-yuuki"]}, {"name": "round_wind_is", "opts": ["east"]}],
      "actions": [
        ["big_text", "Kataoka Yuuki: mulligan!"],
        ["set_status", "kataoka-yuuki_exhausted"],
        ["mark", [["hand", 4, []]]],
        ["push_message", "added four tiles from hand to the end of the live wall, before drawing four more tiles (Kataoka Yuuki)"],
        ["extend_live_wall_with_marked"],
        ["draw", 4]
      ],
      "unskippable": true
    },
    "matano_seiko": {
      "display_name": "Set aside 4th tile from discards",
      "show_when": ["our_turn", {"name": "status", "opts": ["matano-seiko", "pon"]}, "called_tile_matches_any_discard"],
      "actions": [
        ["big_text", "Matano Seiko: set aside!"],
        ["unset_status", "pon"],
        ["mark", [["discard", 1, ["match_called_tile"]]]],
        ["push_message", "set aside the discarded fourth copy of the pon tile (Matano Seiko)"],
        ["set_aside_marked"]
      ],
      "unskippable": true
    },
    "matano_seiko_skip": {
      "display_name": "Skip",
      "show_when": ["our_turn", {"name": "status", "opts": ["matano-seiko", "pon"]}, "called_tile_matches_any_discard"],
      "actions": [["unset_status", "pon"]],
      "unskippable": true
    },
    "matsumi_yuu": {
      "display_name": "Pon red dragon with priority",
      "show_when": ["not_our_turn", {"name": "status", "opts": ["matsumi-yuu"]}, {"name": "match", "opts": [["hand", "draw"], [[[["chun_pair"], 1]]]]}, {"name": "match", "opts": [["others_discards"], [[[[["7z"]], 1]]]]}, "someone_else_just_discarded"],
      "actions": [
        ["big_text", "Matsumi Yuu: pon!"],
        ["mark", [["discard", 1, ["current_turn", "7z"]]]],
        ["push_message", "set aside the discarded fourth copy of the pon tile (Matano Seiko)"],
        ["pon_marked_discard"],
        ["cancel_deferred_actions"],
        ["unset_status_all", "just_reached"], ["set_status", "just_called"], ["set_status_all", "call_made"], ["set_status", "pon"], ["change_turn", "self"],
        ["when", [{"name": "others_status", "opts": ["miyanaga-teru"]}], [["add_honba"]]]
      ],
      "precedence_over": ["choe_myeonghwa", "chii", "pon", "riichi", "ikeda_kana", "daiminkan", "ankan", "kakan", "ron"]
    },
    "nanpo_kazue_nonskippable": {
      "display_name": "Place 2 tiles at the end of the dead wall (last selection is first kan draw)",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["match_start", "nanpo-kazue_exhausted"]}, {"name": "status", "opts": ["nanpo-kazue"]}, {"name": "round_wind_is", "opts": ["south"]}],
      "actions": [
        ["big_text", "Nanpo Kazue: mulligan!"],
        ["set_status", "nanpo-kazue_exhausted"],
        ["mark", [["hand", 2, []]], [["draw", 2]]],
        ["push_message", "drew two tiles and added two tiles from hand at the end of the dead wall (Nanpo Kazue)"],
        ["extend_dead_wall_with_marked"]
      ],
      "unskippable": true
    },
    "nanpo_kazue_skippable": {
      "display_name": "Place 2 tiles at the end of the dead wall (last selection is first kan draw)",
      "show_when": [{"name": "status_missing", "opts": ["match_start", "nanpo-kazue_exhausted2", "riichi"]}, {"name": "status", "opts": ["nanpo-kazue"]}, {"name": "round_wind_is", "opts": ["south"]}, "first_time_finished_second_row_discards"],
      "actions": [
        ["big_text", "Nanpo Kazue: mulligan!"],
        ["set_status", "nanpo-kazue_exhausted2"],
        ["mark", [["hand", 2, []]], [["draw", 2]]],
        ["push_message", "drew two tiles and added two tiles from hand at the end of the dead wall (Nanpo Kazue)"],
        ["extend_dead_wall_with_marked"]
      ]
    },
    "onjouji_toki_start": {
      "display_name": "Draw an extra tile and set it aside",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["match_start", "onjouji-toki_exhausted"]}, {"name": "status", "opts": ["onjouji-toki", "ready"]}],
      "actions": [
        ["big_text", "Onjouji Toki: set aside!"],
        ["set_status", "onjouji-toki_exhausted", "onjouji_toki_drew"],
        ["draw_aside"],
        ["push_message", "drew and set aside an extra tile (Onjouji Toki)"]
      ],
      "unskippable": true
    },
    "onjouji_toki_draw": {
      "display_name": "Draw aside tile",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["onjouji_toki_drew"]}, "has_aside", {"name": "status", "opts": ["onjouji-toki"]}],
      "actions": [
        ["big_text", "Onjouji Toki: draw!"],
        ["draw_from_aside"],
        ["push_message", "drew the tile they set aside (Onjouji Toki)"],
        ["set_status", "onjouji_toki_drew"]
      ],
      "unskippable": true
    },
    "onjouji_toki_nodraw": {
      "display_name": "Draw from wall",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["onjouji_toki_drew"]}, "has_aside", {"name": "status", "opts": ["onjouji-toki"]}],
      "actions": [
        ["draw"],
        ["set_status", "onjouji_toki_drew"]
      ],
      "unskippable": true
    },
    "onjouji_toki_swap": {
      "display_name": "Swap tile with aside",
      "show_when": ["our_turn", "has_draw", "not_just_discarded", "not_just_called", {"name": "status", "opts": ["onjouji-toki", "onjouji_toki_drew"]}, {"name": "status_missing", "opts": ["just_reached"]}, "has_aside"],
      "actions": [
        ["big_text", "Onjouji Toki: swap!"],
        ["mark", [["hand", 1, ["not_riichi"]]]],
        ["swap_marked_with_aside"],
        ["push_message", "swapped a tile from hand with the tile they set aside (Onjouji Toki)"],
        ["recalculate_buttons"] // allow tsumo to pop up
      ]
    },
    "sawamura_tomoki": {
      "display_name": "Discard facedown",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["match_start", "discard_facedown"]}, {"name": "status", "opts": ["sawamura-tomoki"]}, {"name": "others_status", "opts": ["ippatsu"]}, "has_draw", "not_just_discarded"],
      "actions": [
        ["big_text", "Sawamura Tomoki: discard!"],
        ["set_status", "discard_facedown"],
        ["push_message", "discarded facedown after being threatened by ippatsu (Sawamura Tomoki)"]
      ]
    },
    "shibuya_takami": {
      "display_name": "Draw from your discards",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["match_start", "discards_empty"]}, {"name": "status", "opts": ["shibuya-takami", "about_to_draw"]}, "not_just_discarded"],
      "actions": [
        ["big_text", "Shibuya Takami: set aside!"],
        ["unset_status", "about_to_draw"],
        ["mark", [["discard", 1, ["self"]]]],
        ["push_message", "drew of their discards facedown (Shibuya Takami)"],
        ["set_aside_marked"],
        ["draw_from_aside"],
        ["add_attr_drawn_tile", "facedown", "no_discard"]
      ],
      "unskippable": true
    },
    "shibuya_takami": {
      "display_name": "Set aside a discard as next draw",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["match_start", "discards_empty"]}, {"name": "status", "opts": ["shibuya-takami", "about_to_draw"]}, "not_just_discarded"],
      "actions": [
        ["big_text", "Shibuya Takami: set aside!"],
        ["unset_status", "about_to_draw"],
        ["mark", [["discard", 1, ["self"]]]],
        ["push_message", "drew of their discards facedown (Shibuya Takami)"],
        ["set_aside_marked"],
        ["draw_from_aside"],
        ["add_attr_drawn_tile", "facedown", "no_discard"]
      ],
      "unskippable": true
    },
    "shibuya_takami_skip": {
      "display_name": "Skip",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["match_start", "discards_empty"]}, {"name": "status", "opts": ["shibuya-takami", "about_to_draw"]}, "not_just_discarded"],
      "actions": [["unset_status", "about_to_draw"], ["draw", 1]],
      "unskippable": true
    },
    "takimi_haru": {
      "display_name": "Discard facedown",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["match_start", "discard_facedown"]}, {"name": "status", "opts": ["takimi-haru", "chii"]}, "not_just_discarded"],
      "actions": [
        ["big_text", "Takimi Haru: discard!"],
        ["set_status", "discard_facedown"],
        ["push_message", "discarded facedown after calling chii (Takimi Haru)"]
      ]
    },
    "amae_koromo": {
      "display_name": "Move haitei tile from live wall to dead wall",
      "show_when": ["our_turn",
        {"name": "status_missing", "opts": ["match_start"]},
        {"name": "status", "opts": ["amae-koromo"]},
        "just_discarded",
        "not_no_tiles_remaining"
      ],
      "actions": [
        ["big_text", "Amae Koromo: shift!"],
        ["shift_dead_wall_index", 1],
        ["push_message", "shifted a tile from the end of the live wall to the start of the dead wall (Amae Koromo)"],
        ["advance_turn"]
      ]
    },
    "amae_koromo_2": {
      "display_name": "Move two tiles instead",
      "show_when": ["our_turn",
        {"name": "status_missing", "opts": ["match_start"]},
        {"name": "status", "opts": ["amae-koromo"]},
        {"name": "not_status_missing", "opts": ["riichi", "just_reached"]},
        {"name": "not_others_status", "opts": ["riichi"]},
        "just_discarded",
        {"name": "tiles_remaining", "opts": [2]}
      ],
      "actions": [
        ["big_text", "Amae Koromo: shift 2!"],
        ["shift_dead_wall_index", 2],
        ["push_message", "shifted two tiles from the end of the live wall to the start of the dead wall (Amae Koromo)"],
        ["advance_turn"]
      ]
    },
    "atago_kinue": {
      "display_name": "Bet 1000 to change wait to aside tiles",
      "show_when": ["our_turn",
        {"name": "status_missing", "opts": ["match_start"]},
        {"name": "status", "opts": ["atago-kinue", "tenpai", "ready"]},
        {"name": "status_missing", "opts": ["atago_kinue_aside_waits"]},
        "not_just_discarded",
        "has_aside"
      ],
      "actions": [
        ["big_text", "Atago Kinue: change waits!"],
        ["bet_points", 1000],
        ["set_status", "atago_kinue_aside_waits", "just_changed_atago_kinue_aside_waits"],
        ["set_tile_alias", [["any", "discard"]], [
          "1m", "2m", "3m", "4m", "5m", "6m", "7m", "8m", "9m",
          "1p", "2p", "3p", "4p", "5p", "6p", "7p", "8p", "9p",
          "1s", "2s", "3s", "4s", "5s", "6s", "7s", "8s", "9s",
          "1z", "2z", "3z", "4z", "5z", "6z", "7z"]],
        ["push_message", "bet 1000 to wait on aside tiles (Atago Kinue)"]
      ]
    },
    "kunihiro_hajime": {
      "display_name": "Swap a number tile with any same number discard",
      "show_when": [
        {"name": "status", "opts": ["kunihiro-hajime", "ready"]},
        {"name": "status_missing", "opts": ["match_start", "discards_empty", "just_swapped", "kunihiro-hajime_exhausted", "just_reached", "about_to_swap"]},
        "our_turn",
        "not_just_discarded"
      ],
      "actions": [
        ["big_text", "Kunihiro Hajime: swap!"],
        ["set_status", "just_swapped", "kunihiro-hajime_exhausted"],
        ["mark", [["hand", 1, ["match_number", "not_riichi"]], ["discard", 1, ["match_number"]]]],
        ["push_message", "swapped a discard with a same-number tile from hand (Kunihiro Hajime)"],
        ["set_status", "about_to_swap"],
        ["recalculate_buttons"], // allow interrupting swap
        ["unset_status", "about_to_swap"],
        ["ite", [{"name": "status", "opts": ["swap_interrupted"]}], [["clear_marking"]], [
          ["swap_marked_hand_and_discard"],
          ["when", [{"name": "others_status", "opts": ["miyanaga-teru"]}], [["add_honba"]]],
          ["recalculate_buttons"] // allow tsumo to pop up
        ]]
      ]
    },
    "kunihiro_hajime_interrupt": {
      "display_name": "Swap a number tile with any same number discard",
      "show_when": [
        {"name": "status", "opts": ["kunihiro-hajime"]},
        {"name": "status_missing", "opts": ["match_start", "discards_empty", "just_swapped", "just_reached", "about_to_swap"]},
        [
          {"name": "others_status", "opts": ["just_reached"]},
          {"name": "others_status", "opts": ["kan"]}
        ]
      ],
      "actions": [
        ["big_text", "Kunihiro Hajime: swap!"],
        ["set_status", "just_swapped", "kunihiro-hajime_exhausted"],
        ["mark", [["hand", 1, ["match_number", "not_riichi"]], ["discard", 1, ["match_number"]]]],
        ["push_message", "swapped a discard with a same-number tile from hand (Kunihiro Hajime)"],
        ["set_status", "about_to_swap"],
        ["recalculate_buttons"], // allow interrupting swap
        ["unset_status", "about_to_swap"],
        ["ite", [{"name": "status", "opts": ["swap_interrupted"]}], [["clear_marking"]], [
          ["swap_marked_hand_and_discard"],
          ["when", [{"name": "others_status", "opts": ["miyanaga-teru"]}], [["add_honba"]]],
          ["recalculate_buttons"] // allow tsumo to pop up
        ]]
      ]
    },
    "motouchi_naruka_interrupt_call": {
      "display_name": "Interrupt call",
      "show_when": [
        {"name": "status", "opts": ["motouchi-naruka"]},
        "just_discarded",
        [
          {"name": "others_status", "opts": ["about_to_call", "chii"]},
          {"name": "others_status", "opts": ["about_to_call", "pon"]},
          {"name": "others_status", "opts": ["about_to_call", "daiminkan"]}
        ],
        {"name": "not_others_status", "opts": ["call_interrupted"]},
        {"name": "status_missing", "opts": ["motouchi_naruka_skip_interrupt"]},
        {"name": "has_score", "opts": [1000]}
      ],
      "actions": [
        ["big_text", "Motouchi Naruka: interrupt!"],
        ["bet_points", 1000],
        ["push_message", "bet 1000 points to prevent discard being called (Motouchi Naruka)"],
        ["when_anyone", [{"name": "status", "opts": ["about_to_call"]}], [["set_status", "call_interrupted"], ["unset_status", "about_to_call"]]],
        ["advance_turn"]
      ],
      "unskippable": true
    },
    "motouchi_naruka_interrupt_swap": {
      "display_name": "Interrupt swap",
      "show_when": [
        {"name": "status", "opts": ["motouchi-naruka"]},
        {"name": "others_status", "opts": ["about_to_swap"]},
        {"name": "not_others_status", "opts": ["swap_interrupted"]},
        {"name": "status_missing", "opts": ["motouchi_naruka_skip_interrupt"]},
        {"name": "has_score", "opts": [1000]}
      ],
      "actions": [
        ["big_text", "Motouchi Naruka: interrupt!"],
        ["bet_points", 1000],
        ["push_message", "bet 1000 points to prevent a tile swap (Motouchi Naruka)"],
        ["when_anyone", [{"name": "status", "opts": ["about_to_swap"]}], [["set_status", "swap_interrupted"]]],
        ["resume_deferred_actions"]
      ],
      "unskippable": true
    },
    "motouchi_naruka_interrupt_facedown": {
      "display_name": "Interrupt facedown discard",
      "show_when": [
        {"name": "status", "opts": ["motouchi-naruka"]},
        "someone_else_just_discarded",
        {"name": "others_status", "opts": ["discard_facedown"]},
        {"name": "status_missing", "opts": ["motouchi_naruka_skip_interrupt"]},
        {"name": "has_score", "opts": [1000]}
      ],
      "actions": [
        ["big_text", "Motouchi Naruka: interrupt!"],
        ["bet_points", 1000],
        ["push_message", "bet 1000 points to prevent a facedown discard (Motouchi Naruka)"],
        ["flip_last_discard_faceup"],
        ["resume_deferred_actions"]
      ],
      "unskippable": true
    },
    "motouchi_naruka_interrupt_call_skip": {
      "display_name": "Skip",
      "show_when": [
        {"name": "status", "opts": ["motouchi-naruka"]},
        "just_discarded",
        [
          {"name": "others_status", "opts": ["about_to_call", "chii"]},
          {"name": "others_status", "opts": ["about_to_call", "pon"]},
          {"name": "others_status", "opts": ["about_to_call", "daiminkan"]}
        ],
        {"name": "not_others_status", "opts": ["call_interrupted"]},
        {"name": "status_missing", "opts": ["motouchi_naruka_skip_interrupt"]}
      ],
      "actions": [["set_status", "motouchi_naruka_skip_interrupt"], ["resume_deferred_actions"]],
      "unskippable": true
    },
    "motouchi_naruka_interrupt_swap_facedown_skip": {
      "display_name": "Skip",
      "show_when": [
        {"name": "status", "opts": ["motouchi-naruka"]},
        [
          {"name": "others_status", "opts": ["about_to_swap"]},
          [
            "someone_else_just_discarded",
            {"name": "others_status", "opts": ["discard_facedown"]}
          ]
        ],
        {"name": "not_others_status", "opts": ["swap_interrupted"]},
        {"name": "status_missing", "opts": ["motouchi_naruka_skip_interrupt"]}
      ],
      "actions": [["set_status", "motouchi_naruka_skip_interrupt"], ["resume_deferred_actions"]],
      "unskippable": true
    },
    "maya_yukiko": {
      "display_name": "Chii with priority",
      "call": [[-2, -1], [-1, 1], [1, 2]],
      "call_name": "chii",
      "call_style": {"kamicha": ["call_sideways", 0, 1], "toimen": [0, "call_sideways", 1], "shimocha": [0, 1, "call_sideways"]},
      "call_conditions": [{"name": "not_call_contains", "opts": [[["7z", "golden"]], 1]}],
      "show_when": [
        "not_our_turn",
        {"name": "status", "opts": ["maya-yukiko"]},
        {"name": "not_anyone_status", "opts": ["tried_to_ron"]},
        "not_no_tiles_remaining",
        "someone_else_just_discarded",
        {"name": "status_missing", "opts": ["riichi", "atago_kinue_aside_waits", "about_to_call", "call_interrupted"]},
        "call_available"
      ],
      "actions": [
        ["big_text", "Maya Yukiko: chii!"],
        ["set_status", "about_to_call", "chii"],
        ["recalculate_buttons"], // allow interrupt
        ["unset_status", "about_to_call"],
        ["unless", [{"name": "status", "opts": ["call_interrupted"]}], [
          ["when", [{"name": "others_status", "opts": ["aislinn-wishart"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}], [["bet_points", 1500], ["push_message", "paid 1500 points to open their hand (Aislinn Wishart)"]]],
          ["call"], ["unset_status_all", "just_reached"], ["set_status", "just_called"], ["set_status_all", "call_made"], ["change_turn", "self"],
          ["push_message", "called chii with priority (Maya Yukiko)"]
        ]]
      ],
      "precedence_over": ["choe_myeonghwa", "chii", "pon", "riichi", "ikeda_kana", "daiminkan", "ankan", "kakan", "ron"]
    },
    "shirouzu_mairu_1_manzu": {
      "display_name": "Manzu",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["shirouzu_mairu_drew", "extra_turn"]}, {"name": "status", "opts": ["shirouzu-mairu"]}],
      "actions": [
        ["set_status", "shirouzu_mairu_drew"],
        ["draw"],
        ["add_attr_drawn_tile", "revealed"],
        ["when", [{"name": "match", "opts": [["draw"], [[[["1m","2m","3m","4m","5m","6m","7m","8m","9m"], 1]]]]}], [
          ["push_message", "correctly predicted that their next draw is manzu (Shirouzu Mairu)"],
          ["big_text", "Shirouzu Mairu: switch out!"],
          ["flip_first_visible_discard_facedown"],
          ["unset_status", "shirouzu-mairu"],
          ["set_status", "tsuruta-himeko"]
        ]]
      ],
      "unskippable": true
    },
    "shirouzu_mairu_2_pinzu": {
      "display_name": "Pinzu",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["shirouzu_mairu_drew", "extra_turn"]}, {"name": "status", "opts": ["shirouzu-mairu"]}],
      "actions": [
        ["set_status", "shirouzu_mairu_drew"],
        ["draw"],
        ["add_attr_drawn_tile", "revealed"],
        ["when", [{"name": "match", "opts": [["draw"], [[[["1p","2p","3p","4p","5p","6p","7p","8p","9p"], 1]]]]}], [
          ["push_message", "correctly predicted that their next draw is pinzu (Shirouzu Mairu)"],
          ["big_text", "Shirouzu Mairu: switch out!"],
          ["flip_first_visible_discard_facedown"],
          ["unset_status", "shirouzu-mairu"],
          ["set_status", "tsuruta-himeko"]
        ]]
      ],
      "unskippable": true
    },
    "shirouzu_mairu_3_souzu": {
      "display_name": "Souzu",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["shirouzu_mairu_drew", "extra_turn"]}, {"name": "status", "opts": ["shirouzu-mairu"]}],
      "actions": [
        ["set_status", "shirouzu_mairu_drew"],
        ["draw"],
        ["add_attr_drawn_tile", "revealed"],
        ["when", [{"name": "match", "opts": [["draw"], [[[["1s","2s","3s","4s","5s","6s","7s","8s","9s"], 1]]]]}], [
          ["push_message", "correctly predicted that their next draw is souzu (Shirouzu Mairu)"],
          ["big_text", "Shirouzu Mairu: switch out!"],
          ["flip_first_visible_discard_facedown"],
          ["unset_status", "shirouzu-mairu"],
          ["set_status", "tsuruta-himeko"]
        ]]
      ],
      "unskippable": true
    },
    "shirouzu_mairu_4_jihai": {
      "display_name": "Jihai",
      "show_when": ["our_turn", {"name": "status_missing", "opts": ["shirouzu_mairu_drew", "extra_turn"]}, {"name": "status", "opts": ["shirouzu-mairu"]}],
      "actions": [
        ["set_status", "shirouzu_mairu_drew"],
        ["draw"],
        ["add_attr_drawn_tile", "revealed"],
        ["when", [{"name": "match", "opts": [["draw"], [[[["1z","2z","3z","4z","5z","6z","7z"], 1]]]]}], [
          ["push_message", "correctly predicted that their next draw is jihai (Shirouzu Mairu)"],
          ["big_text", "Shirouzu Mairu: switch out!"],
          ["flip_first_visible_discard_facedown"],
          ["unset_status", "shirouzu-mairu"],
          ["set_status", "tsuruta-himeko"]
        ]]
      ],
      "unskippable": true
    },
    "chii": {
      "display_name": "Chii",
      "call": [[-2, -1], [-1, 1], [1, 2]],
      "call_style": {"kamicha": ["call_sideways", 0, 1], "toimen": [0, "call_sideways", 1], "shimocha": [0, 1, "call_sideways"]},
      "call_conditions": [{"name": "not_call_contains", "opts": [[["7z", "golden"]], 1]}],
      "show_when": [
        "not_our_turn",
        {"name": "not_anyone_status", "opts": ["tried_to_ron"]},
        "not_no_tiles_remaining",
        "kamicha_discarded",
        {"name": "status_missing", "opts": ["riichi", "atago_kinue_aside_waits", "about_to_call", "call_interrupted"]},
        "call_available"
      ],
      "actions": [
        ["big_text", "Chii"],
        ["set_status", "about_to_call", "chii"],
        ["recalculate_buttons"], // allow interrupting call
        ["unset_status", "about_to_call"],
        ["unless", [{"name": "status", "opts": ["call_interrupted"]}], [
          ["when", [{"name": "others_status", "opts": ["aislinn-wishart"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}], [["bet_points", 1500], ["push_message", "paid 1500 points to open their hand (Aislinn Wishart)"]]],
          ["call"], ["unset_status_all", "just_reached"], ["set_status", "just_called"], ["set_status_all", "call_made"], ["change_turn", "self"],
          ["when", [{"name": "status", "opts": ["inoue-jun"]}, {"name": "not_status", "opts": ["extra_turn"]}], [
            ["set_status", "extra_turn"],
            ["big_text", "Inoue Jun: extra turn!"],
            ["add_score", 500],
            ["add_score", -500, "last_discarder"],
            ["push_message", "took 500 points and an extra turn by calling (Inoue Jun)"],
            ["when", [{"name": "others_status", "opts": ["ippatsu"]}], [["set_status", "inoue_jun_broke_ippatsu"]]]
          ]]
        ]]
      ]
    },
    "pon": {
      "display_name": "Pon",
      "call": [[0, 0]],
      "call_style": {"kamicha": ["call_sideways", 0, 1], "toimen": [0, "call_sideways", 1], "shimocha": [0, 1, "call_sideways"]},
      "call_conditions": [{"name": "not_call_contains", "opts": [[["7z", "golden"]], 1]}],
      "show_when": [
        "not_our_turn",
        {"name": "not_anyone_status", "opts": ["tried_to_ron"]},
        "not_no_tiles_remaining", "someone_else_just_discarded",
        {"name": "status_missing", "opts": ["riichi", "atago_kinue_aside_waits", "about_to_call", "call_interrupted"]},
        "call_available",
        {"name": "status_missing", "opts": ["mase-yuuko"]},
        [
          {"name": "not_others_status", "opts": ["aislinn-wishart"]},
          {"name": "not_has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
          {"name": "has_score", "opts": [1500]}
        ]
      ],
      "actions": [
        ["big_text", "Pon"],
        ["set_status", "about_to_call", "pon"],
        ["recalculate_buttons"], // allow interrupting call
        ["unset_status", "about_to_call"],
        ["unless", [{"name": "status", "opts": ["call_interrupted"]}], [
          ["when", [{"name": "others_status", "opts": ["aislinn-wishart"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}], [["add_score", -1500], ["push_message", "paid 1500 points to open their hand (Aislinn Wishart)"]]],
          ["call"], ["unset_status_all", "just_reached"], ["set_status", "just_called"], ["set_status_all", "call_made"], ["change_turn", "self"],
          ["when", [{"name": "status", "opts": ["inoue-jun"]}, {"name": "not_status", "opts": ["extra_turn"]}], [
            ["set_status", "extra_turn"],
            ["big_text", "Inoue Jun: extra turn!"],
            ["add_score", 500],
            ["add_score", -500, "last_discarder"],
            ["push_message", "took 500 points and an extra turn by calling (Inoue Jun)"],
            ["when", [{"name": "others_status", "opts": ["ippatsu"]}], [["set_status", "inoue_jun_broke_ippatsu"]]]
          ]]
        ]]
      ],
      "precedence_over": ["chii", "pon"]
    },
    "daiminkan": {
      "display_name": "Kan",
      "call": [[0, 0, 0]],
      "call_style": {"kamicha": ["call_sideways", 0, 1, 2], "toimen": [0, "call_sideways", 1, 2], "shimocha": [0, 1, 2, "call_sideways"]},
      "call_conditions": [{"name": "not_call_contains", "opts": [[["7z", "golden"]], 1]}],
      "show_when": [
        "not_our_turn",
        {"name": "not_anyone_status", "opts": ["tried_to_ron"]},
        "not_no_tiles_remaining",
        "someone_else_just_discarded",
        {"name": "status_missing", "opts": ["riichi", "atago_kinue_aside_waits", "about_to_call", "call_interrupted"]},
        "call_available",
        {"name": "status_missing", "opts": ["mase-yuuko"]},
        [
          {"name": "not_others_status", "opts": ["aislinn-wishart"]},
          {"name": "not_has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
          {"name": "has_score", "opts": [1500]}
        ]
      ],
      "actions": [
        ["big_text", "Kan"],
        ["set_status", "about_to_call", "daiminkan"],
        ["recalculate_buttons"], // allow interrupting call
        ["unset_status", "about_to_call"],
        ["unless", [{"name": "status", "opts": ["call_interrupted"]}], [
          ["when", [{"name": "others_status", "opts": ["aislinn-wishart"]}, {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}], [["add_score", -1500], ["push_message", "paid 1500 points to open their hand (Aislinn Wishart)"]]],
          ["call"], ["unset_status_all", "just_reached"], ["set_status", "just_called"], ["set_status_all", "call_made"], ["change_turn", "self"],
          ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_5"]}], [["reveal_tile", "doraindicator_5"]]],
          ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_4"]}], [["reveal_tile", "doraindicator_4"]]],
          ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_3"]}], [["reveal_tile", "doraindicator_3"]]],
          ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_2"]}], [["reveal_tile", "doraindicator_2"]]],
          ["set_status", "kan"],
          ["when", [{"name": "tile_drawn", "opts": ["kandraw_3_lazy"]}, {"name": "tile_not_drawn", "opts": ["kandraw_4_lazy"]}], [
            ["when", [{"name": "match", "opts": [["calls"], [[[["daiminkan", "ankan", "kakan"], 4]]]]}], [["set_status", "suukantsu"]]],
            ["draw", 1, "kandraw_4_lazy"]
          ]],
          ["when", [{"name": "tile_drawn", "opts": ["kandraw_2_lazy"]}, {"name": "tile_not_drawn", "opts": ["kandraw_3_lazy"]}], [["draw", 1, "kandraw_3_lazy"]]],
          ["when", [{"name": "tile_drawn", "opts": ["kandraw_1_lazy"]}, {"name": "tile_not_drawn", "opts": ["kandraw_2_lazy"]}], [["draw", 1, "kandraw_2_lazy"]]],
          ["when", [{"name": "tile_not_drawn", "opts": ["kandraw_1_lazy"]}], [["draw", 1, "kandraw_1_lazy"]]],
          ["add_attr_drawn_tile", "rinshan"],
          ["when", [{"name": "status", "opts": ["inoue-jun"]}, {"name": "not_status", "opts": ["extra_turn"]}], [
            ["set_status", "extra_turn"],
            ["big_text", "Inoue Jun: extra turn!"],
            ["add_score", 500],
            ["add_score", -500, "last_discarder"],
            ["push_message", "took 500 points and an extra turn by calling (Inoue Jun)"],
            ["when", [{"name": "others_status", "opts": ["ippatsu"]}], [["set_status", "inoue_jun_broke_ippatsu"]]]
          ]]
        ]]
      ],
      "precedence_over": ["chii", "pon", "daiminkan"]
    },
    "ankan": {
      "display_name": "Ankan",
      "call": [[0, 0, 0]],
      "call_style": {"self": ["1x", 0, 1, "1x"]},
      "call_conditions": [
        {"name": "not_call_contains", "opts": [[["7z", "golden"]], 1]},
        [
          {"name": "not_status", "opts": ["riichi"]},
          {"name": "not_call_changes_waits", "opts": ["win"]}
        ]
      ],
      "show_when": [
        "our_turn", {"name": "not_status", "opts": ["match_start"]}, {"name": "not_anyone_status", "opts": ["tried_to_ron"]}, "not_no_tiles_remaining", "has_draw", "self_call_available", {"name": "status_missing", "opts": ["just_reached"]},
        [
          {"name": "not_status", "opts": ["riichi"]},
          {"name": "not_call_would_change_waits", "opts": ["win"]}
        ],
        [
          {"name": "not_status", "opts": ["kataoka-yuuki"]},
          {"name": "not_round_wind_is", "opts": ["east"]},
          {"name": "status", "opts": ["kataoka-yuuki_exhausted"]}
        ],
        [
          {"name": "not_status", "opts": ["nanpo-kazue"]},
          {"name": "not_round_wind_is", "opts": ["south"]},
          {"name": "status", "opts": ["nanpo-kazue_exhausted"]}
        ],
        [
          {"name": "not_status", "opts": ["onjouji-toki"]},
          {"name": "status", "opts": ["onjouji-toki_exhausted"]}
        ],
        {"name": "status_missing", "opts": ["mase-yuuko"]}
      ],
      "actions": [
        ["big_text", "Kan"], ["self_call"], ["unset_status_all", "just_reached"], ["set_status", "just_called"], ["set_status_all", "call_made"],
        ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_5"]}], [["reveal_tile", "doraindicator_5"]]],
        ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_4"]}], [["reveal_tile", "doraindicator_4"]]],
        ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_3"]}], [["reveal_tile", "doraindicator_3"]]],
        ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_2"]}], [["reveal_tile", "doraindicator_2"]]],
        ["set_status", "kan", "ankan"],
        ["when", [{"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_5"]}], [["reveal_tile", "doraindicator_5"]]],
        ["when", [{"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_4"]}], [["reveal_tile", "doraindicator_4"]]],
        ["when", [{"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_3"]}], [["reveal_tile", "doraindicator_3"]]],
        ["when", [{"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_2"]}], [["reveal_tile", "doraindicator_2"]]],
        ["when", [{"name": "tile_drawn", "opts": ["kandraw_3_lazy"]}, {"name": "tile_not_drawn", "opts": ["kandraw_4_lazy"]}], [
          ["when", [{"name": "match", "opts": [["calls"], [[[["daiminkan", "ankan", "kakan"], 4]]]]}], [["set_status", "suukantsu"]]],
          ["draw", 1, "kandraw_4_lazy"]
        ]],
        ["when", [{"name": "tile_drawn", "opts": ["kandraw_2_lazy"]}, {"name": "tile_not_drawn", "opts": ["kandraw_3_lazy"]}], [["draw", 1, "kandraw_3_lazy"]]],
        ["when", [{"name": "tile_drawn", "opts": ["kandraw_1_lazy"]}, {"name": "tile_not_drawn", "opts": ["kandraw_2_lazy"]}], [["draw", 1, "kandraw_2_lazy"]]],
        ["when", [{"name": "tile_not_drawn", "opts": ["kandraw_1_lazy"]}], [["draw", 1, "kandraw_1_lazy"]]],
        ["add_attr_drawn_tile", "rinshan"]
      ]
    },
    "kakan": {
      "display_name": "Kan",
      "call": [[0, 0, 0]],
      "upgrades": "pon",
      "call_conditions": [{"name": "not_call_contains", "opts": [[["7z", "golden"]], 1]}],
      "show_when": ["our_turn", {"name": "not_status", "opts": ["match_start"]}, {"name": "not_anyone_status", "opts": ["tried_to_ron"]}, "not_no_tiles_remaining", "has_draw", "can_upgrade_call", {"name": "status_missing", "opts": ["just_reached"]}],
      "actions": [
        ["big_text", "Kan"], ["upgrade_call"], ["unset_status_all", "just_reached"], ["set_status", "just_called"], ["set_status_all", "call_made"],
        ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_4"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_5"]}], [["reveal_tile", "doraindicator_5"]]],
        ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_3"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_4"]}], [["reveal_tile", "doraindicator_4"]]],
        ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_2"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_3"]}], [["reveal_tile", "doraindicator_3"]]],
        ["when", [{"name": "status", "opts": ["kan"]}, {"name": "not_status", "opts": ["ankan"]}, {"name": "tile_revealed", "opts": ["doraindicator_1"]}, {"name": "tile_not_revealed", "opts": ["doraindicator_2"]}], [["reveal_tile", "doraindicator_2"]]],
        ["set_status", "kan"],
        ["when", [{"name": "tile_drawn", "opts": ["kandraw_3_lazy"]}, {"name": "tile_not_drawn", "opts": ["kandraw_4_lazy"]}], [
          ["when", [{"name": "match", "opts": [["calls"], [[[["daiminkan", "ankan", "kakan"], 4]]]]}], [["set_status", "suukantsu"]]],
          ["draw", 1, "kandraw_4_lazy"]
        ]],
        ["when", [{"name": "tile_drawn", "opts": ["kandraw_2_lazy"]}, {"name": "tile_not_drawn", "opts": ["kandraw_3_lazy"]}], [["draw", 1, "kandraw_3_lazy"]]],
        ["when", [{"name": "tile_drawn", "opts": ["kandraw_1_lazy"]}, {"name": "tile_not_drawn", "opts": ["kandraw_2_lazy"]}], [["draw", 1, "kandraw_2_lazy"]]],
        ["when", [{"name": "tile_not_drawn", "opts": ["kandraw_1_lazy"]}], [["draw", 1, "kandraw_1_lazy"]]],
        ["add_attr_drawn_tile", "rinshan"]
      ]
    },
    "riichi": {
      "display_name": "Riichi",
      "show_when": [
        "our_turn",
        {"name": "not_status", "opts": ["match_start"]},
        {"name": "not_anyone_status", "opts": ["tried_to_ron"]},
        {"name": "hand_tile_count", "opts": [2, 5, 8, 11, 14]},
        "not_just_discarded",
        "not_just_called",
        {"name": "status_missing", "opts": ["riichi", "inazuma_riichi"]},
        {"name": "has_score", "opts": [1000]},
        "next_draw_possible",
        {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]},
        [
          {"name": "match", "opts": [["hand", "calls", "draw"], ["tenpai_14", "kokushi_tenpai"]]},
          [
            {"name": "status", "opts": ["kakura-kurumi"]},
            {"name": "match", "opts": [["hand", "calls", "draw"], ["kakura_kurumi_tenpai"]]}
          ]
        ],
        [
          {"name": "not_status", "opts": ["kataoka-yuuki"]},
          {"name": "not_round_wind_is", "opts": ["east"]},
          {"name": "status", "opts": ["kataoka-yuuki_exhausted"]}
        ],
        [
          {"name": "not_status", "opts": ["nanpo-kazue"]},
          {"name": "not_round_wind_is", "opts": ["south"]},
          {"name": "status", "opts": ["nanpo-kazue_exhausted"]}
        ],
        [
          {"name": "not_status", "opts": ["onjouji-toki"]},
          {"name": "status", "opts": ["onjouji-toki_exhausted"]}
        ]
      ],
      "actions": [
        ["big_text", "Riichi"],
        ["when", [{"name": "others_status", "opts": ["miyanaga-teru"]}], [["add_honba"]]],
        ["set_status", "riichi", "just_reached", "ippatsu"],
        ["when", [{"name": "others_status", "opts": ["riichi"]}], [["set_status", "chasing"]]],
        ["push_message", "declared riichi"],
        ["when", [{"name": "status", "opts": ["discards_empty"]}, "no_calls_yet"], [["set_status", "double_riichi"]]],
        ["when", [{"name": "status", "opts": ["ikeda-kana"]}, {"name": "placement", "opts": [4]}], [["set_status_all", "triple_noten_payments"]]],
        ["when", [{"name": "others_status", "opts": ["miyanaga-teru"]}], [["add_honba"]]],
        ["when", [{"name": "everyone_status", "opts": ["riichi"]}], [
          ["add_score", -1000],
          ["put_down_riichi_stick"],
          ["pause", 1000],
          ["abortive_draw", "Suucha Riichi"]
        ]],
        ["when", [{"name": "status", "opts": ["atago-hiroe"]}], [
          ["clear_tile_aliases"],
          ["set_tile_alias", ["0m"], ["5m"]],
          ["set_tile_alias", ["0p"], ["5p"]],
          ["set_tile_alias", ["0s"], ["5s"]]
        ]],
        ["when", [{"name": "status", "opts": ["karijuku-tomoe"]}], [
          ["set_tile_alias", [["5z", "discard"], ["5z", "draw"]], [
            "1m", "2m", "3m", "4m", "5m", "6m", "7m", "8m", "9m",
            "1p", "2p", "3p", "4p", "5p", "6p", "7p", "8p", "9p",
            "1s", "2s", "3s", "4s", "5s", "6s", "7s", "8s", "9s",
            "1z", "2z", "3z", "4z", "5z", "6z", "7z"]]
        ]],
        ["when", [{"name": "status", "opts": ["nelly-virsaladze"]}, "dealt_in_last_round"], [["add_counter", "riichi_turn", 1], ["add_counter", "riichi_turn", "num_discards"]]],
        ["when", [{"name": "status", "opts": ["ryuumonbuchi-touka"]}], [["set_status", "score_as_dealer"]]],
        ["when", [{"name": "status", "opts": ["shirouzu-mairu"]}], [
          ["flip_first_visible_discard_facedown"],
          ["flip_first_visible_discard_facedown"],
          ["unset_status", "shirouzu-mairu"],
          ["set_status", "tsuruta-himeko"]
        ]],
        ["when_anyone", [{"name": "status", "opts": ["tsuruta-himeko"]}, {"name": "status_missing", "opts": ["riichi"]}], [
          ["big_text", "Tsuruta Himeko: switch out!"],
          ["unset_status", "tsuruta-himeko"],
          ["set_status", "shirouzu-mairu"]
        ]]
      ]
    },
    "ron": {
      "display_name": "Ron",
      "show_when": [
        "not_our_turn",
        {"name": "status_missing", "opts": ["just_reached", "about_to_call"]},
        [
          {"name": "status_missing", "opts": ["furiten"]},
          {"name": "status", "opts": ["atago-hiroe", "riichi"]},
          {"name": "status", "opts": ["atago-kinue", "atago_kinue_aside_waits"]}
        ],
        {"name": "not_anyone_status", "opts": ["tried_to_ron"]},
        "someone_else_just_discarded",
        "last_discard_exists",
        [
          {"name": "status", "opts": ["atago-kinue", "atago_kinue_aside_waits"]},
          {"name": "match", "opts": [["hand", "calls", "last_discard"], ["win"]]},
          [
            {"name": "status", "opts": ["miyanaga-saki"]},
            {"name": "has_attr", "opts": ["last_discard", "rinshan"]},
            {"name": "match", "opts": [["hand", "calls"], ["tenpai"]]}
          ],
          [
            {"name": "status", "opts": ["amae-koromo"]},
            {"name": "has_attr", "opts": ["last_discard", "haitei"]},
            {"name": "match", "opts": [["hand", "calls"], ["tenpai"]]}
          ],
          [
            {"name": "status", "opts": ["kakura-kurumi", "riichi"]},
            {"name": "match", "opts": [["hand", "calls", "last_discard"], ["kakura_kurumi_win"]]}
          ]
        ],
        [
          {"name": "not_status", "opts": ["atago-kinue", "atago_kinue_aside_waits"]},
          {"name": "match", "opts": [["aside_unique", "last_discard"], [["nojoker", [["pair"], 1]]]]}
        ],
        [
          {"name": "has_yaku_with_discard", "opts": [1, ["yaku", "yakuman"]]},
          {"name": "status", "opts": ["senoo-kaori"]}
        ],
        [
          {"name": "not_others_status", "opts": ["choe-myeonghwa"]},
          [
            {"name": "seat_is", "opts": ["east"]},
            [
              [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["2z"]], 1]]]]}],
              [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["3z"]], 1]]]]}],
              [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["4z"]], 1]]]]}]
             ]
          ],
          [
            {"name": "seat_is", "opts": ["south"]},
            [
              [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["3z"]], 1]]]]}],
              [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["4z"]], 1]]]]}],
              [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["1z"]], 1]]]]}]
            ]
          ],
          [
            {"name": "seat_is", "opts": ["west"]},
            [
              [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["4z"]], 1]]]]}],
              [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["1z"]], 1]]]]}],
              [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["2z"]], 1]]]]}]
            ]
          ],
          [
            {"name": "seat_is", "opts": ["north"]},
            [
              [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["1z"]], 1]]]]}],
              [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["2z"]], 1]]]]}],
              [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_discard"], [[[[["3z"]], 1]]]]}]
            ]
          ],
          "has_yakuman_with_discard"
        ]
      ],
      "actions": [
        ["big_text", "Ron"], ["pause", 1000], ["set_status", "tried_to_ron"], ["recalculate_buttons"], ["reveal_hand"], ["win_by_discard"]
      ],
      "precedence_over": ["chii", "pon", "kan", "riichi", "daiminkan", "ankan", "kakan"]
    },
    "chankan": {
      "display_name": "Ron",
      "show_when": [
        "not_our_turn",
        {"name": "status_missing", "opts": ["just_reached", "about_to_call"]},
        [
          {"name": "status_missing", "opts": ["furiten"]},
          {"name": "status", "opts": ["atago-hiroe", "riichi"]}
        ],
        {"name": "not_anyone_status", "opts": ["tried_to_ron"]},
        [
          [
            {"name": "last_call_is", "opts": ["kakan"]},
            {"name": "status", "opts": ["atago-kinue", "atago_kinue_aside_waits"]},
            {"name": "match", "opts": [["hand", "calls", "last_called_tile"], ["win"]]}
          ],
          [
            {"name": "last_call_is", "opts": ["ankan"]},
            {"name": "match", "opts": [["hand", "calls"], ["kokushi_tenpai"]]},
            {"name": "match", "opts": [["hand", "calls", "last_called_tile"], ["win"]]}
          ],
          [
            {"name": "last_call_is", "opts": ["kakan"]},
            {"name": "status", "opts": ["kakura-kurumi", "riichi"]},
            {"name": "match", "opts": [["hand", "calls", "last_called_tile"], ["kakura_kurumi_win"]]}
          ]
        ],
        [
          {"name": "not_status", "opts": ["atago-kinue", "atago_kinue_aside_waits"]},
          {"name": "last_call_is", "opts": ["kakan"]},
          {"name": "match", "opts": [["aside_unique", "last_called_tile"], [["nojoker", [["pair"], 1]]]]}
        ],
        [
           {"name": "not_others_status", "opts": ["choe-myeonghwa"]},
           [
             {"name": "seat_is", "opts": ["east"]},
             [
               [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["2z"]], 1]]]]}],
               [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["3z"]], 1]]]]}],
               [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["4z"]], 1]]]]}]
             ]
           ],
           [
             {"name": "seat_is", "opts": ["south"]},
             [
               [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["3z"]], 1]]]]}],
               [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["4z"]], 1]]]]}],
               [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["1z"]], 1]]]]}]
             ]
           ],
           [
             {"name": "seat_is", "opts": ["west"]},
             [
               [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["4z"]], 1]]]]}],
               [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["1z"]], 1]]]]}],
               [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["2z"]], 1]]]]}]
             ]
           ],
           [
             {"name": "seat_is", "opts": ["north"]},
             [
               [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["1z"]], 1]]]]}],
               [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["2z"]], 1]]]]}],
               [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "last_called_tile"], [[[[["3z"]], 1]]]]}]
             ]
           ],
           "has_yakuman_with_call"
        ]
      ],
      "actions": [
        ["big_text", "Ron"], ["pause", 1000], ["recalculate_buttons"], ["reveal_hand"], ["win_by_call"]
      ],
      "precedence_over": ["chii", "pon", "kan", "riichi", "daiminkan", "ankan", "kakan"]
    },
    "tsumo": {
      "display_name": "Tsumo",
      "show_when": [
        "our_turn",
        {"name": "not_status", "opts": ["match_start"]},
        {"name": "not_status", "opts": ["just_reached", "about_to_call"]},
        [
          {"name": "status", "opts": ["atago-kinue", "atago_kinue_aside_waits"]},
          {"name": "match", "opts": [["hand", "calls", "draw"], ["win"]]},
          [
            {"name": "status", "opts": ["miyanaga-saki"]},
            {"name": "has_attr", "opts": ["draw", "rinshan"]},
            {"name": "match", "opts": [["hand", "calls"], ["tenpai"]]}
          ],
          [
            {"name": "status", "opts": ["amae-koromo"]},
            {"name": "has_attr", "opts": ["draw", "haitei"]},
            {"name": "match", "opts": [["hand", "calls"], ["tenpai"]]}
          ],
          [
            {"name": "status", "opts": ["kakura-kurumi", "riichi"]},
            {"name": "match", "opts": [["hand", "calls", "draw"], ["kakura_kurumi_win"]]}
          ]
        ],
        [
          {"name": "not_status", "opts": ["atago-kinue", "atago_kinue_aside_waits"]},
          [
            {"name": "status_missing", "opts": ["just_changed_atago_kinue_aside_waits"]},
            {"name": "match", "opts": [["aside_unique", "draw"], [["nojoker", [["pair"], 1]]]]}
          ]
        ],
        {"name": "has_yaku_with_hand", "opts": [1, ["yaku", "yakuman"]]},
        [
           {"name": "not_others_status", "opts": ["choe-myeonghwa"]},
           [
             {"name": "seat_is", "opts": ["east"]},
             [
               [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["2z"]], 1]]]]}],
               [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["3z"]], 1]]]]}],
               [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["4z"]], 1]]]]}]
             ]
           ],
           [
             {"name": "seat_is", "opts": ["south"]},
             [
               [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["3z"]], 1]]]]}],
               [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["4z"]], 1]]]]}],
               [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["1z"]], 1]]]]}]
             ]
           ],
           [
             {"name": "seat_is", "opts": ["west"]},
             [
               [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["4z"]], 1]]]]}],
               [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["1z"]], 1]]]]}],
               [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["2z"]], 1]]]]}]
             ]
           ],
           [
             {"name": "seat_is", "opts": ["north"]},
             [
               [{"name": "shimocha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["1z"]], 1]]]]}],
               [{"name": "toimen_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["2z"]], 1]]]]}],
               [{"name": "kamicha_status", "opts": ["choe-myeonghwa"]}, {"name": "not_match", "opts": [["hand", "calls", "draw"], [[[[["3z"]], 1]]]]}]
             ]
           ],
           "has_yakuman_with_hand"
        ],
        [
          {"name": "not_status", "opts": ["kataoka-yuuki"]},
          {"name": "not_round_wind_is", "opts": ["east"]},
          {"name": "status", "opts": ["kataoka-yuuki_exhausted"]}
        ],
        [
          {"name": "not_status", "opts": ["nanpo-kazue"]},
          {"name": "not_round_wind_is", "opts": ["south"]},
          {"name": "status", "opts": ["nanpo-kazue_exhausted"]}
        ],
        [
          {"name": "not_status", "opts": ["onjouji-toki"]},
          {"name": "status", "opts": ["onjouji-toki_exhausted"]}
        ]
      ],
      "actions": [
        ["big_text", "Tsumo"], ["pause", 1000], ["reveal_hand"], ["win_by_draw"]
      ],
      "precedence_over": ["chii", "pon", "kan", "riichi", "daiminkan", "ankan", "kakan"]
    },
    "kyuushu_kyuuhai": {
      "display_name": "Kyuushu Kyuuhai",
      "show_when": [
        "our_turn",
        "has_draw",
        {"name": "not_status", "opts": ["match_start"]},
        {"name": "status", "opts": ["discards_empty"]},
        {"name": "status_missing", "opts": ["call_made"]},
        {"name": "match", "opts": [["hand", "draw"], ["kyuushu_kyuuhai"]]}
      ],
      "actions": [
        ["big_text", "Kyushuu Kyuuhai"],
        ["reveal_hand"],
        ["pause", 1000],
        ["abortive_draw", "Kyushuu Kyuuhai"]
      ]
    },
    "extra_turn": {
      "display_name": "Take extra turn",
      "show_when": ["our_turn", "just_discarded", {"name": "status", "opts": ["extra_turn", "extra_turn_prompt"]}, {"name": "status_missing", "opts": ["extra_turn_taken"]}],
      "actions": [
        ["unset_status", "extra_turn", "extra_turn_prompt"],
        ["set_status", "extra_turn_taken"],
        ["when", [{"name": "anyone_status", "opts": ["miyanaga-teru"]}], [["add_honba"]]],
        ["when", [{"name": "status_missing", "opts": ["shirouzu-mairu"]}], [["draw"]]]
      ],
      "unskippable": true
    },
    "extra_turn_skip": {
      "display_name": "Skip extra turn",
      "show_when": ["our_turn", "just_discarded", {"name": "status", "opts": ["extra_turn", "extra_turn_prompt"]}, {"name": "status_missing", "opts": ["extra_turn_taken"]}],
      "actions": [
        ["unset_status", "extra_turn", "extra_turn_prompt", "discard_facedown"],
        ["push_message", "skipped their extra turn"],
        ["advance_turn"]
      ],
      "unskippable": true
    },
    "extra_turn_skip_inoue_jun": {
      "display_name": "Skip extra turn to discard facedown",
      "show_when": ["our_turn", "not_just_discarded", {"name": "status", "opts": ["extra_turn", "inoue_jun_broke_ippatsu"]}, {"name": "status_missing", "opts": ["extra_turn_taken"]}],
      "actions": [["unset_status", "extra_turn", "inoue_jun_broke_ippatsu"], ["set_status", "discard_facedown"]]
    }
  },
  "auto_buttons": {
    "1_auto_sort": {
      "display_name": "A",
      "actions": [["sort_hand"]],
      "enabled_at_start": true
    },
    "2_auto_ron": {
      "display_name": "R",
      "actions": [
        ["when", [{"name": "buttons_include", "opts": ["ron"]}], [["press_button", "ron"]]],
        ["when", [{"name": "buttons_include", "opts": ["tsumo"]}], [["press_button", "tsumo"]]]
      ],
      "enabled_at_start": false
    },
    "3_auto_no_call": {
      "display_name": "C",
      "actions": [
        ["when", [
            {"name": "buttons_include", "opts": ["skip"]},
            {"name": "buttons_exclude", "opts": ["ron", "tsumo", "ankan", "riichi", "atarashi_ako", "choe_myeonghwa"]}
          ], [["press_button", "skip"]]]
      ],
      "enabled_at_start": false
    },
    "4_auto_discard": {
      "display_name": "D",
      "actions": [["when", ["has_draw"], [["discard_draw"]]]],
      "enabled_at_start": false
    }
  },
  "interruptible_actions": ["recalculate_buttons", "play_tile", "advance_turn", "call", "self_call", "upgrade_call", "draw", "draw_from_aside", "swap_marked_hand_and_discard", "swap_marked_hand_and_dora_indicator"],
  "shown_statuses": ["furiten"],
  "display_riichi_sticks": true,
  "display_honba": true,
  "initial_score": 30000,
  "starting_tiles": 13,
  "max_rounds": 8
}