# Vietnamese mahjong

Vietnamese mahjong is a four-player variant. The wall consists of:

- four each of the 1-9 character tiles
- four each of the 1-9 circle tiles
- four each of the 1-9 bamboo tiles
- four each of the four winds
- four each of the three dragons
- sixteen flowers:
  + Four flowers (üÄ¢üÄ£üÄ•üÄ§)
  + Four seasons (üÄ¶üÄßüÄ®üÄ©)
  + Four emperors (Áöá)
  + Four empresses (Âêé)
- three each of these green/blue jokers:
  + General joker (Á∏Ç): Can represent any tile above.
  + Circle joker (Á≠í): Can represent any circle tile.
  + Bamboo joker (Á¥¢): Can represent any bamboo tile.
  + Character joker (Ëê¨): Can represent any character tile.
- three each of these red jokers:
  + Flower joker (Ëä±): Can represent any flower.
  + Wind joker (Âñú): Can represent any wind.
  + Dragon joker (ÂÖÉ): Can represent any dragon.
  + Suit joker (Âêà): Can represent any suited tile.

for a total of 176 tiles.

Of the 34 basic tiles, the numbered tiles are considered __suited tiles__, and the winds/dragons are considered __honor tiles__.

The three copies of each joker are also different: one has a rectangular frame, one has a diamond frame, and one has a circle frame. This has scoring implications.

Starting with a hand of 13 tiles, your goal is to make a 14-tile hand comprised of one of the following:

- __Standard hand__: Four sets (triplets or sequences) and a pair
- __Thirteen Orphans__: one of each 1, 9, wind, and dragon tile, with one tile forming a pair
- __No Flowers No Leaves (NFNL)__: any combination of nonjoker suited tiles, and you must not have declared any flower or joker

Note that seven pairs is not a Vietnamese mahjong hand.

There is a separate win condition: if you discard three green jokers and no red jokers, you can also declare a "self-drawn" win. More on this later.

## Calls

You may Ph·ªóng triplets, Kh√†n quads, and Ph√¨nh sequences with the usual rules and precedence. In addition, any flower or joker tile may be declared on your turn to be set aside for points, before drawing a replacement tile. Note that due to the NFNL hand, declaring flowers is optional -- NFNL hands would rather discard flowers.

By default there are no joker restrictions on calls, but house rules may rule this differently.

Winning off a discard is done by declaring √ô. There is no multiple √ô -- if multiple people call √ô on the same tile, then the player closest in turn order wins.

### Discarding flowers

For the purposes of winning, discarded flowers (including the Flower joker) are treated as the General joker, meaning anyone who is ready to win can win off a discarded flower or joker. This treatment only applies to those who can call √ô -- normal calls cannot claim flowers.

## Ph√°n table

The basic score in Vietnamese Mahjong is __Ph√°n__, but every 6 Ph√°n is converted to 1 __M·ªßn__, the limit score unit. Once you have 1 M·ªßn, Ph√°n is immaterial except for converting into M·ªßn. 

The score essentially doubles every Ph√°n, and after 6 Ph√°n (1 M·ªßn), it doubles every 1 M·ªßn.

The easiest way to score Ph√°n is by declaring flowers and jokers. For declared flowers, scoring is straightforward: you get 1 Ph√°n if the flower number matches your seat (1=east, 2=south, 3=west, 4=north) and 0 Ph√°n otherwise. For declared jokers, consult the table below:

- Green jokers
  + General joker (Á∏Ç): 2 Ph√°n, +1 Ph√°n if east\*
  + Circle joker (Á≠í): 1 Ph√°n, +1 Ph√°n if south
  + Bamboo joker (Á¥¢): 1 Ph√°n, +1 Ph√°n if west
  + Character joker (Ëê¨): 1 Ph√°n, +1 Ph√°n if north
- Red jokers
  + Flower joker (Ëä±): 2 Ph√°n always
  + Wind joker (Âñú): 1 Ph√°n, +1 Ph√°n if south
  + Dragon joker (ÂÖÉ): 1 Ph√°n, +1 Ph√°n if west
  + Suit joker (Âêà): 2 Ph√°n, +1 Ph√°n if north\*

\* Additional rule: if you aren't east but you declare the General joker before the start of the game, you get the +1 Ph√°n as well. Same applies to north and the Suit joker.

A rare occurrence is declaring the General joker and the Suit joker together before the start of the game. Doing so gives you 9 Ph√°n outright. If the two jokers also share the same frame, (e.g. both have a circle frame) then you get 12 Ph√°n instead.

Below are all the other ways to score Ph√°n and M·ªßn. Note that these are not required. In other words, it is allowed to have a Chicken Hand (0 Ph√°n).

- __All Sequences__ (1 Ph√°n): Every set is a sequence, and you don't have an honor pair.
- __All Triplets__ (3 Ph√°n): Every set is a triplet (or quad), none of them being honor tiles.
- __All Sequences with Honors__ (3 Ph√°n): Every set is a sequence, and your pair is honor tiles.
- __All Triplets with Honors__ (1 M·ªßn): Every set is a triplet (or quad), and at least one of them is an honor triplet (or quad).
- __All Called Triplets__ (1 M·ªßn): Every set is an open triplet (or quad). None of them are honor triplets (or quads).
- __All Called Triplets with Honors__ (2 M·ªßn): Every set is an open triplet (or quad). At least one of them is an honor triplet (or quad).
- __All Triplets with Terminals__ (1 M·ªßn): Every set is a triplet (or quad), including one triplet/quad of 1s and one triplet/quad of 9s.
- __No Flowers or Honors__ (1 M·ªßn): You have no flowers or jokers declared, and your hand does not contain any honor tiles.
- __No Flowers, Honors, or Triplets__ (2 M·ªßn): Every set is a sequence, and you don't have an honor pair, and you have not declared any flowers or jokers.
- __Full Flush__ (2 M·ªßn): Your hand consists of one suit only. (Note that there is no Mixed Flush).
- __Pure Straight__ (3 M·ªßn): You have 123 456 789 in the same suit.
- __All Honors__ (4 M·ªßn): Your hand is all honor tiles.
- __Thirteen Orphans__ (2 M·ªßn): Your hand consists of one of each 1, 9, wind, and dragon tile, with one tile forming a pair.
- __No Flowers, No Leaves__ (3 M·ªßn): See the NFNL section below, because the scoring for this can vary.
- __Small Three Dragons__ (1 M·ªßn): You have two dragon triplets and a dragon pair.
- __Big Three Dragons__ (2 M·ªßn): Instead, you have three dragon triplets.
- __Four Concealed Triplets__ (3 M·ªßn): You have four concealed triplets. Triplets obtained via win by self-draw count as concealed, but triplets obtained via win by discard/robbing a kong are not concealed. +1 M·ªßn if no jokers are used, +1 M·ªßn if no flowers are declared.
- __Four Quads__ (4 M·ªßn): You have four Kh√†ns. +1 M·ªßn if no jokers are used, +1 M·ªßn if no flowers are declared.
- __Small Four Winds__ (5 M·ªßn): You have three wind triplets and a wind pair. +1 M·ªßn if no jokers are used, +1 M·ªßn if no flowers are declared.
- __Big Four Winds__ (8 M·ªßn): Instead, you have four wind triplets. +1 M·ªßn if no jokers are used, +1 M·ªßn if no flowers are declared.
- __Blessing of Heaven__ (2 M·ªßn): Win with your first draw as the dealer.
- __Blessing of Earth__ (2 M·ªßn): Win on dealer's first discard.
- __Blessing of Man__ (2 M·ªßn): Win before your first discard and before any calls.
- __NFNL Deal-In__ (1 M·ªßn): Win on a discarded flower or joker.

## Scoring table

If winning on a discard, everyone pays the payout but the discarder pays double. If winning by self-draw, everyone pays double. One exception: if the hand is 0 Ph√°n, everyone pays out 1.

The Ph√°n payout table is as follows:

- 0 Ph√°n: 1 (see above)
- 1 Ph√°n: 1
- 2 Ph√°n: 2
- 3 Ph√°n: 4
- 4 Ph√°n: 8
- 5 Ph√°n: 16
- 6 Ph√°n: 32

After 6 Ph√°n, every 6 Ph√°n is converted into 1 M·ªßn, and leftover Ph√°n is ignored. The M·ªßn payout table is as follows:

- 1 M·ªßn: 32
- 2 M·ªßn: 64
- 3 M·ªßn: 96
- 4 M·ªßn: 128
- 5 M·ªßn: 160
- 6 M·ªßn: 192
- 7 M·ªßn: 224
- 8 M·ªßn: 256

## No Flowers, No Leaves (NFNL)

The special hand NFNL is achieved by having only suited tiles, never declaring a flower or joker, and winning on a suited tile. The idea is that you must discard every flower and joker and honor you get, which is of course dangerous especially since discarded flowers are wildcards for anyone ready to win, and they get 1 M·ªßn extra for it too. You probably want to discard flowers before jokers before honors.

If you do achieve this, then it's a 3 M·ªßn payout. But if your NFNL hand is a valid standard hand, you are eligible for the following additional M·ªßn:

- __NFNL All Triplets__ (4 M·ªßn)
- __NFNL Full Flush__ (5 M·ªßn)
- __NFNL Full Flush All Triplets__ (6 M·ªßn)

If your hand is also concealed (no open calls), you can get these as well:

- __NFNL Concealed All Sequences Single Wait__ (4 M·ªßn)
- __NFNL Concealed All Triplets__ (6 M·ªßn)
- __NFNL Concealed Full Flush All Triplets__ (8 M·ªßn)

## Discarding green jokers

Regardless of your hand composition, you can win instantly by discarding green jokers (but no red jokers, which would invalidate this win).

If you are able to discard 3 green jokers and no one claims the third, then you win instantly:

- __Three Green Joker Discards__ (1 M·ªßn)

You can choose to not win and continue discarding green jokers. Every time you do so, if no one claims the green joker, you can declare a win. Discarding five or more green jokers increases the payout:

- __Five Green Joker Discards__ (2 M·ªßn)

These wins are considered self-draw wins, so everyone pays double the payout.

## TODO

- no multiple √ô - head bump is in effect
- can't call converted jokers; recalculate buttons before conversion! also no need to convert -- use a special tile alias for e.g. {"1f", ["discard"]} after setting a status for everyone that disallows normal calls
- NFNL should be nojoker
- NFNL hand bonuses
- discarding green jokers





















Discarded flowers can be claimed as an any-tile joker.