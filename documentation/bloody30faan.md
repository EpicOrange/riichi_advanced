# Bloody 30 Faan Jokers (B30FJ)

The wall for Bloody 30 Faan Jokers is composed of the following:

- four each of the 1-9 character tiles
- four each of the 1-9 circle tiles
- four each of the 1-9 bamboo tiles
- four each of the four winds
- four each of the three dragons
- no flowers
- one of each of these eight jokers of varying power:
  + Baida joker (白搭): Can represent any tile above.
  + Suit joker (筒索萬): Can represent any suited tile.
  + Honors joker (番): Can represent any honor tile.
  + Wind joker (🀀🀁🀂🀃): Can represent any wind.
  + Dragon joker (🀄︎🀅🀆): Can represent any dragon.
  + Character joker (萬): Can represent any character tile.
  + Circle joker (筒): Can represent any circle tile.
  + Bamboo joker (索): Can represent any bamboo tile.

There are five winning hand configurations in B30FJ:

- Four sets and a pair. Sets are triplets or sequences. You may also use a knitted straight in place of three sets, a knitted short straight in place of two sets, a knitted terminal-sequences in place of two sets, or knitted triplets in place of three sets.
- Seven pairs.
- Thirteen orphans.
- Thirteen disconnected (includes a pair)
- Knitted honors hand. To achieve this, you must have exactly one of each wind and dragon, plus seven of the nine tiles required to form knitted triplets or a knitted straight.

For more information about knitted sets, refer to the relevant section below (Knitted Hands).

Bloody end rules are enabled, meaning after the first win, remaining players continue playing until three players have won, or until the wall is exhausted. Multiple players may win off the same discard.

In addition, if the wait tile is a single-tile wait for a pair on the Baida or Suit joker, one can only win by self-draw.

TODO is there a dead wall?

## Calls

In addition to the normal calls (Sheung, Pung, Kong) you may declare a joker like a flower tile, awarding one additional fan each.

The call precedence is Kong > Pung > Sheung. In the event of multiple kong or multiple pung, the kong/pung with no jokers takes precedence, then the kong/pung using a weaker joker takes precedence.

There are also the following restrictions regarding jokers and calls:

- You cannot sheung a discarded joker.
- You cannot pung or kong a discard using more than one joker.
- You cannot add a joker to a pung.
- You cannot concealed kong with a joker.

Concealed kongs are completely hidden until the end of a round.

Swap-calling is disallowed.

## Faan table

The faan table for B30FJ is extensive and as such will be broken down into thirteen subsections:

- Flowers and Honors
- Terminals and Nonterminals
- Suits
- Kongs
- Triplets
- Sequences
- Tile Hog
- Numbers
- Special Win Methods
- Concealed
- Pairs
- Knitted Hands
- Miscellaneous

### Flowers and Honors

- __Flower__ (1 faan): Each called joker counts as 1 faan.
- __No Honors or Flowers__ (2 faan): You have no honor tiles or flowers.
- __No Jokers__ (2 faan): You have no jokers in hand. Does not include flowers.
- __Dragons__/__Round Wind__/__Seat Wind__ (1 faan): A triplet of dragons/round winds/seat winds is worth 1 faan each.
- __Little Three Winds__ (5 faan): You have two wind triplets and a wind pair.
- __Big Three Winds__ (10 faan): Instead, you have three wind triplets and no wind pair.
- __Little Four Winds__ (20 faan): Instead, you have three wind triplets and a wind pair.
- __Big Four Winds__ (30 faan): Instead, you have four wind triplets.
- __Little Three Dragons__ (8 faan): You have two dragon triplets and a dragon pair.
- __Big Three Dragons__ (15 faan): Instead, you have three dragon triplets.
- __All Honors__ (30 faan): Your hand is all honor tiles.

### Terminals and Nonterminals

Terminal tiles are the numbers 1 and 9.

- __All Simples__ (2 faan): Your hand consists of only number tiles 2-8.
- __Terminal Sequences__ (1 faan): You have 123 and 789 of the same suit.
- __Double Terminal Sequences__ (10 faan): You actually have 123 and 789 of the same suit twice, in different suits.
- __Pure Double Terminal Sequences__ (20 faan): You actually have 123 and 789 of the same suit twice, in the same suit.
- __Mixed Outside Hand__ (5 faan): Each of your sets and pair contains a terminal or honor tile.
- __Pure Outside Hand__ (8 faan): Instead, each of your sets and pair contains a terminal tile, no honors.
- __Mixed Terminals__ (10 faan): Your hand consists of terminals and honor tiles only.
- __Pure Terminals__ (30 faan): Your hand actually consists of terminals only.

### Suits

- __One Voided Suit__ (2 faan): Your hand is missing one of the three suits.
- __All Types__ (5 faan): Your hand has each of the five kinds of tiles: characters, circles, bamboo, winds, and dragons.
- __Mixed Flush__ (5 faan): Your hand consists of one suit plus honors.
- __Full Flush__ (10 faan): Your hand actually consists of one suit only.
- __Open Nine Gates__ (20 faan): Your hand (including calls) is all one suit in the nine gates shape (1112345678999 + one extra tile).
- __Nine Gates__ (30 faan): Same, but you have no calls.

### Kongs

- __Open Kong__ (1 faan): Having an open kong (i.e. called discard or added kong) grants 1 faan.
- __Concealed Kong__ (2 faan): Having a concealed kong grants 2 faan.
- __Two Kongs__ (5 faan): Instead, you have two kongs. (Overrides the above. Kong type is now irrelevant.)
- __Three Kongs__ (15 faan): Instead, you have three kongs.
- __Four Kongs__ (30 faan): Instead, you have four kongs.

### Triplets

For the following, triplets can include kongs.

- __All Triplets__ (5 faan): All of your sets are triplets.
- __Two Concealed Triplets__ (2 faan): You have two concealed triplets. Triplets obtained via win by self-draw count.
- __Three Concealed Triplets__ (8 faan): Instead, you have three concealed triplets.
- __Four Concealed Triplets__ (15 faan): Instead, you have four concealed triplets.
- __Two Shifted Triplets__ (2 faan): You have consecutive triplets in the pattern 111222. They do not have to be the same suit.
- __Three Small Shifted Triplets__ (5 faan): You have consecutive triplets in the pattern 111222333, except one of them is actually a pair. The three can be of any suit.
- __Three Pure Shifted Triplets__ (10 faan): Same, but they are all the same suit.
- __Four Pure Small Shifted Triplets__ (15 faan): Instead, you have consecutive triplets in the pattern 111222333444, except one of them is actually a pair. They are all the same suit.
- __Four Pure Shifted Triplets__ (20 faan): Instead, you have consecutive triplets in the pattern 111222333444, of the same suit.
- __Mixed Three Small Shifted Triplets__ (5 faan): You have consecutive triplets in the pattern 111222333, except one of them is actually a pair. They must all be of different suits.
- __Mixed Three Shifted Triplets__ (8 faan): Instead, you have consecutive triplets in the pattern 111222333. They must all be of different suits.
- __Mixed Four Small Shifted Triplets__ (10 faan): Instead, you have consecutive triplets in the pattern 111222333444, except one of them is actually a pair. Their suits have to _cycle_: e.g. if it starts with characters, circles, bamboo, the last suit must be characters again.
- __Mixed Four Shifted Triplets__ (15 faan): Instead, you have consecutive triplets in the pattern 111222333444, with cycling suits as before.
- __Mixed Five Small Shifted Triplets__ (20 faan): Instead, you have consecutive triplets in the pattern 111222333444555, except one of them is actually a pair. Their suits have to _cycle_: e.g. if it starts with characters, circles, bamboo, the last suit must be characters again, and the following suit must be circles again.
- __Double Triplets__ (2 faan): You have two triplets of the same number. They can be of different suits.
- __Small Triple Triplets__ (5 faan): You have three triplets of the same number, except one of them is actually a pair. They are obviously all of different suits.
- __Triple Triplets__ (10 faan): You have three triplets of the same number.
- __Quadruple Triplets__ (30 faan): You have four triplets of the same number. This requires some joker tomfoolery, as it requires 6 of the same tile.

### Sequences

- __All Sequences__ (2 faan): All of your sets are sequences.
- __Double Sequences__ (1 faan): You have two of the same sequence in different suits. It is possible to get this one twice by having two of another sequence, which gives you a total of 2 faan.
- __Triple Sequences__ (5 faan): You have three of the same sequence in different suits.
- __Triple Pure Sequences__ (10 faan): You have three of the same sequence in the same suit.
- __Quadruple Pure Sequences__ (30 faan): You have four of the same sequence in the same suit.
- __Short Straight__ (1 faan): You have 123 456 or 456 789 of one suit. It is possible to get this one twice by having two short straights, which gives you a total of 2 faan.
- __Double Short Straight__ (10 faan): You have 123 456 or 456 789 of one suit and the same 123 456 or 456 789 of another suit.
- __Pure Double Short Straight__ (20 faan): You have 123 123 456 456 or 456 456 789 789 of one suit.
- __Identical Sequences__ (2 faan): You have two of the exact same sequence in one suit.
- __Double Identical Sequences__ (10 faan): You have two of the exact same sequence in one suit, and two of another exact same sequence in another suit.
- __Pure Identical Sequences__ (15 faan): You have two of the exact same sequence in one suit, and two of another exact same sequence in the same suit.
- __Mixed Three Shifted Sequences__ (2 faan): You have something like 123 234 345, all of different suits.
- __Mixed Four Shifted Sequences__ (8 faan): You have something like 123 234 345 456, and their suits _cycle_: e.g. if it starts with characters, circles, bamboo, the last sequence's suit must be characters again.
- __Pure Three Shifted Sequences__ (10 faan): You have something like 123 234 345 in the same suit.
- __Pure Four Shifted Sequences__ (30 faan): You have something like 123 234 345 456 in the same suit.
- __Mixed Three Linked Sequences__ (2 faan): You have something like 123 345 567, all of different suits.
- __Pure Three Linked Sequences__ (8 faan): You have something like 123 345 567 in the same suit.
- __Golden Gate Bridge__ (20 faan): You have 123 345 567 789 in the same suit.
- __Mixed Shifted Linked Sequences__ (8 faan): You have both Mixed Three Shifted Sequences and Mixed Three Linked Sequences simulaneously. For example, 123p234m345s567m, which counts as 123p 234m 345s and 123p 345s 567m.
- __Pure Shifted Linked Sequences__ (20 faan): You have both Pure Three Shifted Sequences and Pure Three Linked Sequences simulaneously. For example, 123 234 345 567, which counts as 123 234 345 and 123 345 567.
- __Mixed Straight__ (5 faan): You have 123 456 789, all of different suits.
- __Pure Straight__ (8 faan): You have 123 456 789 in the same suit.

### Tile Hog

Note that you are only awarded the highest scoring of the three Tile Hogs.

- __Tile Hog__ (2 faan): Two of your sets in hand (not calls) use up all four of a given tile. e.g. 111 123
- __Tile Hog__ (5 faan): Two of your sets in hand (not calls) and one pair use up all four of a given tile. e.g.  123 234 22
- __Tile Hog__ (15 faan): Four of your sets in hand (not calls) use up all four of a given tile. e.g. 123 234 345 345
- __Double Tile Hog__ (8 faan): Your hand (not calls) altogether uses up all eight of two different tiles.
- __Triple Tile Hog__ (30 faan): Your hand (not calls) altogether uses up all twelve of three different tiles.

### Numbers

- __All Like Numbers__ (8 faan): All of your sets and your pair use contain the same number. e.g. 44 234 345 345 456 all contain 4.
- __All Odds__ (5 faan): Your hand consists of odd numbers only.
- __All Evens__ (5 faan): Your hand consists of even numbers only.
- __All Central__ (5 faan): Your hand consists of 456 only. Stacks with Three Number Hand below.
- __Three Number Hand__ (5 faan): Your hand consists of three numbers only.
- __Two Number Hand__ (10 faan): Instead, your hand consists of two numbers only.

### Special Win Methods

- __After a Flower__ (1 faan): Win off the replacement tile after calling a joker as a flower.
- __After a Kong__ (2 faan): Win off the replacement tile after calling kong.
- __Robbing a Kong__ (5 faan): Win off the tile someone tried to add to a pung.
- __Under the Sea__ (2 faan): Win off the last draw or last discard.
- __Within Seven Tiles__ (5 faan): Win before the eighth tile is drawn.
- __Within Ten Tiles__ (8 faan): Win before the eleventh tile is drawn.
- __Hand of Man__ (15 faan): Win before your first discard and before any calls.
- __Hand of Heaven__ (30 faan): Win with your first draw (as East seat)
- __Hand of Earth__ (30 faan): Win with your first draw (not East seat)

### Concealed

- __Concealed Hand__ (1 faan): Have no calls except concealed kong. You may still get this if you win off a discard.
- __Fully Concealed Hand__ (2 faan): Same, but you won off self draw.
- __Self Drawn Melded Hand__ (2 faan): Have four calls and win off self draw.
- __Melded Hand__ (5 faan): Have four calls and win off a discard or by robbing a kong.
- __Hell Wait__ (2 faan): Win with a hell wait. A hell wait is defined as a final wait in which all tiles except one are already visible to you, so there is only one remaining left in the wall (or in others' hands).

### Pairs

The following are related to seven-pair hands.

- __Seven Pairs__ (5 faan): You won with a seven-pair hand.
- __Three Consecutive Pairs__ (2 faan): You have something like 11 22 33.
- __Five Consecutive Pairs__ (10 faan): You have something like 11 22 33 44 55.
- __Seven Consecutive Pairs__ (30 faan): You have something like 11 22 33 44 55 66 77.
- __Three Identical Pairs__ (5 faan): You have the same number pair in three suits.
- __Three Dragons Seven Pairs__ (5 faan): Three of your pairs are dragon pairs.
- __Four Winds Seven Pairs__ (10 faan): Four of your pairs are wind pairs.

### Knitted Hands

- __Thirteen Disconnected__ (5 faan): All of your tiles are disconnected, i.e. 3 away from each other or more. You also have a pair of one of the tiles.
- __Knitted Short Straight__ (5 faan): You have e.g. 1m 2p 3s 4m 5p 6s which counts as two sets. You can get this twice for a total of 10 faan.
- __Knitted Terminal Sequences__ (5 faan): You have e.g. 1m 2p 3s 7m 8p 9s which counts as two sets. You can get this twice for a total of 10 faan.
- __Knitted Straight__ (5 faan): You have e.g. 1m 2p 3s 4m 5p 6s 7m 8p 9s which counts as three sets.
- __Knitted Triplets__ (5 faan): You have e.g. 1m 1p 1s 4m 4p 4s 7m 7p 7s which counts as three sets. The three triplets have to be exactly 3 away, so they must be 1-4-7 or 2-5-8 or 3-6-9.
- __Knitted Honors__ (5 faan): You have exactly one of each wind and dragon, plus seven of the nine tiles required to form knitted triplets or a knitted straight.

### Miscellaneous

- __Eyes of the General__ (1 faan): Your pair is 22, 55, or 88.
- __Chicken Hand__ (15 faan): You score none of the other hands.
- __University Train__ (20 faan): You have a pair of red dragons, plus a pure straight of any suit, plus either a triplet of threes or a kong of fours.
- __Thirteen Orphans__ (20 faan): You have one of each terminal and honor tile, plus one extra terminal/honor.
- __Thirteen Orphans__ (25 faan): Same, but you use at most three jokers.
- __Thirteen Orphans__ (30 faan): Same, but you use at most one joker.

## Scoring table

Faan is additive and maps to the following payouts:

- __0 faan__: 1
- __1-2 faan__: 2
- __3-4 faan__: 4
- __5-6 faan__: 8
- __7-8 faan__: 12
- __9-10 faan__: 16
- __11-13 faan__: 24
- __14-16 faan__: 32
- __17-19 faan__: 48
- __20-24 faan__: 64
- __25-29 faan__: 96
- __30-39 faan__: 128
- __40+ faan__: 256

In event of a discard, the discarder pays the payout. In event of a self-drawn win, every player who hasn't yet won pays the payout.
